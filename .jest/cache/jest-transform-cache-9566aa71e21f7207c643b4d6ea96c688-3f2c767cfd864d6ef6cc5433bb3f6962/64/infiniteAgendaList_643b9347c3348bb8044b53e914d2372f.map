{"version":3,"names":["_propTypes","_interopRequireDefault","require","_isUndefined","_debounce","_infiniteList","_xdate","_react","_interopRequireWildcard","_hooks","_momentResolver","_dateutils","_services","_commons","_style","_Context","_constants","_interface","_LayoutProvider","_agendaList","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","InfiniteAgendaList","props","_sections$","_infiniteListProps$vi","theme","sections","scrollToNextEvent","avoidDateUpdates","onScroll","renderSectionHeader","sectionStyle","dayFormatter","_props$dayFormat","dayFormat","useMoment","_props$markToday","markToday","infiniteListProps","renderItem","onEndReached","onEndReachedThreshold","refreshControl","_useContext","useContext","Context","date","updateSource","setDate","style","useRef","styleConstructor","list","_topSection","title","didScroll","sectionScroll","_useState","useState","_useState2","_slicedToArray2","data","setData","useEffect","items","reduce","acc","cur","concat","_toConsumableArray2","isTitle","current","setTimeout","scrollToSection","useDidUpdate","UpdateSources","LIST_DRAG","CALENDAR_INIT","getSectionIndex","dataIndex","i","length","getNextSectionIndex","XDate","titleDate","parseDate","isGTE","getSectionTitle","useCallback","sectionTitle","moment","getMoment","format","toString","string","getDefaultLocale","today","todayString","isToday","debounce","d","sectionIndex","isUndefined","undefined","_sections$findItemTit","_list$current","findItemTitleIndex","scrollToIndex","leading","trailing","layoutProvider","useMemo","LayoutProvider","index","_data$index","type","dim","_infiniteListProps$ti","_infiniteListProps$it","width","constants","screenWidth","height","titleHeight","itemHeight","_onScroll","rawEvent","cancel","event","nativeEvent","contentOffset","layoutMeasurement","contentSize","_onVisibleIndicesChanged","all","topItemIndex","topSection","visibleIndicesChangedDebounce","itemIndex","titleIndex","_data$titleIndex","_onMomentumScrollEnd","headerTextStyle","sectionText","_renderSectionHeader","info","_info$section","section","headerTitle","jsx","AgendaSectionHeader","_renderItem","_type","item","Fragment","_onEndReached","distanceFromEnd","ref","onVisibleIndicesChanged","scrollViewProps","onMomentumScrollEnd","nestedScrollEnabled","disableScrollOnDataChange","renderFooter","_default","exports","displayName","propTypes","PropTypes","func","bool","oneOfType","object","number","array"],"sources":["infiniteAgendaList.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport isUndefined from 'lodash/isUndefined';\nimport debounce from 'lodash/debounce';\nimport InfiniteList from '../infinite-list';\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDidUpdate } from '../hooks';\nimport { getMoment } from '../momentResolver';\nimport { isGTE, isToday } from '../dateutils';\nimport { getDefaultLocale } from '../services';\nimport { UpdateSources, todayString } from './commons';\nimport styleConstructor from './style';\nimport Context from './Context';\nimport constants from \"../commons/constants\";\nimport { parseDate } from \"../interface\";\nimport { LayoutProvider } from \"recyclerlistview/dist/reactnative/core/dependencies/LayoutProvider\";\nimport { AgendaSectionHeader } from \"./agendaList\";\n/**\n * @description: AgendaList component that use InfiniteList to improve performance\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: InfiniteList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst InfiniteAgendaList = (props) => {\n    const { theme, sections, scrollToNextEvent, avoidDateUpdates, onScroll, renderSectionHeader, sectionStyle, dayFormatter, dayFormat = 'dddd, MMM d', useMoment, markToday = true, infiniteListProps, renderItem, onEndReached, onEndReachedThreshold, refreshControl } = props;\n    const { date, updateSource, setDate } = useContext(Context);\n    const style = useRef(styleConstructor(theme));\n    const list = useRef();\n    const _topSection = useRef(sections[0]?.title);\n    const didScroll = useRef(false);\n    const sectionScroll = useRef(false);\n    const [data, setData] = useState([]);\n    useEffect(() => {\n        const items = sections.reduce((acc, cur) => {\n            return [...acc, { title: cur.title, isTitle: true }, ...cur.data];\n        }, []);\n        setData(items);\n        if (date !== _topSection.current) {\n            setTimeout(() => {\n                scrollToSection(date);\n            }, 500);\n        }\n    }, [sections]);\n    useDidUpdate(() => {\n        // NOTE: on first init data should set first section to the current date!!!\n        if (updateSource !== UpdateSources.LIST_DRAG && updateSource !== UpdateSources.CALENDAR_INIT) {\n            scrollToSection(date);\n        }\n    }, [date]);\n    const getSectionIndex = (date) => {\n        let dataIndex = 0;\n        for (let i = 0; i < sections.length; i++) {\n            if (sections[i].title === date) {\n                return dataIndex;\n            }\n            dataIndex += sections[i].data.length + 1;\n        }\n    };\n    const getNextSectionIndex = (date) => {\n        const cur = new XDate(date);\n        let dataIndex = 0;\n        for (let i = 0; i < sections.length; i++) {\n            const titleDate = parseDate(sections[i].title);\n            if (isGTE(titleDate, cur)) {\n                return dataIndex;\n            }\n            dataIndex += sections[i].data.length + 1;\n        }\n    };\n    const getSectionTitle = useCallback((title) => {\n        if (!title)\n            return;\n        let sectionTitle = title;\n        if (dayFormatter) {\n            sectionTitle = dayFormatter(title);\n        }\n        else if (dayFormat) {\n            if (useMoment) {\n                const moment = getMoment();\n                sectionTitle = moment(title).format(dayFormat);\n            }\n            else {\n                sectionTitle = new XDate(title).toString(dayFormat);\n            }\n        }\n        if (markToday) {\n            const string = getDefaultLocale().today || todayString;\n            const today = isToday(title);\n            sectionTitle = today ? `${string}, ${sectionTitle}` : sectionTitle;\n        }\n        return sectionTitle;\n    }, []);\n    const scrollToSection = useCallback(debounce((d) => {\n        const sectionIndex = scrollToNextEvent ? getNextSectionIndex(d) : getSectionIndex(d);\n        if (isUndefined(sectionIndex)) {\n            return;\n        }\n        if (list?.current && sectionIndex !== undefined) {\n            sectionScroll.current = true; // to avoid setDate() in _onVisibleIndicesChanged\n            _topSection.current = sections[findItemTitleIndex(sectionIndex)]?.title;\n            list.current?.scrollToIndex(sectionIndex, true);\n        }\n    }, 1000, { leading: false, trailing: true }), [sections]);\n    const layoutProvider = useMemo(() => new LayoutProvider((index) => data[index]?.isTitle ? 'title' : 'page', (type, dim) => {\n        dim.width = constants.screenWidth;\n        dim.height = type === 'title' ? infiniteListProps?.titleHeight ?? 60 : infiniteListProps?.itemHeight ?? 80;\n    }), [data]);\n    const _onScroll = useCallback((rawEvent) => {\n        if (!didScroll.current) {\n            didScroll.current = true;\n            scrollToSection.cancel();\n        }\n        // Convert to a format similar to NativeSyntheticEvent<NativeScrollEvent>\n        const event = {\n            nativeEvent: {\n                contentOffset: rawEvent.nativeEvent.contentOffset,\n                layoutMeasurement: rawEvent.nativeEvent.layoutMeasurement,\n                contentSize: rawEvent.nativeEvent.contentSize,\n            },\n        };\n        onScroll?.(event);\n    }, [onScroll]);\n    const _onVisibleIndicesChanged = useCallback(debounce((all) => {\n        if (all && all.length && !sectionScroll.current) {\n            const topItemIndex = all[0];\n            const topSection = data[findItemTitleIndex(topItemIndex)];\n            if (topSection && topSection !== _topSection.current) {\n                _topSection.current = topSection.title;\n                if (didScroll.current && !avoidDateUpdates) {\n                    // to avoid setDate() on first load (while setting the initial context.date value)\n                    setDate?.(topSection.title, UpdateSources.LIST_DRAG);\n                }\n            }\n        }\n    }, infiniteListProps?.visibleIndicesChangedDebounce ?? 1000, { leading: false, trailing: true }), [avoidDateUpdates, setDate, data]);\n    const findItemTitleIndex = useCallback((itemIndex) => {\n        let titleIndex = itemIndex;\n        while (titleIndex > 0 && !data[titleIndex]?.isTitle) {\n            titleIndex--;\n        }\n        return titleIndex;\n    }, [data]);\n    const _onMomentumScrollEnd = useCallback(() => {\n        sectionScroll.current = false;\n    }, []);\n    const headerTextStyle = useMemo(() => [style.current.sectionText, sectionStyle], [sectionStyle]);\n    const _renderSectionHeader = useCallback((info) => {\n        const title = info?.section?.title;\n        if (renderSectionHeader) {\n            return renderSectionHeader(title);\n        }\n        const headerTitle = getSectionTitle(title);\n        return <AgendaSectionHeader title={headerTitle} style={headerTextStyle}/>;\n    }, [headerTextStyle]);\n    const _renderItem = useCallback((_type, item) => {\n        if (item?.isTitle) {\n            return _renderSectionHeader({ section: item });\n        }\n        if (renderItem) {\n            return renderItem({ item });\n        }\n        return <></>;\n    }, [renderItem]);\n    const _onEndReached = useCallback(() => {\n        if (onEndReached) {\n            onEndReached({ distanceFromEnd: 0 }); // The RecyclerListView doesn't provide the distanceFromEnd, so we just pass 0\n        }\n    }, [onEndReached]);\n    return (<InfiniteList ref={list} renderItem={_renderItem} data={data} style={infiniteListProps?.style} layoutProvider={layoutProvider} onScroll={_onScroll} onVisibleIndicesChanged={_onVisibleIndicesChanged} scrollViewProps={{ onMomentumScrollEnd: _onMomentumScrollEnd, nestedScrollEnabled: true, refreshControl }} onEndReached={_onEndReached} onEndReachedThreshold={onEndReachedThreshold} disableScrollOnDataChange renderFooter={infiniteListProps?.renderFooter}/>);\n};\nexport default InfiniteAgendaList;\nInfiniteAgendaList.displayName = 'InfiniteAgendaList';\nInfiniteAgendaList.propTypes = {\n    dayFormat: PropTypes.string,\n    dayFormatter: PropTypes.func,\n    useMoment: PropTypes.bool,\n    markToday: PropTypes.bool,\n    sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n    avoidDateUpdates: PropTypes.bool\n};\n"],"mappings":"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"}