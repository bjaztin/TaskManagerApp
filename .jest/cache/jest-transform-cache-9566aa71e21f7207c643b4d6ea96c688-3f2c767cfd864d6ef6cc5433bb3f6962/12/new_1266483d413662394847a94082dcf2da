a7ff009c3a4ed45801970a1afc0bd424
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _xdate = _interopRequireDefault(require("xdate"));
var _react = _interopRequireWildcard(require("react"));
var _reactNative = require("react-native");
var _constants = _interopRequireDefault(require("../commons/constants"));
var _interface = require("../interface");
var _componentUpdater = require("../componentUpdater");
var _calendar = _interopRequireDefault(require("../calendar"));
var _header = _interopRequireDefault(require("../calendar/header"));
var _infiniteList = _interopRequireDefault(require("../infinite-list"));
var _style = _interopRequireDefault(require("./style"));
var _jsxRuntime = require("react/jsx-runtime");
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var NUMBER_OF_PAGES = 50;
var CALENDAR_HEIGHT = 360;
var CalendarList = function CalendarList(props) {
  var initialDate = props.initialDate,
    horizontal = props.horizontal,
    _props$scrollRange = props.scrollRange,
    scrollRange = _props$scrollRange === void 0 ? NUMBER_OF_PAGES : _props$scrollRange,
    staticHeader = props.staticHeader,
    scrollViewProps = props.scrollViewProps,
    calendarProps = props.calendarProps,
    testID = props.testID;
  var style = (0, _react.useRef)((0, _style.default)(calendarProps == null ? void 0 : calendarProps.theme));
  var list = (0, _react.useRef)();
  var _useState = (0, _react.useState)(getDatesArray(initialDate, scrollRange)),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    items = _useState2[0],
    setItems = _useState2[1];
  var _useState3 = (0, _react.useState)(scrollRange),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    positionIndex = _useState4[0],
    setPositionIndex = _useState4[1];
  var _useState5 = (0, _react.useState)(initialDate || items[scrollRange]),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    currentMonth = _useState6[0],
    setCurrentMonth = _useState6[1];
  var shouldRenderStaticHeader = staticHeader && horizontal;
  var headerProps = (0, _componentUpdater.extractHeaderProps)(props);
  var staticHeaderStyle = (0, _react.useMemo)(function () {
    return [style.current.staticHeader, calendarProps == null ? void 0 : calendarProps.headerStyle];
  }, [calendarProps == null ? void 0 : calendarProps.headerStyle]);
  (0, _react.useEffect)(function () {
    scrollToMonth(currentMonth);
  }, [currentMonth]);
  var getMonthIndex = (0, _react.useCallback)(function (month) {
    if (!month) {
      return -1;
    }
    return items.findIndex(function (item) {
      return item.includes(month.toString('yyyy-MM'));
    });
  }, [items]);
  var scrollToMonth = (0, _react.useCallback)(function (month) {
    if (month) {
      var index = getMonthIndex(new _xdate.default(month));
      if (index !== -1) {
        var _list$current;
        var shouldAnimate = _constants.default.isAndroid && !horizontal ? false : true;
        (_list$current = list.current) == null ? void 0 : _list$current.scrollToOffset == null ? void 0 : _list$current.scrollToOffset(index * _constants.default.screenWidth, 0, shouldAnimate);
      }
    }
  }, [getMonthIndex]);
  var updateMonth = (0, _react.useCallback)(function (count, month) {
    if (month) {
      var next = new _xdate.default(month).addMonths(count, true);
      var nextNext = new _xdate.default(month).addMonths(count * 2, true);
      var nextNextIndex = getMonthIndex(nextNext);
      if (nextNextIndex !== -1) {
        setCurrentMonth((0, _interface.toMarkingFormat)(next));
      }
    }
  }, [getMonthIndex]);
  var scrollToNextMonth = (0, _react.useCallback)(function (method, month) {
    if (calendarProps != null && calendarProps.onPressArrowLeft) {
      calendarProps == null ? void 0 : calendarProps.onPressArrowLeft == null ? void 0 : calendarProps.onPressArrowLeft(method, month);
    } else {
      updateMonth(1, month);
    }
  }, [updateMonth]);
  var scrollToPreviousMonth = (0, _react.useCallback)(function (method, month) {
    if (calendarProps != null && calendarProps.onPressArrowRight) {
      calendarProps == null ? void 0 : calendarProps.onPressArrowRight == null ? void 0 : calendarProps.onPressArrowRight(method, month);
    } else {
      updateMonth(-1, month);
    }
  }, [updateMonth]);
  var onPageChange = (0, _react.useCallback)(function (pageIndex, _, info) {
    if (shouldRenderStaticHeader && info.scrolledByUser) {
      setCurrentMonth(items[pageIndex]);
    }
  }, [items]);
  var renderStaticHeader = function renderStaticHeader() {
    if (shouldRenderStaticHeader) {
      return (0, _jsxRuntime.jsx)(_header.default, _objectSpread(_objectSpread({}, headerProps), {}, {
        month: new _xdate.default(currentMonth),
        onPressArrowRight: scrollToNextMonth,
        onPressArrowLeft: scrollToPreviousMonth,
        style: staticHeaderStyle,
        accessibilityElementsHidden: true,
        importantForAccessibility: 'no-hide-descendants',
        testID: 'static-header'
      }));
    }
  };
  var reloadPages = (0, _react.useCallback)(function (pageIndex) {
    horizontal ? replaceItems(pageIndex) : addItems(pageIndex);
  }, [items]);
  var replaceItems = function replaceItems(index) {
    var newItems = getDatesArray(items[index], scrollRange);
    setItems(newItems);
  };
  var addItems = function addItems(index) {
    var array = (0, _toConsumableArray2.default)(items);
    var startingDate = items[index];
    var shouldAppend = index > scrollRange;
    if (startingDate) {
      if (shouldAppend) {
        for (var i = 2; i <= scrollRange; i++) {
          var newDate = getDate(startingDate, i);
          array.push(newDate);
        }
      } else {
        for (var _i = -1; _i > -scrollRange; _i--) {
          var _newDate = getDate(startingDate, _i);
          array.unshift(_newDate);
        }
      }
      setPositionIndex(shouldAppend ? index : scrollRange - 1);
      setItems(array);
    }
  };
  var listContainerStyle = (0, _react.useMemo)(function () {
    return [style.current.flatListContainer, {
      flex: horizontal ? undefined : 1
    }];
  }, [style, horizontal]);
  var scrollProps = (0, _react.useMemo)(function () {
    return _objectSpread(_objectSpread({}, scrollViewProps), {}, {
      showsHorizontalScrollIndicator: false,
      showsVerticalScrollIndicator: false
    });
  }, [scrollViewProps]);
  var renderItem = (0, _react.useCallback)(function (_type, item) {
    return (0, _jsxRuntime.jsx)(_calendar.default, _objectSpread(_objectSpread(_objectSpread({}, calendarProps), headerProps), {}, {
      initialDate: item,
      disableMonthChange: true,
      hideArrows: !horizontal,
      onPressArrowRight: scrollToNextMonth,
      onPressArrowLeft: scrollToPreviousMonth,
      hideExtraDays: (calendarProps == null ? void 0 : calendarProps.hideExtraDays) || true,
      style: [style.current.calendar, calendarProps == null ? void 0 : calendarProps.style],
      headerStyle: horizontal ? calendarProps == null ? void 0 : calendarProps.headerStyle : undefined,
      testID: `${testID}_${item}`
    }));
  }, [calendarProps, scrollToNextMonth, scrollToPreviousMonth]);
  return (0, _jsxRuntime.jsxs)(_reactNative.View, {
    style: listContainerStyle,
    children: [(0, _jsxRuntime.jsx)(_infiniteList.default, {
      ref: list,
      data: items,
      renderItem: renderItem,
      reloadPages: reloadPages,
      onReachNearEdgeThreshold: Math.round(NUMBER_OF_PAGES * 0.4),
      extendedState: calendarProps == null ? void 0 : calendarProps.markedDates,
      isHorizontal: horizontal,
      style: style.current.container,
      initialPageIndex: scrollRange,
      positionIndex: positionIndex,
      pageHeight: CALENDAR_HEIGHT,
      pageWidth: _constants.default.screenWidth,
      onPageChange: onPageChange,
      scrollViewProps: scrollProps
    }, "calendar-list"), renderStaticHeader()]
  });
};
var _default = CalendarList;
exports.default = _default;
function getDate(date, index) {
  var d = new _xdate.default(date);
  d.addMonths(index, true);
  d.setDate(1);
  return (0, _interface.toMarkingFormat)(d);
}
function getDatesArray(date) {
  var numberOfPages = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : NUMBER_OF_PAGES;
  var d = date || new _xdate.default().toString();
  var array = [];
  for (var index = -numberOfPages; index <= numberOfPages; index++) {
    var newDate = getDate(d, index);
    array.push(newDate);
  }
  return array;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfeGRhdGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX3JlYWN0TmF0aXZlIiwiX2NvbnN0YW50cyIsIl9pbnRlcmZhY2UiLCJfY29tcG9uZW50VXBkYXRlciIsIl9jYWxlbmRhciIsIl9oZWFkZXIiLCJfaW5maW5pdGVMaXN0IiwiX3N0eWxlIiwiX2pzeFJ1bnRpbWUiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJub2RlSW50ZXJvcCIsIldlYWtNYXAiLCJjYWNoZUJhYmVsSW50ZXJvcCIsImNhY2hlTm9kZUludGVyb3AiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNhY2hlIiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0Iiwib3duS2V5cyIsImUiLCJyIiwidCIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiTlVNQkVSX09GX1BBR0VTIiwiQ0FMRU5EQVJfSEVJR0hUIiwiQ2FsZW5kYXJMaXN0IiwicHJvcHMiLCJpbml0aWFsRGF0ZSIsImhvcml6b250YWwiLCJfcHJvcHMkc2Nyb2xsUmFuZ2UiLCJzY3JvbGxSYW5nZSIsInN0YXRpY0hlYWRlciIsInNjcm9sbFZpZXdQcm9wcyIsImNhbGVuZGFyUHJvcHMiLCJ0ZXN0SUQiLCJzdHlsZSIsInVzZVJlZiIsInN0eWxlQ29uc3RydWN0b3IiLCJ0aGVtZSIsImxpc3QiLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsImdldERhdGVzQXJyYXkiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiaXRlbXMiLCJzZXRJdGVtcyIsIl91c2VTdGF0ZTMiLCJfdXNlU3RhdGU0IiwicG9zaXRpb25JbmRleCIsInNldFBvc2l0aW9uSW5kZXgiLCJfdXNlU3RhdGU1IiwiX3VzZVN0YXRlNiIsImN1cnJlbnRNb250aCIsInNldEN1cnJlbnRNb250aCIsInNob3VsZFJlbmRlclN0YXRpY0hlYWRlciIsImhlYWRlclByb3BzIiwiZXh0cmFjdEhlYWRlclByb3BzIiwic3RhdGljSGVhZGVyU3R5bGUiLCJ1c2VNZW1vIiwiY3VycmVudCIsImhlYWRlclN0eWxlIiwidXNlRWZmZWN0Iiwic2Nyb2xsVG9Nb250aCIsImdldE1vbnRoSW5kZXgiLCJ1c2VDYWxsYmFjayIsIm1vbnRoIiwiZmluZEluZGV4IiwiaXRlbSIsImluY2x1ZGVzIiwidG9TdHJpbmciLCJpbmRleCIsIlhEYXRlIiwiX2xpc3QkY3VycmVudCIsInNob3VsZEFuaW1hdGUiLCJjb25zdGFudHMiLCJpc0FuZHJvaWQiLCJzY3JvbGxUb09mZnNldCIsInNjcmVlbldpZHRoIiwidXBkYXRlTW9udGgiLCJjb3VudCIsIm5leHQiLCJhZGRNb250aHMiLCJuZXh0TmV4dCIsIm5leHROZXh0SW5kZXgiLCJ0b01hcmtpbmdGb3JtYXQiLCJzY3JvbGxUb05leHRNb250aCIsIm1ldGhvZCIsIm9uUHJlc3NBcnJvd0xlZnQiLCJzY3JvbGxUb1ByZXZpb3VzTW9udGgiLCJvblByZXNzQXJyb3dSaWdodCIsIm9uUGFnZUNoYW5nZSIsInBhZ2VJbmRleCIsIl8iLCJpbmZvIiwic2Nyb2xsZWRCeVVzZXIiLCJyZW5kZXJTdGF0aWNIZWFkZXIiLCJqc3giLCJhY2Nlc3NpYmlsaXR5RWxlbWVudHNIaWRkZW4iLCJpbXBvcnRhbnRGb3JBY2Nlc3NpYmlsaXR5IiwicmVsb2FkUGFnZXMiLCJyZXBsYWNlSXRlbXMiLCJhZGRJdGVtcyIsIm5ld0l0ZW1zIiwiYXJyYXkiLCJfdG9Db25zdW1hYmxlQXJyYXkyIiwic3RhcnRpbmdEYXRlIiwic2hvdWxkQXBwZW5kIiwiaSIsIm5ld0RhdGUiLCJnZXREYXRlIiwidW5zaGlmdCIsImxpc3RDb250YWluZXJTdHlsZSIsImZsYXRMaXN0Q29udGFpbmVyIiwiZmxleCIsInVuZGVmaW5lZCIsInNjcm9sbFByb3BzIiwic2hvd3NIb3Jpem9udGFsU2Nyb2xsSW5kaWNhdG9yIiwic2hvd3NWZXJ0aWNhbFNjcm9sbEluZGljYXRvciIsInJlbmRlckl0ZW0iLCJfdHlwZSIsImRpc2FibGVNb250aENoYW5nZSIsImhpZGVBcnJvd3MiLCJoaWRlRXh0cmFEYXlzIiwiY2FsZW5kYXIiLCJqc3hzIiwiVmlldyIsImNoaWxkcmVuIiwicmVmIiwiZGF0YSIsIm9uUmVhY2hOZWFyRWRnZVRocmVzaG9sZCIsIk1hdGgiLCJyb3VuZCIsImV4dGVuZGVkU3RhdGUiLCJtYXJrZWREYXRlcyIsImlzSG9yaXpvbnRhbCIsImNvbnRhaW5lciIsImluaXRpYWxQYWdlSW5kZXgiLCJwYWdlSGVpZ2h0IiwicGFnZVdpZHRoIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGF0ZSIsImQiLCJzZXREYXRlIiwibnVtYmVyT2ZQYWdlcyJdLCJzb3VyY2VzIjpbIm5ldy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgWERhdGUgZnJvbSAneGRhdGUnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi4vY29tbW9ucy9jb25zdGFudHMnO1xuaW1wb3J0IHsgdG9NYXJraW5nRm9ybWF0IH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IGV4dHJhY3RIZWFkZXJQcm9wcyB9IGZyb20gJy4uL2NvbXBvbmVudFVwZGF0ZXInO1xuaW1wb3J0IENhbGVuZGFyIGZyb20gJy4uL2NhbGVuZGFyJztcbmltcG9ydCBDYWxlbmRhckhlYWRlciBmcm9tICcuLi9jYWxlbmRhci9oZWFkZXInO1xuaW1wb3J0IEluZmluaXRlTGlzdCBmcm9tICcuLi9pbmZpbml0ZS1saXN0JztcbmltcG9ydCBzdHlsZUNvbnN0cnVjdG9yIGZyb20gJy4vc3R5bGUnO1xuY29uc3QgTlVNQkVSX09GX1BBR0VTID0gNTA7XG5jb25zdCBDQUxFTkRBUl9IRUlHSFQgPSAzNjA7XG5jb25zdCBDYWxlbmRhckxpc3QgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGluaXRpYWxEYXRlLCBob3Jpem9udGFsLCBzY3JvbGxSYW5nZSA9IE5VTUJFUl9PRl9QQUdFUywgc3RhdGljSGVhZGVyLCBzY3JvbGxWaWV3UHJvcHMsIGNhbGVuZGFyUHJvcHMsIHRlc3RJRCB9ID0gcHJvcHM7XG4gICAgY29uc3Qgc3R5bGUgPSB1c2VSZWYoc3R5bGVDb25zdHJ1Y3RvcihjYWxlbmRhclByb3BzPy50aGVtZSkpO1xuICAgIGNvbnN0IGxpc3QgPSB1c2VSZWYoKTtcbiAgICBjb25zdCBbaXRlbXMsIHNldEl0ZW1zXSA9IHVzZVN0YXRlKGdldERhdGVzQXJyYXkoaW5pdGlhbERhdGUsIHNjcm9sbFJhbmdlKSk7XG4gICAgY29uc3QgW3Bvc2l0aW9uSW5kZXgsIHNldFBvc2l0aW9uSW5kZXhdID0gdXNlU3RhdGUoc2Nyb2xsUmFuZ2UpO1xuICAgIC8qKiBTdGF0aWMgSGVhZGVyICovXG4gICAgY29uc3QgW2N1cnJlbnRNb250aCwgc2V0Q3VycmVudE1vbnRoXSA9IHVzZVN0YXRlKGluaXRpYWxEYXRlIHx8IGl0ZW1zW3Njcm9sbFJhbmdlXSk7XG4gICAgY29uc3Qgc2hvdWxkUmVuZGVyU3RhdGljSGVhZGVyID0gc3RhdGljSGVhZGVyICYmIGhvcml6b250YWw7XG4gICAgY29uc3QgaGVhZGVyUHJvcHMgPSBleHRyYWN0SGVhZGVyUHJvcHMocHJvcHMpO1xuICAgIGNvbnN0IHN0YXRpY0hlYWRlclN0eWxlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIHJldHVybiBbc3R5bGUuY3VycmVudC5zdGF0aWNIZWFkZXIsIGNhbGVuZGFyUHJvcHM/LmhlYWRlclN0eWxlXTtcbiAgICB9LCBbY2FsZW5kYXJQcm9wcz8uaGVhZGVyU3R5bGVdKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzY3JvbGxUb01vbnRoKGN1cnJlbnRNb250aCk7XG4gICAgfSwgW2N1cnJlbnRNb250aF0pO1xuICAgIGNvbnN0IGdldE1vbnRoSW5kZXggPSB1c2VDYWxsYmFjaygobW9udGgpID0+IHtcbiAgICAgICAgaWYgKCFtb250aCkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmluY2x1ZGVzKG1vbnRoLnRvU3RyaW5nKCd5eXl5LU1NJykpKTtcbiAgICB9LCBbaXRlbXNdKTtcbiAgICBjb25zdCBzY3JvbGxUb01vbnRoID0gdXNlQ2FsbGJhY2soKG1vbnRoKSA9PiB7XG4gICAgICAgIGlmIChtb250aCkge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBnZXRNb250aEluZGV4KG5ldyBYRGF0ZShtb250aCkpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZEFuaW1hdGUgPSBjb25zdGFudHMuaXNBbmRyb2lkICYmICFob3Jpem9udGFsID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICBsaXN0LmN1cnJlbnQ/LnNjcm9sbFRvT2Zmc2V0Py4oaW5kZXggKiBjb25zdGFudHMuc2NyZWVuV2lkdGgsIDAsIHNob3VsZEFuaW1hdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgW2dldE1vbnRoSW5kZXhdKTtcbiAgICBjb25zdCB1cGRhdGVNb250aCA9IHVzZUNhbGxiYWNrKChjb3VudCwgbW9udGgpID0+IHtcbiAgICAgICAgaWYgKG1vbnRoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3IFhEYXRlKG1vbnRoKS5hZGRNb250aHMoY291bnQsIHRydWUpO1xuICAgICAgICAgICAgY29uc3QgbmV4dE5leHQgPSBuZXcgWERhdGUobW9udGgpLmFkZE1vbnRocyhjb3VudCAqIDIsIHRydWUpO1xuICAgICAgICAgICAgY29uc3QgbmV4dE5leHRJbmRleCA9IGdldE1vbnRoSW5kZXgobmV4dE5leHQpO1xuICAgICAgICAgICAgaWYgKG5leHROZXh0SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc2V0Q3VycmVudE1vbnRoKHRvTWFya2luZ0Zvcm1hdChuZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCBbZ2V0TW9udGhJbmRleF0pO1xuICAgIGNvbnN0IHNjcm9sbFRvTmV4dE1vbnRoID0gdXNlQ2FsbGJhY2soKG1ldGhvZCwgbW9udGgpID0+IHtcbiAgICAgICAgaWYgKGNhbGVuZGFyUHJvcHM/Lm9uUHJlc3NBcnJvd0xlZnQpIHtcbiAgICAgICAgICAgIGNhbGVuZGFyUHJvcHM/Lm9uUHJlc3NBcnJvd0xlZnQ/LihtZXRob2QsIG1vbnRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZU1vbnRoKDEsIG1vbnRoKTtcbiAgICAgICAgfVxuICAgIH0sIFt1cGRhdGVNb250aF0pO1xuICAgIGNvbnN0IHNjcm9sbFRvUHJldmlvdXNNb250aCA9IHVzZUNhbGxiYWNrKChtZXRob2QsIG1vbnRoKSA9PiB7XG4gICAgICAgIGlmIChjYWxlbmRhclByb3BzPy5vblByZXNzQXJyb3dSaWdodCkge1xuICAgICAgICAgICAgY2FsZW5kYXJQcm9wcz8ub25QcmVzc0Fycm93UmlnaHQ/LihtZXRob2QsIG1vbnRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZU1vbnRoKC0xLCBtb250aCk7XG4gICAgICAgIH1cbiAgICB9LCBbdXBkYXRlTW9udGhdKTtcbiAgICBjb25zdCBvblBhZ2VDaGFuZ2UgPSB1c2VDYWxsYmFjaygocGFnZUluZGV4LCBfLCBpbmZvKSA9PiB7XG4gICAgICAgIGlmIChzaG91bGRSZW5kZXJTdGF0aWNIZWFkZXIgJiYgaW5mby5zY3JvbGxlZEJ5VXNlcikge1xuICAgICAgICAgICAgc2V0Q3VycmVudE1vbnRoKGl0ZW1zW3BhZ2VJbmRleF0pO1xuICAgICAgICB9XG4gICAgfSwgW2l0ZW1zXSk7XG4gICAgY29uc3QgcmVuZGVyU3RhdGljSGVhZGVyID0gKCkgPT4ge1xuICAgICAgICBpZiAoc2hvdWxkUmVuZGVyU3RhdGljSGVhZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gKDxDYWxlbmRhckhlYWRlciB7Li4uaGVhZGVyUHJvcHN9IG1vbnRoPXtuZXcgWERhdGUoY3VycmVudE1vbnRoKX0gb25QcmVzc0Fycm93UmlnaHQ9e3Njcm9sbFRvTmV4dE1vbnRofSBvblByZXNzQXJyb3dMZWZ0PXtzY3JvbGxUb1ByZXZpb3VzTW9udGh9IHN0eWxlPXtzdGF0aWNIZWFkZXJTdHlsZX0gYWNjZXNzaWJpbGl0eUVsZW1lbnRzSGlkZGVuIC8vIGlPU1xuICAgICAgICAgICAgIGltcG9ydGFudEZvckFjY2Vzc2liaWxpdHk9eyduby1oaWRlLWRlc2NlbmRhbnRzJ30gLy8gQW5kcm9pZFxuICAgICAgICAgICAgIHRlc3RJRD17J3N0YXRpYy1oZWFkZXInfS8+KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqIERhdGEgKi9cbiAgICBjb25zdCByZWxvYWRQYWdlcyA9IHVzZUNhbGxiYWNrKHBhZ2VJbmRleCA9PiB7XG4gICAgICAgIGhvcml6b250YWwgPyByZXBsYWNlSXRlbXMocGFnZUluZGV4KSA6IGFkZEl0ZW1zKHBhZ2VJbmRleCk7XG4gICAgfSwgW2l0ZW1zXSk7XG4gICAgY29uc3QgcmVwbGFjZUl0ZW1zID0gKGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0l0ZW1zID0gZ2V0RGF0ZXNBcnJheShpdGVtc1tpbmRleF0sIHNjcm9sbFJhbmdlKTtcbiAgICAgICAgc2V0SXRlbXMobmV3SXRlbXMpO1xuICAgIH07XG4gICAgY29uc3QgYWRkSXRlbXMgPSAoaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgYXJyYXkgPSBbLi4uaXRlbXNdO1xuICAgICAgICBjb25zdCBzdGFydGluZ0RhdGUgPSBpdGVtc1tpbmRleF07XG4gICAgICAgIGNvbnN0IHNob3VsZEFwcGVuZCA9IGluZGV4ID4gc2Nyb2xsUmFuZ2U7XG4gICAgICAgIGlmIChzdGFydGluZ0RhdGUpIHtcbiAgICAgICAgICAgIGlmIChzaG91bGRBcHBlbmQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMjsgaSA8PSBzY3JvbGxSYW5nZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0RhdGUgPSBnZXREYXRlKHN0YXJ0aW5nRGF0ZSwgaSk7XG4gICAgICAgICAgICAgICAgICAgIGFycmF5LnB1c2gobmV3RGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IC0xOyBpID4gLXNjcm9sbFJhbmdlOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RGF0ZSA9IGdldERhdGUoc3RhcnRpbmdEYXRlLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXkudW5zaGlmdChuZXdEYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRQb3NpdGlvbkluZGV4KHNob3VsZEFwcGVuZCA/IGluZGV4IDogc2Nyb2xsUmFuZ2UgLSAxKTtcbiAgICAgICAgICAgIHNldEl0ZW1zKGFycmF5KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqIExpc3QgKi9cbiAgICBjb25zdCBsaXN0Q29udGFpbmVyU3R5bGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIFtzdHlsZS5jdXJyZW50LmZsYXRMaXN0Q29udGFpbmVyLCB7IGZsZXg6IGhvcml6b250YWwgPyB1bmRlZmluZWQgOiAxIH1dO1xuICAgIH0sIFtzdHlsZSwgaG9yaXpvbnRhbF0pO1xuICAgIGNvbnN0IHNjcm9sbFByb3BzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY3JvbGxWaWV3UHJvcHMsXG4gICAgICAgICAgICBzaG93c0hvcml6b250YWxTY3JvbGxJbmRpY2F0b3I6IGZhbHNlLFxuICAgICAgICAgICAgc2hvd3NWZXJ0aWNhbFNjcm9sbEluZGljYXRvcjogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9LCBbc2Nyb2xsVmlld1Byb3BzXSk7XG4gICAgY29uc3QgcmVuZGVySXRlbSA9IHVzZUNhbGxiYWNrKChfdHlwZSwgaXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gKDxDYWxlbmRhciB7Li4uY2FsZW5kYXJQcm9wc30gey4uLmhlYWRlclByb3BzfSBpbml0aWFsRGF0ZT17aXRlbX0gZGlzYWJsZU1vbnRoQ2hhbmdlIGhpZGVBcnJvd3M9eyFob3Jpem9udGFsfSBvblByZXNzQXJyb3dSaWdodD17c2Nyb2xsVG9OZXh0TW9udGh9IG9uUHJlc3NBcnJvd0xlZnQ9e3Njcm9sbFRvUHJldmlvdXNNb250aH0gaGlkZUV4dHJhRGF5cz17Y2FsZW5kYXJQcm9wcz8uaGlkZUV4dHJhRGF5cyB8fCB0cnVlfSBzdHlsZT17W3N0eWxlLmN1cnJlbnQuY2FsZW5kYXIsIGNhbGVuZGFyUHJvcHM/LnN0eWxlXX0gaGVhZGVyU3R5bGU9e2hvcml6b250YWwgPyBjYWxlbmRhclByb3BzPy5oZWFkZXJTdHlsZSA6IHVuZGVmaW5lZH0gdGVzdElEPXtgJHt0ZXN0SUR9XyR7aXRlbX1gfS8+KTtcbiAgICB9LCBbY2FsZW5kYXJQcm9wcywgc2Nyb2xsVG9OZXh0TW9udGgsIHNjcm9sbFRvUHJldmlvdXNNb250aF0pO1xuICAgIHJldHVybiAoPFZpZXcgc3R5bGU9e2xpc3RDb250YWluZXJTdHlsZX0+XG4gICAgICA8SW5maW5pdGVMaXN0IGtleT1cImNhbGVuZGFyLWxpc3RcIiByZWY9e2xpc3R9IGRhdGE9e2l0ZW1zfSByZW5kZXJJdGVtPXtyZW5kZXJJdGVtfSByZWxvYWRQYWdlcz17cmVsb2FkUGFnZXN9IG9uUmVhY2hOZWFyRWRnZVRocmVzaG9sZD17TWF0aC5yb3VuZChOVU1CRVJfT0ZfUEFHRVMgKiAwLjQpfSBleHRlbmRlZFN0YXRlPXtjYWxlbmRhclByb3BzPy5tYXJrZWREYXRlc30gaXNIb3Jpem9udGFsPXtob3Jpem9udGFsfSBzdHlsZT17c3R5bGUuY3VycmVudC5jb250YWluZXJ9IGluaXRpYWxQYWdlSW5kZXg9e3Njcm9sbFJhbmdlfSBwb3NpdGlvbkluZGV4PXtwb3NpdGlvbkluZGV4fSBwYWdlSGVpZ2h0PXtDQUxFTkRBUl9IRUlHSFR9IHBhZ2VXaWR0aD17Y29uc3RhbnRzLnNjcmVlbldpZHRofSBvblBhZ2VDaGFuZ2U9e29uUGFnZUNoYW5nZX0gc2Nyb2xsVmlld1Byb3BzPXtzY3JvbGxQcm9wc30vPlxuICAgICAge3JlbmRlclN0YXRpY0hlYWRlcigpfVxuICAgIDwvVmlldz4pO1xufTtcbmV4cG9ydCBkZWZhdWx0IENhbGVuZGFyTGlzdDtcbmZ1bmN0aW9uIGdldERhdGUoZGF0ZSwgaW5kZXgpIHtcbiAgICBjb25zdCBkID0gbmV3IFhEYXRlKGRhdGUpO1xuICAgIGQuYWRkTW9udGhzKGluZGV4LCB0cnVlKTtcbiAgICAvLyBpZiAoaW5kZXggIT09IDApIHtcbiAgICBkLnNldERhdGUoMSk7XG4gICAgLy8gfVxuICAgIHJldHVybiB0b01hcmtpbmdGb3JtYXQoZCk7XG59XG5mdW5jdGlvbiBnZXREYXRlc0FycmF5KGRhdGUsIG51bWJlck9mUGFnZXMgPSBOVU1CRVJfT0ZfUEFHRVMpIHtcbiAgICBjb25zdCBkID0gZGF0ZSB8fCBuZXcgWERhdGUoKS50b1N0cmluZygpO1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgZm9yIChsZXQgaW5kZXggPSAtbnVtYmVyT2ZQYWdlczsgaW5kZXggPD0gbnVtYmVyT2ZQYWdlczsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCBuZXdEYXRlID0gZ2V0RGF0ZShkLCBpbmRleCk7XG4gICAgICAgIGFycmF5LnB1c2gobmV3RGF0ZSk7XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFDLHVCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxZQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxVQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxVQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxpQkFBQSxHQUFBTixPQUFBO0FBQ0EsSUFBQU8sU0FBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVEsT0FBQSxHQUFBVCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVMsYUFBQSxHQUFBVixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVUsTUFBQSxHQUFBWCxzQkFBQSxDQUFBQyxPQUFBO0FBQXVDLElBQUFXLFdBQUEsR0FBQVgsT0FBQTtBQUFBLFNBQUFZLHlCQUFBQyxXQUFBLGVBQUFDLE9BQUEsa0NBQUFDLGlCQUFBLE9BQUFELE9BQUEsUUFBQUUsZ0JBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSx5QkFBQUMsV0FBQSxXQUFBQSxXQUFBLEdBQUFHLGdCQUFBLEdBQUFELGlCQUFBLEtBQUFGLFdBQUE7QUFBQSxTQUFBWCx3QkFBQWUsR0FBQSxFQUFBSixXQUFBLFNBQUFBLFdBQUEsSUFBQUksR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVB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