{"version":3,"names":["_range","_interopRequireDefault","require","_times","_react","_interopRequireWildcard","_reactNative","_constants","_presenter","_Packer","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","dimensionWidth","constants","screenWidth","EVENT_DIFF","TimelineHours","props","format24h","_props$start","start","_props$end","end","date","unavailableHours","unavailableHoursColor","styles","onBackgroundLongPress","onBackgroundLongPressOut","width","_props$numberOfDays","numberOfDays","_props$timelineLeftIn","timelineLeftInset","lastLongPressEventTime","useRef","offset","HOUR_BLOCK_HEIGHT","unavailableHoursBlocks","buildUnavailableHoursBlocks","dayStart","dayEnd","hours","useMemo","range","map","i","timeText","time","handleBackgroundPress","useCallback","event","yPosition","nativeEvent","locationY","xPosition","locationX","_calcTimeByPosition","calcTimeByPosition","hour","minutes","dateByPosition","calcDateByPosition","current","timeString","buildTimeString","handlePressOut","_lastLongPressEventTi","undefined","jsxs","Fragment","children","jsx","TouchableWithoutFeedback","onLongPress","onPressOut","View","style","StyleSheet","absoluteFillObject","block","index","unavailableHoursBlock","backgroundColor","left","_ref","Text","timeLabel","top","line","times","verticalLine","right","_default","React","memo","exports"],"sources":["TimelineHours.js"],"sourcesContent":["import range from 'lodash/range';\nimport times from 'lodash/times';\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { View, Text, TouchableWithoutFeedback, StyleSheet } from 'react-native';\nimport constants from '../commons/constants';\nimport { buildTimeString, calcTimeByPosition, calcDateByPosition } from './helpers/presenter';\nimport { buildUnavailableHoursBlocks, HOUR_BLOCK_HEIGHT } from './Packer';\nconst dimensionWidth = constants.screenWidth;\nconst EVENT_DIFF = 20;\nconst TimelineHours = (props) => {\n    const { format24h, start = 0, end = 24, date, unavailableHours, unavailableHoursColor, styles, onBackgroundLongPress, onBackgroundLongPressOut, width, numberOfDays = 1, timelineLeftInset = 0 } = props;\n    const lastLongPressEventTime = useRef();\n    // const offset = this.calendarHeight / (end - start);\n    const offset = HOUR_BLOCK_HEIGHT;\n    const unavailableHoursBlocks = buildUnavailableHoursBlocks(unavailableHours, { dayStart: start, dayEnd: end });\n    const hours = useMemo(() => {\n        return range(start, end + 1).map(i => {\n            let timeText;\n            if (i === start) {\n                timeText = '';\n            }\n            else if (i < 12) {\n                timeText = !format24h ? `${i} AM` : `${i}:00`;\n            }\n            else if (i === 12) {\n                timeText = !format24h ? `${i} PM` : `${i}:00`;\n            }\n            else if (i === 24) {\n                timeText = !format24h ? '12 AM' : '23:59';\n            }\n            else {\n                timeText = !format24h ? `${i - 12} PM` : `${i}:00`;\n            }\n            return { timeText, time: i };\n        });\n    }, [start, end, format24h]);\n    const handleBackgroundPress = useCallback(event => {\n        const yPosition = event.nativeEvent.locationY;\n        const xPosition = event.nativeEvent.locationX;\n        const { hour, minutes } = calcTimeByPosition(yPosition, HOUR_BLOCK_HEIGHT);\n        const dateByPosition = calcDateByPosition(xPosition, timelineLeftInset, numberOfDays, date);\n        lastLongPressEventTime.current = { hour, minutes, date: dateByPosition };\n        const timeString = buildTimeString(hour, minutes, dateByPosition);\n        onBackgroundLongPress?.(timeString, lastLongPressEventTime.current);\n    }, [onBackgroundLongPress, date]);\n    const handlePressOut = useCallback(() => {\n        if (lastLongPressEventTime.current) {\n            const { hour, minutes, date } = lastLongPressEventTime.current;\n            const timeString = buildTimeString(hour, minutes, date);\n            onBackgroundLongPressOut?.(timeString, lastLongPressEventTime.current);\n            lastLongPressEventTime.current = undefined;\n        }\n    }, [onBackgroundLongPressOut, date]);\n    return (<>\n      <TouchableWithoutFeedback onLongPress={handleBackgroundPress} onPressOut={handlePressOut}>\n        <View style={StyleSheet.absoluteFillObject}/>\n      </TouchableWithoutFeedback>\n      {unavailableHoursBlocks.map((block, index) => (<View key={index} style={[\n                styles.unavailableHoursBlock,\n                block,\n                unavailableHoursColor ? { backgroundColor: unavailableHoursColor } : undefined,\n                { left: timelineLeftInset }\n            ]}></View>))}\n\n      {hours.map(({ timeText, time }, index) => {\n            return (<React.Fragment key={time}>\n            <Text key={`timeLabel${time}`} style={[styles.timeLabel, { top: offset * index - 6, width: timelineLeftInset - 16 }]}>\n              {timeText}\n            </Text>\n            {time === start ? null : (<View key={`line${time}`} style={[styles.line, { top: offset * index, width: dimensionWidth - EVENT_DIFF, left: timelineLeftInset - 16 }]}/>)}\n            {<View key={`lineHalf${time}`} style={[styles.line, { top: offset * (index + 0.5), width: dimensionWidth - EVENT_DIFF, left: timelineLeftInset - 16 }]}/>}\n          </React.Fragment>);\n        })}\n      {times(numberOfDays, (index) => <View key={index} style={[styles.verticalLine, { right: (index + 1) * width / numberOfDays }]}/>)}\n    </>);\n};\nexport default React.memo(TimelineHours);\n"],"mappings":";;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,MAAA,GAAAC,uBAAA,CAAAH,OAAA;AACA,IAAAI,YAAA,GAAAJ,OAAA;AACA,IAAAK,UAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,UAAA,GAAAN,OAAA;AACA,IAAAO,OAAA,GAAAP,OAAA;AAA0E,IAAAQ,WAAA,GAAAR,OAAA;AAAA,SAAAS,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAP,wBAAAW,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,CAAAJ,OAAA,GAAAF,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAC1E,IAAMW,cAAc,GAAGC,kBAAS,CAACC,WAAW;AAC5C,IAAMC,UAAU,GAAG,EAAE;AACrB,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,KAAK,EAAK;EAC7B,IAAQC,SAAS,GAAkLD,KAAK,CAAhMC,SAAS;IAAAC,YAAA,GAAkLF,KAAK,CAArLG,KAAK;IAALA,KAAK,GAAAD,YAAA,cAAG,CAAC,GAAAA,YAAA;IAAAE,UAAA,GAAuKJ,KAAK,CAA1KK,GAAG;IAAHA,GAAG,GAAAD,UAAA,cAAG,EAAE,GAAAA,UAAA;IAAEE,IAAI,GAAuJN,KAAK,CAAhKM,IAAI;IAAEC,gBAAgB,GAAqIP,KAAK,CAA1JO,gBAAgB;IAAEC,qBAAqB,GAA8GR,KAAK,CAAxIQ,qBAAqB;IAAEC,MAAM,GAAsGT,KAAK,CAAjHS,MAAM;IAAEC,qBAAqB,GAA+EV,KAAK,CAAzGU,qBAAqB;IAAEC,wBAAwB,GAAqDX,KAAK,CAAlFW,wBAAwB;IAAEC,KAAK,GAA8CZ,KAAK,CAAxDY,KAAK;IAAAC,mBAAA,GAA8Cb,KAAK,CAAjDc,YAAY;IAAZA,YAAY,GAAAD,mBAAA,cAAG,CAAC,GAAAA,mBAAA;IAAAE,qBAAA,GAA4Bf,KAAK,CAA/BgB,iBAAiB;IAAjBA,iBAAiB,GAAAD,qBAAA,cAAG,CAAC,GAAAA,qBAAA;EAC9L,IAAME,sBAAsB,GAAG,IAAAC,aAAM,EAAC,CAAC;EAEvC,IAAMC,MAAM,GAAGC,yBAAiB;EAChC,IAAMC,sBAAsB,GAAG,IAAAC,mCAA2B,EAACf,gBAAgB,EAAE;IAAEgB,QAAQ,EAAEpB,KAAK;IAAEqB,MAAM,EAAEnB;EAAI,CAAC,CAAC;EAC9G,IAAMoB,KAAK,GAAG,IAAAC,cAAO,EAAC,YAAM;IACxB,OAAO,IAAAC,cAAK,EAACxB,KAAK,EAAEE,GAAG,GAAG,CAAC,CAAC,CAACuB,GAAG,CAAC,UAAAC,CAAC,EAAI;MAClC,IAAIC,QAAQ;MACZ,IAAID,CAAC,KAAK1B,KAAK,EAAE;QACb2B,QAAQ,GAAG,EAAE;MACjB,CAAC,MACI,IAAID,CAAC,GAAG,EAAE,EAAE;QACbC,QAAQ,GAAG,CAAC7B,SAAS,GAAI,GAAE4B,CAAE,KAAI,GAAI,GAAEA,CAAE,KAAI;MACjD,CAAC,MACI,IAAIA,CAAC,KAAK,EAAE,EAAE;QACfC,QAAQ,GAAG,CAAC7B,SAAS,GAAI,GAAE4B,CAAE,KAAI,GAAI,GAAEA,CAAE,KAAI;MACjD,CAAC,MACI,IAAIA,CAAC,KAAK,EAAE,EAAE;QACfC,QAAQ,GAAG,CAAC7B,SAAS,GAAG,OAAO,GAAG,OAAO;MAC7C,CAAC,MACI;QACD6B,QAAQ,GAAG,CAAC7B,SAAS,GAAI,GAAE4B,CAAC,GAAG,EAAG,KAAI,GAAI,GAAEA,CAAE,KAAI;MACtD;MACA,OAAO;QAAEC,QAAQ,EAARA,QAAQ;QAAEC,IAAI,EAAEF;MAAE,CAAC;IAChC,CAAC,CAAC;EACN,CAAC,EAAE,CAAC1B,KAAK,EAAEE,GAAG,EAAEJ,SAAS,CAAC,CAAC;EAC3B,IAAM+B,qBAAqB,GAAG,IAAAC,kBAAW,EAAC,UAAAC,KAAK,EAAI;IAC/C,IAAMC,SAAS,GAAGD,KAAK,CAACE,WAAW,CAACC,SAAS;IAC7C,IAAMC,SAAS,GAAGJ,KAAK,CAACE,WAAW,CAACG,SAAS;IAC7C,IAAAC,mBAAA,GAA0B,IAAAC,6BAAkB,EAACN,SAAS,EAAEf,yBAAiB,CAAC;MAAlEsB,IAAI,GAAAF,mBAAA,CAAJE,IAAI;MAAEC,OAAO,GAAAH,mBAAA,CAAPG,OAAO;IACrB,IAAMC,cAAc,GAAG,IAAAC,6BAAkB,EAACP,SAAS,EAAEtB,iBAAiB,EAAEF,YAAY,EAAER,IAAI,CAAC;IAC3FW,sBAAsB,CAAC6B,OAAO,GAAG;MAAEJ,IAAI,EAAJA,IAAI;MAAEC,OAAO,EAAPA,OAAO;MAAErC,IAAI,EAAEsC;IAAe,CAAC;IACxE,IAAMG,UAAU,GAAG,IAAAC,0BAAe,EAACN,IAAI,EAAEC,OAAO,EAAEC,cAAc,CAAC;IACjElC,qBAAqB,oBAArBA,qBAAqB,CAAGqC,UAAU,EAAE9B,sBAAsB,CAAC6B,OAAO,CAAC;EACvE,CAAC,EAAE,CAACpC,qBAAqB,EAAEJ,IAAI,CAAC,CAAC;EACjC,IAAM2C,cAAc,GAAG,IAAAhB,kBAAW,EAAC,YAAM;IACrC,IAAIhB,sBAAsB,CAAC6B,OAAO,EAAE;MAChC,IAAAI,qBAAA,GAAgCjC,sBAAsB,CAAC6B,OAAO;QAAtDJ,IAAI,GAAAQ,qBAAA,CAAJR,IAAI;QAAEC,OAAO,GAAAO,qBAAA,CAAPP,OAAO;QAAErC,KAAI,GAAA4C,qBAAA,CAAJ5C,IAAI;MAC3B,IAAMyC,UAAU,GAAG,IAAAC,0BAAe,EAACN,IAAI,EAAEC,OAAO,EAAErC,KAAI,CAAC;MACvDK,wBAAwB,oBAAxBA,wBAAwB,CAAGoC,UAAU,EAAE9B,sBAAsB,CAAC6B,OAAO,CAAC;MACtE7B,sBAAsB,CAAC6B,OAAO,GAAGK,SAAS;IAC9C;EACJ,CAAC,EAAE,CAACxC,wBAAwB,EAAEL,IAAI,CAAC,CAAC;EACpC,OAAQ,IAAAlC,WAAA,CAAAgF,IAAA,EAAAhF,WAAA,CAAAiF,QAAA;IAAAC,QAAA,GACN,IAAAlF,WAAA,CAAAmF,GAAA,EAACvF,YAAA,CAAAwF,wBAAwB;MAACC,WAAW,EAAEzB,qBAAsB;MAAC0B,UAAU,EAAET,cAAe;MAAAK,QAAA,EACvF,IAAAlF,WAAA,CAAAmF,GAAA,EAACvF,YAAA,CAAA2F,IAAI;QAACC,KAAK,EAAEC,uBAAU,CAACC;MAAmB,CAAC;IAAC,CACrB,CAAC,EAC1BzC,sBAAsB,CAACO,GAAG,CAAC,UAACmC,KAAK,EAAEC,KAAK;MAAA,OAAM,IAAA5F,WAAA,CAAAmF,GAAA,EAACvF,YAAA,CAAA2F,IAAI;QAAaC,KAAK,EAAE,CAC9DnD,MAAM,CAACwD,qBAAqB,EAC5BF,KAAK,EACLvD,qBAAqB,GAAG;UAAE0D,eAAe,EAAE1D;QAAsB,CAAC,GAAG2C,SAAS,EAC9E;UAAEgB,IAAI,EAAEnD;QAAkB,CAAC;MAC7B,GALkDgD,KAK3C,CAAC;IAAA,CAAC,CAAC,EAEjBvC,KAAK,CAACG,GAAG,CAAC,UAAAwC,IAAA,EAAqBJ,KAAK,EAAK;MAAA,IAA5BlC,QAAQ,GAAAsC,IAAA,CAARtC,QAAQ;QAAEC,IAAI,GAAAqC,IAAA,CAAJrC,IAAI;MACtB,OAAQ,IAAA3D,WAAA,CAAAgF,IAAA,EAACtF,MAAA,CAAAc,OAAK,CAACyE,QAAQ;QAAAC,QAAA,GACvB,IAAAlF,WAAA,CAAAmF,GAAA,EAACvF,YAAA,CAAAqG,IAAI;UAA0BT,KAAK,EAAE,CAACnD,MAAM,CAAC6D,SAAS,EAAE;YAAEC,GAAG,EAAEpD,MAAM,GAAG6C,KAAK,GAAG,CAAC;YAAEpD,KAAK,EAAEI,iBAAiB,GAAG;UAAG,CAAC,CAAE;UAAAsC,QAAA,EAClHxB;QAAQ,GADC,YAAWC,IAAK,EAEtB,CAAC,EACNA,IAAI,KAAK5B,KAAK,GAAG,IAAI,GAAI,IAAA/B,WAAA,CAAAmF,GAAA,EAACvF,YAAA,CAAA2F,IAAI;UAAqBC,KAAK,EAAE,CAACnD,MAAM,CAAC+D,IAAI,EAAE;YAAED,GAAG,EAAEpD,MAAM,GAAG6C,KAAK;YAAEpD,KAAK,EAAEjB,cAAc,GAAGG,UAAU;YAAEqE,IAAI,EAAEnD,iBAAiB,GAAG;UAAG,CAAC;QAAE,GAA9H,OAAMe,IAAK,EAAoH,CAAE,EACtK,IAAA3D,WAAA,CAAAmF,GAAA,EAACvF,YAAA,CAAA2F,IAAI;UAAyBC,KAAK,EAAE,CAACnD,MAAM,CAAC+D,IAAI,EAAE;YAAED,GAAG,EAAEpD,MAAM,IAAI6C,KAAK,GAAG,GAAG,CAAC;YAAEpD,KAAK,EAAEjB,cAAc,GAAGG,UAAU;YAAEqE,IAAI,EAAEnD,iBAAiB,GAAG;UAAG,CAAC;QAAE,GAA1I,WAAUe,IAAK,EAA4H,CAAC;MAAA,GAL5HA,IAMf,CAAC;IACnB,CAAC,CAAC,EACH,IAAA0C,cAAK,EAAC3D,YAAY,EAAE,UAACkD,KAAK;MAAA,OAAK,IAAA5F,WAAA,CAAAmF,GAAA,EAACvF,YAAA,CAAA2F,IAAI;QAAaC,KAAK,EAAE,CAACnD,MAAM,CAACiE,YAAY,EAAE;UAAEC,KAAK,EAAE,CAACX,KAAK,GAAG,CAAC,IAAIpD,KAAK,GAAGE;QAAa,CAAC;MAAE,GAAnFkD,KAAoF,CAAC;IAAA,EAAC;EAAA,CACjI,CAAC;AACP,CAAC;AAAC,IAAAY,QAAA,GACaC,cAAK,CAACC,IAAI,CAAC/E,aAAa,CAAC;AAAAgF,OAAA,CAAAnG,OAAA,GAAAgG,QAAA"}