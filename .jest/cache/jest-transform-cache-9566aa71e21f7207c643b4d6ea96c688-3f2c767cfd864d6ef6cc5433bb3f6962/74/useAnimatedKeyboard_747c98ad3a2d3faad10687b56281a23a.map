{"version":3,"names":["_react","require","_core","_commonTypes","_worklet_9450373085927_init_data","code","location","sourceMap","_worklet_12834194913720_init_data","useAnimatedKeyboard","options","arguments","length","undefined","isStatusBarTranslucentAndroid","ref","useRef","listenerId","isSubscribed","current","keyboardEventData","state","makeMutable","KeyboardState","UNKNOWN","height","subscribeForKeyboardEvents","_e","global","Error","_f","value","_closure","__initData","__workletHash","__stackDetails","__version","useEffect","_keyboardEventData","unsubscribeFromKeyboardEvents"],"sources":["useAnimatedKeyboard.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport {\n  makeMutable,\n  subscribeForKeyboardEvents,\n  unsubscribeFromKeyboardEvents,\n} from '../core';\nimport {\n  AnimatedKeyboardInfo,\n  AnimatedKeyboardOptions,\n  KeyboardState,\n} from '../commonTypes';\n\nexport function useAnimatedKeyboard(\n  options: AnimatedKeyboardOptions = { isStatusBarTranslucentAndroid: false }\n): AnimatedKeyboardInfo {\n  const ref = useRef<AnimatedKeyboardInfo | null>(null);\n  const listenerId = useRef<number>(-1);\n  const isSubscribed = useRef<boolean>(false);\n\n  if (ref.current === null) {\n    const keyboardEventData: AnimatedKeyboardInfo = {\n      state: makeMutable<KeyboardState>(KeyboardState.UNKNOWN),\n      height: makeMutable(0),\n    };\n    listenerId.current = subscribeForKeyboardEvents((state, height) => {\n      'worklet';\n      keyboardEventData.state.value = state;\n      keyboardEventData.height.value = height;\n    }, options);\n    ref.current = keyboardEventData;\n    isSubscribed.current = true;\n  }\n  useEffect(() => {\n    if (isSubscribed.current === false && ref.current !== null) {\n      const keyboardEventData = ref.current;\n      // subscribe again after Fast Refresh\n      listenerId.current = subscribeForKeyboardEvents((state, height) => {\n        'worklet';\n        keyboardEventData.state.value = state;\n        keyboardEventData.height.value = height;\n      }, options);\n      isSubscribed.current = true;\n    }\n    return () => {\n      unsubscribeFromKeyboardEvents(listenerId.current);\n      isSubscribed.current = false;\n    };\n  }, []);\n  return ref.current;\n}\n"],"mappings":";;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAKA,IAAAE,YAAA,GAAAF,OAAA;AAIuB,IAAAG,gCAAA;EAAAC,IAAA;EAAAC,QAAA;EAAAC,SAAA;AAAA;AAAA,IAAAC,iCAAA;EAAAH,IAAA;EAAAC,QAAA;EAAAC,SAAA;AAAA;AAEhB,SAASE,mBAAmBA,CAAA,EAEX;EAAA,IADtBC,OAAgC,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG;IAAEG,6BAA6B,EAAE;EAAM,CAAC;EAE3E,IAAMC,GAAG,GAAG,IAAAC,aAAM,EAA8B,IAAI,CAAC;EACrD,IAAMC,UAAU,GAAG,IAAAD,aAAM,EAAS,CAAC,CAAC,CAAC;EACrC,IAAME,YAAY,GAAG,IAAAF,aAAM,EAAU,KAAK,CAAC;EAE3C,IAAID,GAAG,CAACI,OAAO,KAAK,IAAI,EAAE;IACxB,IAAMC,iBAAuC,GAAG;MAC9CC,KAAK,EAAE,IAAAC,iBAAW,EAAgBC,0BAAa,CAACC,OAAO,CAAC;MACxDC,MAAM,EAAE,IAAAH,iBAAW,EAAC,CAAC;IACvB,CAAC;IACDL,UAAU,CAACE,OAAO,GAAG,IAAAO,gCAA0B;MAAA,IAAAC,EAAA,QAAAC,MAAA,CAAAC,KAAA;MAAA,IAAAC,EAAA,YAAAA,GAAET,KAAK,EAAEI,MAAM,EAAK;QAEjEL,iBAAiB,CAACC,KAAK,CAACU,KAAK,GAAGV,KAAK;QACrCD,iBAAiB,CAACK,MAAM,CAACM,KAAK,GAAGN,MAAM;MACzC,CAAC;MAAAK,EAAA,CAAAE,QAAA;QAAAZ,iBAAA,EAtBLA;MAGE;MAAAU,EAAA,CAAAG,UAAA,GAAA7B,gCAAA;MAAA0B,EAAA,CAAAI,aAAA;MAAAJ,EAAA,CAAAK,cAAA,GAAAR,EAAA;MAAAG,EAAA,CAAAM,SAAA;MAAA,OAAAN,EAAA;IAAA,KAmBKpB,OAAO,CAAC;IACXK,GAAG,CAACI,OAAO,GAAGC,iBAAiB;IAC/BF,YAAY,CAACC,OAAO,GAAG,IAAI;EAC7B;EACA,IAAAkB,gBAAS,EAAC,YAAM;IACd,IAAInB,YAAY,CAACC,OAAO,KAAK,KAAK,IAAIJ,GAAG,CAACI,OAAO,KAAK,IAAI,EAAE;MAC1D,IAAMC,kBAAiB,GAAGL,GAAG,CAACI,OAAO;MAErCF,UAAU,CAACE,OAAO,GAAG,IAAAO,gCAA0B;QAAA,IAAAC,EAAA,QAAAC,MAAA,CAAAC,KAAA;QAAA,IAAAC,EAAA,YAAAA,GAAET,KAAK,EAAEI,MAAM,EAAK;UAEjEL,kBAAiB,CAACC,KAAK,CAACU,KAAK,GAAGV,KAAK;UACrCD,kBAAiB,CAACK,MAAM,CAACM,KAAK,GAAGN,MAAM;QACzC,CAAC;QAAAK,EAAA,CAAAE,QAAA;UAAAM,kBAAA,EAlCPA;QAGE;QAAAR,EAAA,CAAAG,UAAA,GAAAzB,iCAAA;QAAAsB,EAAA,CAAAI,aAAA;QAAAJ,EAAA,CAAAK,cAAA,GAAAR,EAAA;QAAAG,EAAA,CAAAM,SAAA;QAAA,OAAAN,EAAA;MAAA,KA+BOpB,OAAO,CAAC;MACXQ,YAAY,CAACC,OAAO,GAAG,IAAI;IAC7B;IACA,OAAO,YAAM;MACX,IAAAoB,mCAA6B,EAACtB,UAAU,CAACE,OAAO,CAAC;MACjDD,YAAY,CAACC,OAAO,GAAG,KAAK;IAC9B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN,OAAOJ,GAAG,CAACI,OAAO;AACpB"}