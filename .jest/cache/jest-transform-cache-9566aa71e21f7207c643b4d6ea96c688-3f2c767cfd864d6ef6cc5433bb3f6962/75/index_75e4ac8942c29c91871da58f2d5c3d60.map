{"version":3,"names":["_findIndex","_interopRequireDefault","require","_propTypes","_xdate","_react","_interopRequireWildcard","_reactNative","_componentUpdater","_interface","_dateutils","_constants","_hooks","_style","_calendar","_item","_index","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","e","r","t","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","CALENDAR_WIDTH","constants","screenWidth","CALENDAR_HEIGHT","PAST_SCROLL_RANGE","FUTURE_SCROLL_RANGE","CalendarList","props","ref","useImperativeHandle","scrollToDay","date","offset","animated","scrollToMonth","theme","current","firstDay","markedDates","headerStyle","onMonthChange","onVisibleMonthsChange","_props$pastScrollRang","pastScrollRange","_props$futureScrollRa","futureScrollRange","_props$calendarHeight","calendarHeight","_props$calendarWidth","calendarWidth","calendarStyle","_props$animateScroll","animateScroll","_props$showScrollIndi","showScrollIndicator","staticHeader","testID","propsStyle","style","onLayout","removeClippedSubviews","_props$horizontal","horizontal","pagingEnabled","_props$scrollEnabled","scrollEnabled","_props$nestedScrollEn","nestedScrollEnabled","_props$scrollsToTop","scrollsToTop","_props$keyExtractor","keyExtractor","_","index","String","keyboardShouldPersistTaps","onScrollBeginDrag","onScrollEndDrag","onMomentumScrollBegin","onMomentumScrollEnd","onEndReachedThreshold","onEndReached","calendarProps","extractCalendarProps","headerProps","extractHeaderProps","calendarSize","_useState","useState","parseDate","_useState2","_slicedToArray2","currentMonth","setCurrentMonth","useRef","styleConstructor","list","range","initialDate","XDate","visibleMonth","items","useMemo","months","i","_initialDate$current","rangeDate","clone","addMonths","staticHeaderStyle","listStyle","container","initialDateIndex","findIndex","item","_initialDate$current2","toString","getDateIndex","useCallback","useEffect","useDidUpdate","currMont","data","xdateToData","_initialDate$current3","scrollTo","diffMonths","Math","round","setDate","scrollAmount","week","days","page","floor","sameDate","_list$current","scrollToOffset","_initialDate$current4","_list$current2","addMonth","count","day","sameMonth","getMarkedDatesForItem","_ref","entries","_ref2","getItemLayout","isDateInRange","newMonth","renderItem","_ref3","dateString","toMarkingFormat","_dateString$split","split","_dateString$split2","year","month","testId","jsx","visible","renderStaticHeader","accessibilityElementsHidden","importantForAccessibility","viewabilityConfig","viewAreaCoveragePercentThreshold","onViewableItemsChanged","_ref4","_viewableItems$","viewableItems","newVisibleMonth","viewabilityConfigCallbackPairs","jsxs","View","flatListContainer","children","FlatList","showsVerticalScrollIndicator","showsHorizontalScrollIndicator","initialNumToRender","initialScrollIndex","_default","forwardRef","exports","displayName","propTypes","Calendar","PropTypes","number","oneOfType","object","array","bool","oneOf","func"],"sources":["index.js"],"sourcesContent":["import findIndex from 'lodash/findIndex';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, { forwardRef, useImperativeHandle, useRef, useEffect, useState, useCallback, useMemo } from 'react';\nimport { FlatList, View } from 'react-native';\nimport { extractHeaderProps, extractCalendarProps } from '../componentUpdater';\nimport { xdateToData, parseDate, toMarkingFormat } from '../interface';\nimport { page, sameDate, sameMonth } from '../dateutils';\nimport constants from '../commons/constants';\nimport { useDidUpdate } from '../hooks';\nimport styleConstructor from './style';\nimport Calendar from '../calendar';\nimport CalendarListItem from './item';\nimport CalendarHeader from '../calendar/header/index';\nconst CALENDAR_WIDTH = constants.screenWidth;\nconst CALENDAR_HEIGHT = 360;\nconst PAST_SCROLL_RANGE = 50;\nconst FUTURE_SCROLL_RANGE = 50;\n/**\n * @description: Calendar List component for both vertical and horizontal calendars\n * @extends: Calendar\n * @extendslink: docs/Calendar\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/calendarsList.js\n * @gif: https://github.com/wix/react-native-calendars/blob/master/demo/assets/calendar-list.gif\n */\nconst CalendarList = (props, ref) => {\n    useImperativeHandle(ref, () => ({\n        scrollToDay: (date, offset, animated) => {\n            scrollToDay(date, offset, animated);\n        },\n        scrollToMonth: (date) => {\n            scrollToMonth(date);\n        }\n    }));\n    const { \n    /** Calendar props */\n    theme, current, firstDay, markedDates, headerStyle, onMonthChange, onVisibleMonthsChange, \n    /** CalendarList props */\n    pastScrollRange = PAST_SCROLL_RANGE, futureScrollRange = FUTURE_SCROLL_RANGE, calendarHeight = CALENDAR_HEIGHT, calendarWidth = CALENDAR_WIDTH, calendarStyle, animateScroll = false, showScrollIndicator = false, staticHeader, \n    /** View props */\n    testID, style: propsStyle, onLayout, removeClippedSubviews, \n    /** ScrollView props */\n    horizontal = false, pagingEnabled, scrollEnabled = true, nestedScrollEnabled = true, scrollsToTop = false, keyExtractor = (_, index) => String(index), keyboardShouldPersistTaps, onScrollBeginDrag, onScrollEndDrag, onMomentumScrollBegin, onMomentumScrollEnd, \n    /** FlatList props */\n    onEndReachedThreshold, onEndReached } = props;\n    const calendarProps = extractCalendarProps(props);\n    const headerProps = extractHeaderProps(props);\n    const calendarSize = horizontal ? calendarWidth : calendarHeight;\n    const [currentMonth, setCurrentMonth] = useState(parseDate(current));\n    const style = useRef(styleConstructor(theme));\n    const list = useRef();\n    const range = useRef(horizontal ? 1 : 3);\n    const initialDate = useRef(parseDate(current) || new XDate());\n    const visibleMonth = useRef(currentMonth);\n    const items = useMemo(() => {\n        const months = [];\n        for (let i = 0; i <= pastScrollRange + futureScrollRange; i++) {\n            const rangeDate = initialDate.current?.clone().addMonths(i - pastScrollRange, true);\n            months.push(rangeDate);\n        }\n        return months;\n    }, [pastScrollRange, futureScrollRange]);\n    const staticHeaderStyle = useMemo(() => {\n        return [style.current.staticHeader, headerStyle];\n    }, [headerStyle]);\n    const listStyle = useMemo(() => {\n        return [style.current.container, propsStyle];\n    }, [propsStyle]);\n    const initialDateIndex = useMemo(() => {\n        return findIndex(items, function (item) {\n            return item.toString() === initialDate.current?.toString();\n        });\n    }, [items]);\n    const getDateIndex = useCallback((date) => {\n        return findIndex(items, function (item) {\n            return item.toString() === date.toString();\n        });\n    }, [items]);\n    useEffect(() => {\n        if (current) {\n            scrollToMonth(new XDate(current));\n        }\n    }, [current]);\n    useDidUpdate(() => {\n        const currMont = currentMonth?.clone();\n        if (currMont) {\n            const data = xdateToData(currMont);\n            onMonthChange?.(data);\n            onVisibleMonthsChange?.([data]);\n        }\n    }, [currentMonth]);\n    const scrollToDay = (date, offset, animated) => {\n        const scrollTo = parseDate(date);\n        const diffMonths = Math.round(initialDate?.current?.clone().setDate(1).diffMonths(scrollTo?.clone().setDate(1)));\n        let scrollAmount = calendarSize * pastScrollRange + diffMonths * calendarSize + (offset || 0);\n        if (!horizontal) {\n            let week = 0;\n            const days = page(scrollTo, firstDay);\n            for (let i = 0; i < days.length; i++) {\n                week = Math.floor(i / 7);\n                if (sameDate(days[i], scrollTo)) {\n                    scrollAmount += 46 * week;\n                    break;\n                }\n            }\n        }\n        if (scrollAmount !== 0) {\n            // @ts-expect-error\n            list?.current?.scrollToOffset({ offset: scrollAmount, animated });\n        }\n    };\n    const scrollToMonth = useCallback((date) => {\n        const scrollTo = parseDate(date);\n        const diffMonths = Math.round(initialDate?.current?.clone().setDate(1).diffMonths(scrollTo?.clone().setDate(1)));\n        const scrollAmount = calendarSize * pastScrollRange + diffMonths * calendarSize;\n        if (scrollAmount !== 0) {\n            // @ts-expect-error\n            list?.current?.scrollToOffset({ offset: scrollAmount, animated: animateScroll });\n        }\n    }, [calendarSize]);\n    const addMonth = useCallback((count) => {\n        const day = currentMonth?.clone().addMonths(count, true);\n        if (sameMonth(day, currentMonth) || getDateIndex(day) === -1) {\n            return;\n        }\n        scrollToMonth(day);\n        setCurrentMonth(day);\n    }, [currentMonth, scrollToMonth]);\n    const getMarkedDatesForItem = useCallback((item) => {\n        if (markedDates && item) {\n            for (const [key, _] of Object.entries(markedDates)) {\n                if (sameMonth(new XDate(key), new XDate(item))) {\n                    return markedDates;\n                }\n            }\n        }\n    }, [markedDates]);\n    const getItemLayout = useCallback((_, index) => {\n        return {\n            length: calendarSize,\n            offset: calendarSize * index,\n            index\n        };\n    }, []);\n    const isDateInRange = useCallback((date) => {\n        for (let i = -range.current; i <= range.current; i++) {\n            const newMonth = currentMonth?.clone().addMonths(i, true);\n            if (sameMonth(date, newMonth)) {\n                return true;\n            }\n        }\n        return false;\n    }, [currentMonth]);\n    const renderItem = useCallback(({ item }) => {\n        const dateString = toMarkingFormat(item);\n        const [year, month] = dateString.split('-');\n        const testId = `${testID}.item_${year}-${month}`;\n        return (<CalendarListItem {...calendarProps} testID={testId} markedDates={getMarkedDatesForItem(item)} item={item} style={calendarStyle} \n        // @ts-expect-error - type mismatch - ScrollView's 'horizontal' is nullable\n        horizontal={horizontal} calendarWidth={calendarWidth} calendarHeight={calendarHeight} scrollToMonth={scrollToMonth} visible={isDateInRange(item)}/>);\n    }, [horizontal, calendarStyle, calendarWidth, testID, getMarkedDatesForItem, isDateInRange, calendarProps]);\n    const renderStaticHeader = () => {\n        if (staticHeader && horizontal) {\n            return (<CalendarHeader {...headerProps} testID={`${testID}.staticHeader`} style={staticHeaderStyle} month={currentMonth} addMonth={addMonth} accessibilityElementsHidden={true} // iOS\n             importantForAccessibility={'no-hide-descendants'} // Android\n            />);\n        }\n    };\n    /** Viewable month */\n    const viewabilityConfig = useRef({\n        viewAreaCoveragePercentThreshold: 20\n    });\n    const onViewableItemsChanged = useCallback(({ viewableItems }) => {\n        const newVisibleMonth = parseDate(viewableItems[0]?.item);\n        if (!sameDate(visibleMonth?.current, newVisibleMonth)) {\n            visibleMonth.current = newVisibleMonth;\n            setCurrentMonth(visibleMonth.current);\n        }\n    }, []);\n    const viewabilityConfigCallbackPairs = useRef([\n        {\n            viewabilityConfig: viewabilityConfig.current,\n            onViewableItemsChanged\n        },\n    ]);\n    return (<View style={style.current.flatListContainer} testID={testID}>\n      <FlatList \n    // @ts-expect-error\n    ref={list} style={listStyle} showsVerticalScrollIndicator={showScrollIndicator} showsHorizontalScrollIndicator={showScrollIndicator} data={items} renderItem={renderItem} getItemLayout={getItemLayout} initialNumToRender={range.current} initialScrollIndex={initialDateIndex} viewabilityConfigCallbackPairs={viewabilityConfigCallbackPairs.current} testID={`${testID}.list`} onLayout={onLayout} removeClippedSubviews={removeClippedSubviews} pagingEnabled={pagingEnabled} scrollEnabled={scrollEnabled} scrollsToTop={scrollsToTop} horizontal={horizontal} keyboardShouldPersistTaps={keyboardShouldPersistTaps} keyExtractor={keyExtractor} onEndReachedThreshold={onEndReachedThreshold} onEndReached={onEndReached} nestedScrollEnabled={nestedScrollEnabled} onMomentumScrollBegin={onMomentumScrollBegin} onMomentumScrollEnd={onMomentumScrollEnd} onScrollBeginDrag={onScrollBeginDrag} onScrollEndDrag={onScrollEndDrag}/>\n      {renderStaticHeader()}\n    </View>);\n};\nexport default forwardRef(CalendarList);\nCalendarList.displayName = 'CalendarList';\nCalendarList.propTypes = {\n    ...Calendar.propTypes,\n    pastScrollRange: PropTypes.number,\n    futureScrollRange: PropTypes.number,\n    calendarWidth: PropTypes.number,\n    calendarHeight: PropTypes.number,\n    calendarStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n    staticHeader: PropTypes.bool,\n    showScrollIndicator: PropTypes.bool,\n    animateScroll: PropTypes.bool,\n    scrollEnabled: PropTypes.bool,\n    scrollsToTop: PropTypes.bool,\n    pagingEnabled: PropTypes.bool,\n    horizontal: PropTypes.bool,\n    keyboardShouldPersistTaps: PropTypes.oneOf(['never', 'always', 'handled']),\n    keyExtractor: PropTypes.func,\n    onEndReachedThreshold: PropTypes.number,\n    onEndReached: PropTypes.func,\n    nestedScrollEnabled: PropTypes.bool\n};\n"],"mappings":"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"}