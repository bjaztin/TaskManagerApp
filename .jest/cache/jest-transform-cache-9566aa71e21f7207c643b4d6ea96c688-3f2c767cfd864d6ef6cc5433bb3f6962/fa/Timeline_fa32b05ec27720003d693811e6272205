2031d57e281da8996dd192d4799ebfc9
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _min2 = _interopRequireDefault(require("lodash/min"));
var _map = _interopRequireDefault(require("lodash/map"));
var _times = _interopRequireDefault(require("lodash/times"));
var _groupBy = _interopRequireDefault(require("lodash/groupBy"));
var _react = _interopRequireWildcard(require("react"));
var _reactNative = require("react-native");
var _constants = _interopRequireDefault(require("../commons/constants"));
var _dateutils = require("../dateutils");
var _services = require("../services");
var _style = _interopRequireDefault(require("./style"));
var _Packer = require("./Packer");
var _presenter = require("./helpers/presenter");
var _TimelineHours = _interopRequireDefault(require("./TimelineHours"));
var _EventBlock = _interopRequireDefault(require("./EventBlock"));
var _NowIndicator = _interopRequireDefault(require("./NowIndicator"));
var _useTimelineOffset2 = _interopRequireDefault(require("./useTimelineOffset"));
var _jsxRuntime = require("react/jsx-runtime");
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var Timeline = function Timeline(props) {
  var _props$format24h = props.format24h,
    format24h = _props$format24h === void 0 ? true : _props$format24h,
    _props$start = props.start,
    start = _props$start === void 0 ? 0 : _props$start,
    _props$end = props.end,
    end = _props$end === void 0 ? 24 : _props$end,
    _props$date = props.date,
    date = _props$date === void 0 ? '' : _props$date,
    events = props.events,
    onEventPress = props.onEventPress,
    onBackgroundLongPress = props.onBackgroundLongPress,
    onBackgroundLongPressOut = props.onBackgroundLongPressOut,
    renderEvent = props.renderEvent,
    theme = props.theme,
    scrollToFirst = props.scrollToFirst,
    scrollToNow = props.scrollToNow,
    initialTime = props.initialTime,
    showNowIndicator = props.showNowIndicator,
    scrollOffset = props.scrollOffset,
    onChangeOffset = props.onChangeOffset,
    _props$overlapEventsS = props.overlapEventsSpacing,
    overlapEventsSpacing = _props$overlapEventsS === void 0 ? 0 : _props$overlapEventsS,
    _props$rightEdgeSpaci = props.rightEdgeSpacing,
    rightEdgeSpacing = _props$rightEdgeSpaci === void 0 ? 0 : _props$rightEdgeSpaci,
    unavailableHours = props.unavailableHours,
    unavailableHoursColor = props.unavailableHoursColor,
    eventTapped = props.eventTapped,
    _props$numberOfDays = props.numberOfDays,
    numberOfDays = _props$numberOfDays === void 0 ? 1 : _props$numberOfDays,
    _props$timelineLeftIn = props.timelineLeftInset,
    timelineLeftInset = _props$timelineLeftIn === void 0 ? 0 : _props$timelineLeftIn;
  var pageDates = (0, _react.useMemo)(function () {
    return typeof date === 'string' ? [date] : date;
  }, [date]);
  var groupedEvents = (0, _react.useMemo)(function () {
    return (0, _groupBy.default)(events, function (e) {
      return (0, _services.getCalendarDateString)(e.start);
    });
  }, [events]);
  var pageEvents = (0, _react.useMemo)(function () {
    return (0, _map.default)(pageDates, function (d) {
      return groupedEvents[d] || [];
    });
  }, [pageDates, groupedEvents]);
  var scrollView = (0, _react.useRef)();
  var calendarHeight = (0, _react.useRef)((end - start) * _Packer.HOUR_BLOCK_HEIGHT);
  var styles = (0, _react.useRef)((0, _style.default)(theme || props.styles, calendarHeight.current));
  var _useTimelineOffset = (0, _useTimelineOffset2.default)({
      onChangeOffset: onChangeOffset,
      scrollOffset: scrollOffset,
      scrollViewRef: scrollView
    }),
    scrollEvents = _useTimelineOffset.scrollEvents;
  var width = (0, _react.useMemo)(function () {
    return _constants.default.screenWidth - timelineLeftInset;
  }, [timelineLeftInset]);
  var packedEvents = (0, _react.useMemo)(function () {
    return (0, _map.default)(pageEvents, function (_e, i) {
      return (0, _Packer.populateEvents)(pageEvents[i], {
        screenWidth: width / numberOfDays,
        dayStart: start,
        overlapEventsSpacing: overlapEventsSpacing / numberOfDays,
        rightEdgeSpacing: rightEdgeSpacing / numberOfDays
      });
    });
  }, [pageEvents, start, numberOfDays]);
  (0, _react.useEffect)(function () {
    var initialPosition = 0;
    if (scrollToNow) {
      initialPosition = (0, _presenter.calcTimeOffset)(_Packer.HOUR_BLOCK_HEIGHT);
    } else if (scrollToFirst && packedEvents[0].length > 0) {
      var _min;
      initialPosition = (_min = (0, _min2.default)((0, _map.default)(packedEvents[0], 'top'))) != null ? _min : 0;
    } else if (initialTime) {
      initialPosition = (0, _presenter.calcTimeOffset)(_Packer.HOUR_BLOCK_HEIGHT, initialTime.hour, initialTime.minutes);
    }
    if (initialPosition) {
      setTimeout(function () {
        var _scrollView$current;
        scrollView == null ? void 0 : (_scrollView$current = scrollView.current) == null ? void 0 : _scrollView$current.scrollTo({
          y: Math.max(0, initialPosition - _Packer.HOUR_BLOCK_HEIGHT),
          animated: true
        });
      }, 0);
    }
  }, []);
  var _onEventPress = (0, _react.useCallback)(function (dateIndex, eventIndex) {
    var event = packedEvents[dateIndex][eventIndex];
    if (eventTapped) {
      eventTapped(event);
    } else {
      onEventPress == null ? void 0 : onEventPress(event);
    }
  }, [onEventPress, eventTapped]);
  var renderEvents = function renderEvents(dayIndex) {
    var events = packedEvents[dayIndex].map(function (event, eventIndex) {
      var onEventPress = function onEventPress() {
        return _onEventPress(dayIndex, eventIndex);
      };
      return (0, _jsxRuntime.jsx)(_EventBlock.default, {
        index: eventIndex,
        event: event,
        styles: styles.current,
        format24h: format24h,
        onPress: onEventPress,
        renderEvent: renderEvent
      }, eventIndex);
    });
    return (0, _jsxRuntime.jsx)(_reactNative.View, {
      pointerEvents: 'box-none',
      style: [{
        marginLeft: dayIndex === 0 ? timelineLeftInset : undefined
      }, styles.current.eventsContainer],
      children: events
    });
  };
  var renderTimelineDay = function renderTimelineDay(dayIndex) {
    var indexOfToday = pageDates.indexOf((0, _dateutils.generateDay)(new Date().toString()));
    var left = timelineLeftInset + indexOfToday * width / numberOfDays;
    return (0, _jsxRuntime.jsxs)(_react.default.Fragment, {
      children: [renderEvents(dayIndex), indexOfToday !== -1 && showNowIndicator && (0, _jsxRuntime.jsx)(_NowIndicator.default, {
        width: width / numberOfDays,
        left: left,
        styles: styles.current
      })]
    }, dayIndex);
  };
  return (0, _jsxRuntime.jsxs)(_reactNative.ScrollView, _objectSpread(_objectSpread({
    ref: scrollView,
    style: styles.current.container,
    contentContainerStyle: [styles.current.contentStyle, {
      width: _constants.default.screenWidth
    }],
    showsVerticalScrollIndicator: false
  }, scrollEvents), {}, {
    children: [(0, _jsxRuntime.jsx)(_TimelineHours.default, {
      start: start,
      end: end,
      date: pageDates[0],
      format24h: format24h,
      styles: styles.current,
      unavailableHours: unavailableHours,
      unavailableHoursColor: unavailableHoursColor,
      onBackgroundLongPress: onBackgroundLongPress,
      onBackgroundLongPressOut: onBackgroundLongPressOut,
      width: width,
      numberOfDays: numberOfDays,
      timelineLeftInset: timelineLeftInset
    }), (0, _times.default)(numberOfDays, renderTimelineDay)]
  }));
};
var _default = _react.default.memo(Timeline);
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbWluMiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX21hcCIsIl90aW1lcyIsIl9ncm91cEJ5IiwiX3JlYWN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfcmVhY3ROYXRpdmUiLCJfY29uc3RhbnRzIiwiX2RhdGV1dGlscyIsIl9zZXJ2aWNlcyIsIl9zdHlsZSIsIl9QYWNrZXIiLCJfcHJlc2VudGVyIiwiX1RpbWVsaW5lSG91cnMiLCJfRXZlbnRCbG9jayIsIl9Ob3dJbmRpY2F0b3IiLCJfdXNlVGltZWxpbmVPZmZzZXQyIiwiX2pzeFJ1bnRpbWUiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJub2RlSW50ZXJvcCIsIldlYWtNYXAiLCJjYWNoZUJhYmVsSW50ZXJvcCIsImNhY2hlTm9kZUludGVyb3AiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNhY2hlIiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0Iiwib3duS2V5cyIsImUiLCJyIiwidCIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiVGltZWxpbmUiLCJwcm9wcyIsIl9wcm9wcyRmb3JtYXQyNGgiLCJmb3JtYXQyNGgiLCJfcHJvcHMkc3RhcnQiLCJzdGFydCIsIl9wcm9wcyRlbmQiLCJlbmQiLCJfcHJvcHMkZGF0ZSIsImRhdGUiLCJldmVudHMiLCJvbkV2ZW50UHJlc3MiLCJvbkJhY2tncm91bmRMb25nUHJlc3MiLCJvbkJhY2tncm91bmRMb25nUHJlc3NPdXQiLCJyZW5kZXJFdmVudCIsInRoZW1lIiwic2Nyb2xsVG9GaXJzdCIsInNjcm9sbFRvTm93IiwiaW5pdGlhbFRpbWUiLCJzaG93Tm93SW5kaWNhdG9yIiwic2Nyb2xsT2Zmc2V0Iiwib25DaGFuZ2VPZmZzZXQiLCJfcHJvcHMkb3ZlcmxhcEV2ZW50c1MiLCJvdmVybGFwRXZlbnRzU3BhY2luZyIsIl9wcm9wcyRyaWdodEVkZ2VTcGFjaSIsInJpZ2h0RWRnZVNwYWNpbmciLCJ1bmF2YWlsYWJsZUhvdXJzIiwidW5hdmFpbGFibGVIb3Vyc0NvbG9yIiwiZXZlbnRUYXBwZWQiLCJfcHJvcHMkbnVtYmVyT2ZEYXlzIiwibnVtYmVyT2ZEYXlzIiwiX3Byb3BzJHRpbWVsaW5lTGVmdEluIiwidGltZWxpbmVMZWZ0SW5zZXQiLCJwYWdlRGF0ZXMiLCJ1c2VNZW1vIiwiZ3JvdXBlZEV2ZW50cyIsImdyb3VwQnkiLCJnZXRDYWxlbmRhckRhdGVTdHJpbmciLCJwYWdlRXZlbnRzIiwibWFwIiwiZCIsInNjcm9sbFZpZXciLCJ1c2VSZWYiLCJjYWxlbmRhckhlaWdodCIsIkhPVVJfQkxPQ0tfSEVJR0hUIiwic3R5bGVzIiwic3R5bGVDb25zdHJ1Y3RvciIsImN1cnJlbnQiLCJfdXNlVGltZWxpbmVPZmZzZXQiLCJ1c2VUaW1lbGluZU9mZnNldCIsInNjcm9sbFZpZXdSZWYiLCJzY3JvbGxFdmVudHMiLCJ3aWR0aCIsImNvbnN0YW50cyIsInNjcmVlbldpZHRoIiwicGFja2VkRXZlbnRzIiwiX2UiLCJpIiwicG9wdWxhdGVFdmVudHMiLCJkYXlTdGFydCIsInVzZUVmZmVjdCIsImluaXRpYWxQb3NpdGlvbiIsImNhbGNUaW1lT2Zmc2V0IiwiX21pbiIsIm1pbiIsImhvdXIiLCJtaW51dGVzIiwic2V0VGltZW91dCIsIl9zY3JvbGxWaWV3JGN1cnJlbnQiLCJzY3JvbGxUbyIsInkiLCJNYXRoIiwibWF4IiwiYW5pbWF0ZWQiLCJfb25FdmVudFByZXNzIiwidXNlQ2FsbGJhY2siLCJkYXRlSW5kZXgiLCJldmVudEluZGV4IiwiZXZlbnQiLCJyZW5kZXJFdmVudHMiLCJkYXlJbmRleCIsImpzeCIsImluZGV4Iiwib25QcmVzcyIsIlZpZXciLCJwb2ludGVyRXZlbnRzIiwic3R5bGUiLCJtYXJnaW5MZWZ0IiwidW5kZWZpbmVkIiwiZXZlbnRzQ29udGFpbmVyIiwiY2hpbGRyZW4iLCJyZW5kZXJUaW1lbGluZURheSIsImluZGV4T2ZUb2RheSIsImluZGV4T2YiLCJnZW5lcmF0ZURheSIsIkRhdGUiLCJ0b1N0cmluZyIsImxlZnQiLCJqc3hzIiwiRnJhZ21lbnQiLCJTY3JvbGxWaWV3IiwicmVmIiwiY29udGFpbmVyIiwiY29udGVudENvbnRhaW5lclN0eWxlIiwiY29udGVudFN0eWxlIiwic2hvd3NWZXJ0aWNhbFNjcm9sbEluZGljYXRvciIsInRpbWVzIiwiX2RlZmF1bHQiLCJSZWFjdCIsIm1lbW8iLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiVGltZWxpbmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1pbiBmcm9tICdsb2Rhc2gvbWluJztcbmltcG9ydCBtYXAgZnJvbSAnbG9kYXNoL21hcCc7XG5pbXBvcnQgdGltZXMgZnJvbSAnbG9kYXNoL3RpbWVzJztcbmltcG9ydCBncm91cEJ5IGZyb20gJ2xvZGFzaC9ncm91cEJ5JztcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBWaWV3LCBTY3JvbGxWaWV3IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnLi4vY29tbW9ucy9jb25zdGFudHMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVEYXkgfSBmcm9tICcuLi9kYXRldXRpbHMnO1xuaW1wb3J0IHsgZ2V0Q2FsZW5kYXJEYXRlU3RyaW5nIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuaW1wb3J0IHN0eWxlQ29uc3RydWN0b3IgZnJvbSAnLi9zdHlsZSc7XG5pbXBvcnQgeyBwb3B1bGF0ZUV2ZW50cywgSE9VUl9CTE9DS19IRUlHSFQgfSBmcm9tICcuL1BhY2tlcic7XG5pbXBvcnQgeyBjYWxjVGltZU9mZnNldCB9IGZyb20gJy4vaGVscGVycy9wcmVzZW50ZXInO1xuaW1wb3J0IFRpbWVsaW5lSG91cnMgZnJvbSAnLi9UaW1lbGluZUhvdXJzJztcbmltcG9ydCBFdmVudEJsb2NrIGZyb20gJy4vRXZlbnRCbG9jayc7XG5pbXBvcnQgTm93SW5kaWNhdG9yIGZyb20gJy4vTm93SW5kaWNhdG9yJztcbmltcG9ydCB1c2VUaW1lbGluZU9mZnNldCBmcm9tICcuL3VzZVRpbWVsaW5lT2Zmc2V0JztcbmNvbnN0IFRpbWVsaW5lID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBmb3JtYXQyNGggPSB0cnVlLCBzdGFydCA9IDAsIGVuZCA9IDI0LCBkYXRlID0gJycsIGV2ZW50cywgb25FdmVudFByZXNzLCBvbkJhY2tncm91bmRMb25nUHJlc3MsIG9uQmFja2dyb3VuZExvbmdQcmVzc091dCwgcmVuZGVyRXZlbnQsIHRoZW1lLCBzY3JvbGxUb0ZpcnN0LCBzY3JvbGxUb05vdywgaW5pdGlhbFRpbWUsIHNob3dOb3dJbmRpY2F0b3IsIHNjcm9sbE9mZnNldCwgb25DaGFuZ2VPZmZzZXQsIG92ZXJsYXBFdmVudHNTcGFjaW5nID0gMCwgcmlnaHRFZGdlU3BhY2luZyA9IDAsIHVuYXZhaWxhYmxlSG91cnMsIHVuYXZhaWxhYmxlSG91cnNDb2xvciwgZXZlbnRUYXBwZWQsIG51bWJlck9mRGF5cyA9IDEsIHRpbWVsaW5lTGVmdEluc2V0ID0gMCB9ID0gcHJvcHM7XG4gICAgY29uc3QgcGFnZURhdGVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycgPyBbZGF0ZV0gOiBkYXRlO1xuICAgIH0sIFtkYXRlXSk7XG4gICAgY29uc3QgZ3JvdXBlZEV2ZW50cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICByZXR1cm4gZ3JvdXBCeShldmVudHMsIGUgPT4gZ2V0Q2FsZW5kYXJEYXRlU3RyaW5nKGUuc3RhcnQpKTtcbiAgICB9LCBbZXZlbnRzXSk7XG4gICAgY29uc3QgcGFnZUV2ZW50cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICByZXR1cm4gbWFwKHBhZ2VEYXRlcywgZCA9PiBncm91cGVkRXZlbnRzW2RdIHx8IFtdKTtcbiAgICB9LCBbcGFnZURhdGVzLCBncm91cGVkRXZlbnRzXSk7XG4gICAgY29uc3Qgc2Nyb2xsVmlldyA9IHVzZVJlZigpO1xuICAgIGNvbnN0IGNhbGVuZGFySGVpZ2h0ID0gdXNlUmVmKChlbmQgLSBzdGFydCkgKiBIT1VSX0JMT0NLX0hFSUdIVCk7XG4gICAgY29uc3Qgc3R5bGVzID0gdXNlUmVmKHN0eWxlQ29uc3RydWN0b3IodGhlbWUgfHwgcHJvcHMuc3R5bGVzLCBjYWxlbmRhckhlaWdodC5jdXJyZW50KSk7XG4gICAgY29uc3QgeyBzY3JvbGxFdmVudHMgfSA9IHVzZVRpbWVsaW5lT2Zmc2V0KHsgb25DaGFuZ2VPZmZzZXQsIHNjcm9sbE9mZnNldCwgc2Nyb2xsVmlld1JlZjogc2Nyb2xsVmlldyB9KTtcbiAgICBjb25zdCB3aWR0aCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICByZXR1cm4gY29uc3RhbnRzLnNjcmVlbldpZHRoIC0gdGltZWxpbmVMZWZ0SW5zZXQ7XG4gICAgfSwgW3RpbWVsaW5lTGVmdEluc2V0XSk7XG4gICAgY29uc3QgcGFja2VkRXZlbnRzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIHJldHVybiBtYXAocGFnZUV2ZW50cywgKF9lLCBpKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcG9wdWxhdGVFdmVudHMocGFnZUV2ZW50c1tpXSwge1xuICAgICAgICAgICAgICAgIHNjcmVlbldpZHRoOiB3aWR0aCAvIG51bWJlck9mRGF5cyxcbiAgICAgICAgICAgICAgICBkYXlTdGFydDogc3RhcnQsXG4gICAgICAgICAgICAgICAgb3ZlcmxhcEV2ZW50c1NwYWNpbmc6IG92ZXJsYXBFdmVudHNTcGFjaW5nIC8gbnVtYmVyT2ZEYXlzLFxuICAgICAgICAgICAgICAgIHJpZ2h0RWRnZVNwYWNpbmc6IHJpZ2h0RWRnZVNwYWNpbmcgLyBudW1iZXJPZkRheXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LCBbcGFnZUV2ZW50cywgc3RhcnQsIG51bWJlck9mRGF5c10pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGxldCBpbml0aWFsUG9zaXRpb24gPSAwO1xuICAgICAgICBpZiAoc2Nyb2xsVG9Ob3cpIHtcbiAgICAgICAgICAgIGluaXRpYWxQb3NpdGlvbiA9IGNhbGNUaW1lT2Zmc2V0KEhPVVJfQkxPQ0tfSEVJR0hUKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzY3JvbGxUb0ZpcnN0ICYmIHBhY2tlZEV2ZW50c1swXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbml0aWFsUG9zaXRpb24gPSBtaW4obWFwKHBhY2tlZEV2ZW50c1swXSwgJ3RvcCcpKSA/PyAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluaXRpYWxUaW1lKSB7XG4gICAgICAgICAgICBpbml0aWFsUG9zaXRpb24gPSBjYWxjVGltZU9mZnNldChIT1VSX0JMT0NLX0hFSUdIVCwgaW5pdGlhbFRpbWUuaG91ciwgaW5pdGlhbFRpbWUubWludXRlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluaXRpYWxQb3NpdGlvbikge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVmlldz8uY3VycmVudD8uc2Nyb2xsVG8oe1xuICAgICAgICAgICAgICAgICAgICB5OiBNYXRoLm1heCgwLCBpbml0aWFsUG9zaXRpb24gLSBIT1VSX0JMT0NLX0hFSUdIVCksXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgIH0sIFtdKTtcbiAgICBjb25zdCBfb25FdmVudFByZXNzID0gdXNlQ2FsbGJhY2soKGRhdGVJbmRleCwgZXZlbnRJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBldmVudCA9IHBhY2tlZEV2ZW50c1tkYXRlSW5kZXhdW2V2ZW50SW5kZXhdO1xuICAgICAgICBpZiAoZXZlbnRUYXBwZWQpIHtcbiAgICAgICAgICAgIC8vVE9ETzogcmVtb3ZlIGFmdGVyIGRlcHJlY2F0aW9uXG4gICAgICAgICAgICBldmVudFRhcHBlZChldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvbkV2ZW50UHJlc3M/LihldmVudCk7XG4gICAgICAgIH1cbiAgICB9LCBbb25FdmVudFByZXNzLCBldmVudFRhcHBlZF0pO1xuICAgIGNvbnN0IHJlbmRlckV2ZW50cyA9IChkYXlJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBldmVudHMgPSBwYWNrZWRFdmVudHNbZGF5SW5kZXhdLm1hcCgoZXZlbnQsIGV2ZW50SW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9uRXZlbnRQcmVzcyA9ICgpID0+IF9vbkV2ZW50UHJlc3MoZGF5SW5kZXgsIGV2ZW50SW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuICg8RXZlbnRCbG9jayBrZXk9e2V2ZW50SW5kZXh9IGluZGV4PXtldmVudEluZGV4fSBldmVudD17ZXZlbnR9IHN0eWxlcz17c3R5bGVzLmN1cnJlbnR9IGZvcm1hdDI0aD17Zm9ybWF0MjRofSBvblByZXNzPXtvbkV2ZW50UHJlc3N9IHJlbmRlckV2ZW50PXtyZW5kZXJFdmVudH0vPik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gKDxWaWV3IHBvaW50ZXJFdmVudHM9eydib3gtbm9uZSd9IHN0eWxlPXtbeyBtYXJnaW5MZWZ0OiBkYXlJbmRleCA9PT0gMCA/IHRpbWVsaW5lTGVmdEluc2V0IDogdW5kZWZpbmVkIH0sIHN0eWxlcy5jdXJyZW50LmV2ZW50c0NvbnRhaW5lcl19PlxuICAgICAgICB7ZXZlbnRzfVxuICAgICAgPC9WaWV3Pik7XG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJUaW1lbGluZURheSA9IChkYXlJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpbmRleE9mVG9kYXkgPSBwYWdlRGF0ZXMuaW5kZXhPZihnZW5lcmF0ZURheShuZXcgRGF0ZSgpLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgY29uc3QgbGVmdCA9IHRpbWVsaW5lTGVmdEluc2V0ICsgaW5kZXhPZlRvZGF5ICogd2lkdGggLyBudW1iZXJPZkRheXM7XG4gICAgICAgIHJldHVybiAoPFJlYWN0LkZyYWdtZW50IGtleT17ZGF5SW5kZXh9PlxuICAgICAgICB7cmVuZGVyRXZlbnRzKGRheUluZGV4KX1cbiAgICAgICAge2luZGV4T2ZUb2RheSAhPT0gLTEgJiYgc2hvd05vd0luZGljYXRvciAmJiA8Tm93SW5kaWNhdG9yIHdpZHRoPXt3aWR0aCAvIG51bWJlck9mRGF5c30gbGVmdD17bGVmdH0gc3R5bGVzPXtzdHlsZXMuY3VycmVudH0vPn1cbiAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+KTtcbiAgICB9O1xuICAgIHJldHVybiAoPFNjcm9sbFZpZXcgXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgIHJlZj17c2Nyb2xsVmlld30gc3R5bGU9e3N0eWxlcy5jdXJyZW50LmNvbnRhaW5lcn0gY29udGVudENvbnRhaW5lclN0eWxlPXtbc3R5bGVzLmN1cnJlbnQuY29udGVudFN0eWxlLCB7IHdpZHRoOiBjb25zdGFudHMuc2NyZWVuV2lkdGggfV19IHNob3dzVmVydGljYWxTY3JvbGxJbmRpY2F0b3I9e2ZhbHNlfSB7Li4uc2Nyb2xsRXZlbnRzfT5cbiAgICAgIDxUaW1lbGluZUhvdXJzIHN0YXJ0PXtzdGFydH0gZW5kPXtlbmR9IGRhdGU9e3BhZ2VEYXRlc1swXX0gZm9ybWF0MjRoPXtmb3JtYXQyNGh9IHN0eWxlcz17c3R5bGVzLmN1cnJlbnR9IHVuYXZhaWxhYmxlSG91cnM9e3VuYXZhaWxhYmxlSG91cnN9IHVuYXZhaWxhYmxlSG91cnNDb2xvcj17dW5hdmFpbGFibGVIb3Vyc0NvbG9yfSBvbkJhY2tncm91bmRMb25nUHJlc3M9e29uQmFja2dyb3VuZExvbmdQcmVzc30gb25CYWNrZ3JvdW5kTG9uZ1ByZXNzT3V0PXtvbkJhY2tncm91bmRMb25nUHJlc3NPdXR9IHdpZHRoPXt3aWR0aH0gbnVtYmVyT2ZEYXlzPXtudW1iZXJPZkRheXN9IHRpbWVsaW5lTGVmdEluc2V0PXt0aW1lbGluZUxlZnRJbnNldH0vPlxuICAgICAge3RpbWVzKG51bWJlck9mRGF5cywgcmVuZGVyVGltZWxpbmVEYXkpfVxuICAgIDwvU2Nyb2xsVmlldz4pO1xufTtcbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oVGltZWxpbmUpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxLQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxJQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxNQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxRQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxNQUFBLEdBQUFDLHVCQUFBLENBQUFMLE9BQUE7QUFDQSxJQUFBTSxZQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxVQUFBLEdBQUFSLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBUSxVQUFBLEdBQUFSLE9BQUE7QUFDQSxJQUFBUyxTQUFBLEdBQUFULE9BQUE7QUFDQSxJQUFBVSxNQUFBLEdBQUFYLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBVyxPQUFBLEdBQUFYLE9BQUE7QUFDQSxJQUFBWSxVQUFBLEdBQUFaLE9BQUE7QUFDQSxJQUFBYSxjQUFBLEdBQUFkLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBYyxXQUFBLEdBQUFmLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBZSxhQUFBLEdBQUFoQixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQWdCLG1CQUFBLEdBQUFqQixzQkFBQSxDQUFBQyxPQUFBO0FBQW9ELElBQUFpQixXQUFBLEdBQUFqQixPQUFBO0FBQUEsU0FBQWtCLHlCQUFBQyxXQUFBLGVBQUFDLE9BQUEsa0NBQUFDLGlCQUFBLE9BQUFELE9BQUEsUUFBQUUsZ0JBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSx5QkFBQUMsV0FBQSxXQUFBQSxXQUFBLEdBQUFHLGdCQUFBLEdBQUFELGlCQUFBLEtBQUFGLFdBQUE7QUFBQSxTQUFBZCx3QkFBQWtCLEdBQUEsRUFBQUosV0FBQSxTQUFBQSxXQUFBLElBQUFJLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLFdBQUFELEdBQUEsUUFBQUEsR0FBQSxvQkFBQUEsR0FBQSx3QkFBQUEsR0FBQSw0QkFBQUUsT0FBQSxFQUFBRixHQUFBLFVBQUFHLEtBQUEsR0FBQVIsd0JBQUEsQ0FBQUMsV0FBQSxPQUFBTyxLQUFBLElBQUFBLEtBQUEsQ0FBQUMsR0FBQSxDQUFBSixHQUFBLFlBQUFHLEtBQUEsQ0FBQUUsR0FBQSxDQUFBTCxHQUFBLFNBQUFNLE1BQUEsV0FBQUMscUJBQUEsR0FBQUMsTUFBQSxDQUFBQyxjQUFBLElBQUFELE1BQUEsQ0FBQUUsd0JBQUEsV0FBQUMsR0FBQSxJQUFBWCxHQUFBLFFBQUFXLEdBQUEsa0JBQUFILE1BQUEsQ0FBQUksU0FBQSxDQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQWQsR0FBQSxFQUFBVyxHQUFBLFNBQUFJLElBQUEsR0FBQVIscUJBQUEsR0FBQUMsTUFBQSxDQUFBRSx3QkFBQSxDQUFBVixHQUFBLEVBQUFXLEdBQUEsY0FBQUksSUFBQSxLQUFBQSxJQUFBLENBQUFWLEdBQUEsSUFBQVUsSUFBQSxDQUFBQyxHQUFBLEtBQUFSLE1BQUEsQ0FBQUMsY0FBQSxDQUFBSCxNQUFBLEVBQUFLLEdBQUEsRUFBQUksSUFBQSxZQUFBVCxNQUFBLENBQUFLLEdBQUEsSUFBQVgsR0FBQSxDQUFBVyxHQUFBLFNBQUFMLE1BQUEsQ0FBQUosT0FBQSxHQUFBRixHQUFBLE1BQUFHLEtBQUEsSUFBQUEsS0FBQSxDQUFBYSxHQUFBLENBQUFoQixHQUFBLEVBQUFNLE1BQUEsWUFBQUEsTUFBQTtBQUFBLFNBQUFXLFFBQUFDLENBQUEsRUFBQUMsQ0FBQSxRQUFBQyxDQUFBLEdBQUFaLE1BQUEsQ0FBQWEsSUFBQSxDQUFBSCxDQUFBLE9BQUFWLE1BQUEsQ0FBQWMscUJBQUEsUUFBQUMsQ0FBQSxHQUFBZixNQUFBLENBQUFjLHFCQUFBLENBQUFKLENBQUEsR0FBQUMsQ0FBQSxLQUFBSSxDQUFBLEdBQUFBLENBQUEsQ0FBQUMsTUFBQSxXQUFBTCxDQUFBLFdBQUFYLE1BQUEsQ0FBQUUsd0JBQUEsQ0FBQVEsQ0FBQSxFQUFBQyxDQUFBLEVBQUFNLFVBQUEsT0FBQUwsQ0FBQSxDQUFBTSxJQUFBLENBQUFDLEtBQUEsQ0FBQVAsQ0FBQSxFQUFBRyxDQUFBLFlBQUFILENBQUE7QUFBQSxTQUFBUSxjQUFBVixDQUFBLGFBQUFDLENBQUEsTUFBQUEsQ0FBQSxHQUFBVSxTQUFBLENBQUFDLE1BQUEsRUFBQVgsQ0FBQSxVQUFBQyxDQUFBLFdBQUFTLFNBQUEsQ0FBQVYsQ0FBQSxJQUFBVSxTQUFBLENBQUFWLENBQUEsUUFBQUEsQ0FBQSxPQUFBRixPQUFBLENBQUFULE1BQUEsQ0FBQVksQ0FBQSxPQUFBVyxPQUFBLFdBQUFaLENBQUEsUUFBQWEsZ0JBQUEsQ0FBQTlCLE9BQUEsRUFBQWdCLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLENBQUFELENBQUEsU0FBQVgsTUFBQSxDQUFBeUIseUJBQUEsR0FBQXpCLE1BQUEsQ0FBQTBCLGdCQUFBLENBQUFoQixDQUFBLEVBQUFWLE1BQUEsQ0FBQXlCLHlCQUFBLENBQUFiLENBQUEsS0FBQUgsT0FBQSxDQUFBVCxNQUFBLENBQUFZLENBQUEsR0FBQVcsT0FBQSxXQUFBWixDQUFBLElBQUFYLE1BQUEsQ0FBQUMsY0FBQSxDQUFBUyxDQUFBLEVBQUFDLENBQUEsRUFBQVgsTUFBQSxDQUFBRSx3QkFBQSxDQUFBVSxDQUFBLEVBQUFELENBQUEsaUJBQUFELENBQUE7QUFDcEQsSUFBTWlCLFFBQVEsR0FBRyxTQUFYQSxRQUFRQSxDQUFJQyxLQUFLLEVBQUs7RUFDeEIsSUFBQUMsZ0JBQUEsR0FBZ1lELEtBQUssQ0FBN1hFLFNBQVM7SUFBVEEsU0FBUyxHQUFBRCxnQkFBQSxjQUFHLElBQUksR0FBQUEsZ0JBQUE7SUFBQUUsWUFBQSxHQUF3V0gsS0FBSyxDQUEzV0ksS0FBSztJQUFMQSxLQUFLLEdBQUFELFlBQUEsY0FBRyxDQUFDLEdBQUFBLFlBQUE7SUFBQUUsVUFBQSxHQUE2VkwsS0FBSyxDQUFoV00sR0FBRztJQUFIQSxHQUFHLEdBQUFELFVBQUEsY0FBRyxFQUFFLEdBQUFBLFVBQUE7SUFBQUUsV0FBQSxHQUFtVlAsS0FBSyxDQUF0VlEsSUFBSTtJQUFKQSxJQUFJLEdBQUFELFdBQUEsY0FBRyxFQUFFLEdBQUFBLFdBQUE7SUFBRUUsTUFBTSxHQUFnVVQsS0FBSyxDQUEzVVMsTUFBTTtJQUFFQyxZQUFZLEdBQWtUVixLQUFLLENBQW5VVSxZQUFZO0lBQUVDLHFCQUFxQixHQUEyUlgsS0FBSyxDQUFyVFcscUJBQXFCO0lBQUVDLHdCQUF3QixHQUFpUVosS0FBSyxDQUE5Ulksd0JBQXdCO0lBQUVDLFdBQVcsR0FBb1BiLEtBQUssQ0FBcFFhLFdBQVc7SUFBRUMsS0FBSyxHQUE2T2QsS0FBSyxDQUF2UGMsS0FBSztJQUFFQyxhQUFhLEdBQThOZixLQUFLLENBQWhQZSxhQUFhO0lBQUVDLFdBQVcsR0FBaU5oQixLQUFLLENBQWpPZ0IsV0FBVztJQUFFQyxXQUFXLEdBQW9NakIsS0FBSyxDQUFwTmlCLFdBQVc7SUFBRUMsZ0JBQWdCLEdBQWtMbEIsS0FBSyxDQUF2TWtCLGdCQUFnQjtJQUFFQyxZQUFZLEdBQW9LbkIsS0FBSyxDQUFyTG1CLFlBQVk7SUFBRUMsY0FBYyxHQUFvSnBCLEtBQUssQ0FBdktvQixjQUFjO0lBQUFDLHFCQUFBLEdBQW9KckIsS0FBSyxDQUF2SnNCLG9CQUFvQjtJQUFwQkEsb0JBQW9CLEdBQUFELHFCQUFBLGNBQUcsQ0FBQyxHQUFBQSxxQkFBQTtJQUFBRSxxQkFBQSxHQUEwSHZCLEtBQUssQ0FBN0h3QixnQkFBZ0I7SUFBaEJBLGdCQUFnQixHQUFBRCxxQkFBQSxjQUFHLENBQUMsR0FBQUEscUJBQUE7SUFBRUUsZ0JBQWdCLEdBQWtGekIsS0FBSyxDQUF2R3lCLGdCQUFnQjtJQUFFQyxxQkFBcUIsR0FBMkQxQixLQUFLLENBQXJGMEIscUJBQXFCO0lBQUVDLFdBQVcsR0FBOEMzQixLQUFLLENBQTlEMkIsV0FBVztJQUFBQyxtQkFBQSxHQUE4QzVCLEtBQUssQ0FBakQ2QixZQUFZO0lBQVpBLFlBQVksR0FBQUQsbUJBQUEsY0FBRyxDQUFDLEdBQUFBLG1CQUFBO0lBQUFFLHFCQUFBLEdBQTRCOUIsS0FBSyxDQUEvQitCLGlCQUFpQjtJQUFqQkEsaUJBQWlCLEdBQUFELHFCQUFBLGNBQUcsQ0FBQyxHQUFBQSxxQkFBQTtFQUMzWCxJQUFNRSxTQUFTLEdBQUcsSUFBQUMsY0FBTyxFQUFDLFlBQU07SUFDNUIsT0FBTyxPQUFPekIsSUFBSSxLQUFLLFFBQVEsR0FBRyxDQUFDQSxJQUFJLENBQUMsR0FBR0EsSUFBSTtFQUNuRCxDQUFDLEVBQUUsQ0FBQ0EsSUFBSSxDQUFDLENBQUM7RUFDVixJQUFNMEIsYUFBYSxHQUFHLElBQUFELGNBQU8sRUFBQyxZQUFNO0lBQ2hDLE9BQU8sSUFBQUUsZ0JBQU8sRUFBQzFCLE1BQU0sRUFBRSxVQUFBM0IsQ0FBQztNQUFBLE9BQUksSUFBQXNELCtCQUFxQixFQUFDdEQsQ0FBQyxDQUFDc0IsS0FBSyxDQUFDO0lBQUEsRUFBQztFQUMvRCxDQUFDLEVBQUUsQ0FBQ0ssTUFBTSxDQUFDLENBQUM7RUFDWixJQUFNNEIsVUFBVSxHQUFHLElBQUFKLGNBQU8sRUFBQyxZQUFNO0lBQzdCLE9BQU8sSUFBQUssWUFBRyxFQUFDTixTQUFTLEVBQUUsVUFBQU8sQ0FBQztNQUFBLE9BQUlMLGFBQWEsQ0FBQ0ssQ0FBQyxDQUFDLElBQUksRUFBRTtJQUFBLEVBQUM7RUFDdEQsQ0FBQyxFQUFFLENBQUNQLFNBQVMsRUFBRUUsYUFBYSxDQUFDLENBQUM7RUFDOUIsSUFBTU0sVUFBVSxHQUFHLElBQUFDLGFBQU0sRUFBQyxDQUFDO0VBQzNCLElBQU1DLGNBQWMsR0FBRyxJQUFBRCxhQUFNLEVBQUMsQ0FBQ25DLEdBQUcsR0FBR0YsS0FBSyxJQUFJdUMseUJBQWlCLENBQUM7RUFDaEUsSUFBTUMsTUFBTSxHQUFHLElBQUFILGFBQU0sRUFBQyxJQUFBSSxjQUFnQixFQUFDL0IsS0FBSyxJQUFJZCxLQUFLLENBQUM0QyxNQUFNLEVBQUVGLGNBQWMsQ0FBQ0ksT0FBTyxDQUFDLENBQUM7RUFDdEYsSUFBQUMsa0JBQUEsR0FBeUIsSUFBQUMsMkJBQWlCLEVBQUM7TUFBRTVCLGNBQWMsRUFBZEEsY0FBYztNQUFFRCxZQUFZLEVBQVpBLFlBQVk7TUFBRThCLGFBQWEsRUFBRVQ7SUFBVyxDQUFDLENBQUM7SUFBL0ZVLFlBQVksR0FBQUgsa0JBQUEsQ0FBWkcsWUFBWTtFQUNwQixJQUFNQyxLQUFLLEdBQUcsSUFBQWxCLGNBQU8sRUFBQyxZQUFNO0lBQ3hCLE9BQU9tQixrQkFBUyxDQUFDQyxXQUFXLEdBQUd0QixpQkFBaUI7RUFDcEQsQ0FBQyxFQUFFLENBQUNBLGlCQUFpQixDQUFDLENBQUM7RUFDdkIsSUFBTXVCLFlBQVksR0FBRyxJQUFBckIsY0FBTyxFQUFDLFlBQU07SUFDL0IsT0FBTyxJQUFBSyxZQUFHLEVBQUNELFVBQVUsRUFBRSxVQUFDa0IsRUFBRSxFQUFFQyxDQUFDLEVBQUs7TUFDOUIsT0FBTyxJQUFBQyxzQkFBYyxFQUFDcEIsVUFBVSxDQUFDbUIsQ0FBQyxDQUFDLEVBQUU7UUFDakNILFdBQVcsRUFBRUYsS0FBSyxHQUFHdEIsWUFBWTtRQUNqQzZCLFFBQVEsRUFBRXRELEtBQUs7UUFDZmtCLG9CQUFvQixFQUFFQSxvQkFBb0IsR0FBR08sWUFBWTtRQUN6REwsZ0JBQWdCLEVBQUVBLGdCQUFnQixHQUFHSztNQUN6QyxDQUFDLENBQUM7SUFDTixDQUFDLENBQUM7RUFDTixDQUFDLEVBQUUsQ0FBQ1EsVUFBVSxFQUFFakMsS0FBSyxFQUFFeUIsWUFBWSxDQUFDLENBQUM7RUFDckMsSUFBQThCLGdCQUFTLEVBQUMsWUFBTTtJQUNaLElBQUlDLGVBQWUsR0FBRyxDQUFDO0lBQ3ZCLElBQUk1QyxXQUFXLEVBQUU7TUFDYjRDLGVBQWUsR0FBRyxJQUFBQyx5QkFBYyxFQUFDbEIseUJBQWlCLENBQUM7SUFDdkQsQ0FBQyxNQUNJLElBQUk1QixhQUFhLElBQUl1QyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM1RCxNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQUEsSUFBQW9FLElBQUE7TUFDbERGLGVBQWUsSUFBQUUsSUFBQSxHQUFHLElBQUFDLGFBQUcsRUFBQyxJQUFBekIsWUFBRyxFQUFDZ0IsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLFlBQUFRLElBQUEsR0FBSSxDQUFDO0lBQzNELENBQUMsTUFDSSxJQUFJN0MsV0FBVyxFQUFFO01BQ2xCMkMsZUFBZSxHQUFHLElBQUFDLHlCQUFjLEVBQUNsQix5QkFBaUIsRUFBRTFCLFdBQVcsQ0FBQytDLElBQUksRUFBRS9DLFdBQVcsQ0FBQ2dELE9BQU8sQ0FBQztJQUM5RjtJQUNBLElBQUlMLGVBQWUsRUFBRTtNQUNqQk0sVUFBVSxDQUFDLFlBQU07UUFBQSxJQUFBQyxtQkFBQTtRQUNiM0IsVUFBVSxxQkFBQTJCLG1CQUFBLEdBQVYzQixVQUFVLENBQUVNLE9BQU8scUJBQW5CcUIsbUJBQUEsQ0FBcUJDLFFBQVEsQ0FBQztVQUMxQkMsQ0FBQyxFQUFFQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEVBQUVYLGVBQWUsR0FBR2pCLHlCQUFpQixDQUFDO1VBQ25ENkIsUUFBUSxFQUFFO1FBQ2QsQ0FBQyxDQUFDO01BQ04sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNUO0VBQ0osQ0FBQyxFQUFFLEVBQUUsQ0FBQztFQUNOLElBQU1DLGFBQWEsR0FBRyxJQUFBQyxrQkFBVyxFQUFDLFVBQUNDLFNBQVMsRUFBRUMsVUFBVSxFQUFLO0lBQ3pELElBQU1DLEtBQUssR0FBR3ZCLFlBQVksQ0FBQ3FCLFNBQVMsQ0FBQyxDQUFDQyxVQUFVLENBQUM7SUFDakQsSUFBSWpELFdBQVcsRUFBRTtNQUViQSxXQUFXLENBQUNrRCxLQUFLLENBQUM7SUFDdEIsQ0FBQyxNQUNJO01BQ0RuRSxZQUFZLG9CQUFaQSxZQUFZLENBQUdtRSxLQUFLLENBQUM7SUFDekI7RUFDSixDQUFDLEVBQUUsQ0FBQ25FLFlBQVksRUFBRWlCLFdBQVcsQ0FBQyxDQUFDO0VBQy9CLElBQU1tRCxZQUFZLEdBQUcsU0FBZkEsWUFBWUEsQ0FBSUMsUUFBUSxFQUFLO0lBQy9CLElBQU10RSxNQUFNLEdBQUc2QyxZQUFZLENBQUN5QixRQUFRLENBQUMsQ0FBQ3pDLEdBQUcsQ0FBQyxVQUFDdUMsS0FBSyxFQUFFRCxVQUFVLEVBQUs7TUFDN0QsSUFBTWxFLFlBQVksR0FBRyxTQUFmQSxZQUFZQSxDQUFBO1FBQUEsT0FBUytELGFBQWEsQ0FBQ00sUUFBUSxFQUFFSCxVQUFVLENBQUM7TUFBQTtNQUM5RCxPQUFRLElBQUF0SCxXQUFBLENBQUEwSCxHQUFBLEVBQUM3SCxXQUFBLENBQUFXLE9BQVU7UUFBa0JtSCxLQUFLLEVBQUVMLFVBQVc7UUFBQ0MsS0FBSyxFQUFFQSxLQUFNO1FBQUNqQyxNQUFNLEVBQUVBLE1BQU0sQ0FBQ0UsT0FBUTtRQUFDNUMsU0FBUyxFQUFFQSxTQUFVO1FBQUNnRixPQUFPLEVBQUV4RSxZQUFhO1FBQUNHLFdBQVcsRUFBRUE7TUFBWSxHQUEzSStELFVBQTRJLENBQUM7SUFDMUssQ0FBQyxDQUFDO0lBQ0YsT0FBUSxJQUFBdEgsV0FBQSxDQUFBMEgsR0FBQSxFQUFDckksWUFBQSxDQUFBd0ksSUFBSTtNQUFDQyxhQUFhLEVBQUUsVUFBVztNQUFDQyxLQUFLLEVBQUUsQ0FBQztRQUFFQyxVQUFVLEVBQUVQLFFBQVEsS0FBSyxDQUFDLEdBQUdoRCxpQkFBaUIsR0FBR3dEO01BQVUsQ0FBQyxFQUFFM0MsTUFBTSxDQUFDRSxPQUFPLENBQUMwQyxlQUFlLENBQUU7TUFBQUMsUUFBQSxFQUNoSmhGO0lBQU0sQ0FDSCxDQUFDO0VBQ1QsQ0FBQztFQUNELElBQU1pRixpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQWlCQSxDQUFJWCxRQUFRLEVBQUs7SUFDcEMsSUFBTVksWUFBWSxHQUFHM0QsU0FBUyxDQUFDNEQsT0FBTyxDQUFDLElBQUFDLHNCQUFXLEVBQUMsSUFBSUMsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFFLElBQU1DLElBQUksR0FBR2pFLGlCQUFpQixHQUFHNEQsWUFBWSxHQUFHeEMsS0FBSyxHQUFHdEIsWUFBWTtJQUNwRSxPQUFRLElBQUF2RSxXQUFBLENBQUEySSxJQUFBLEVBQUN4SixNQUFBLENBQUFxQixPQUFLLENBQUNvSSxRQUFRO01BQUFULFFBQUEsR0FDdEJYLFlBQVksQ0FBQ0MsUUFBUSxDQUFDLEVBQ3RCWSxZQUFZLEtBQUssQ0FBQyxDQUFDLElBQUl6RSxnQkFBZ0IsSUFBSSxJQUFBNUQsV0FBQSxDQUFBMEgsR0FBQSxFQUFDNUgsYUFBQSxDQUFBVSxPQUFZO1FBQUNxRixLQUFLLEVBQUVBLEtBQUssR0FBR3RCLFlBQWE7UUFBQ21FLElBQUksRUFBRUEsSUFBSztRQUFDcEQsTUFBTSxFQUFFQSxNQUFNLENBQUNFO01BQVEsQ0FBQyxDQUFDO0lBQUEsR0FGL0ZpQyxRQUdmLENBQUM7RUFDbkIsQ0FBQztFQUNELE9BQVEsSUFBQXpILFdBQUEsQ0FBQTJJLElBQUEsRUFBQ3RKLFlBQUEsQ0FBQXdKLFVBQVUsRUFBQTNHLGFBQUEsQ0FBQUEsYUFBQTtJQUVuQjRHLEdBQUcsRUFBRTVELFVBQVc7SUFBQzZDLEtBQUssRUFBRXpDLE1BQU0sQ0FBQ0UsT0FBTyxDQUFDdUQsU0FBVTtJQUFDQyxxQkFBcUIsRUFBRSxDQUFDMUQsTUFBTSxDQUFDRSxPQUFPLENBQUN5RCxZQUFZLEVBQUU7TUFBRXBELEtBQUssRUFBRUMsa0JBQVMsQ0FBQ0M7SUFBWSxDQUFDLENBQUU7SUFBQ21ELDRCQUE0QixFQUFFO0VBQU0sR0FBS3RELFlBQVk7SUFBQXVDLFFBQUEsR0FDN0wsSUFBQW5JLFdBQUEsQ0FBQTBILEdBQUEsRUFBQzlILGNBQUEsQ0FBQVksT0FBYTtNQUFDc0MsS0FBSyxFQUFFQSxLQUFNO01BQUNFLEdBQUcsRUFBRUEsR0FBSTtNQUFDRSxJQUFJLEVBQUV3QixTQUFTLENBQUMsQ0FBQyxDQUFFO01BQUM5QixTQUFTLEVBQUVBLFNBQVU7TUFBQzBDLE1BQU0sRUFBRUEsTUFBTSxDQUFDRSxPQUFRO01BQUNyQixnQkFBZ0IsRUFBRUEsZ0JBQWlCO01BQUNDLHFCQUFxQixFQUFFQSxxQkFBc0I7TUFBQ2YscUJBQXFCLEVBQUVBLHFCQUFzQjtNQUFDQyx3QkFBd0IsRUFBRUEsd0JBQXlCO01BQUN1QyxLQUFLLEVBQUVBLEtBQU07TUFBQ3RCLFlBQVksRUFBRUEsWUFBYTtNQUFDRSxpQkFBaUIsRUFBRUE7SUFBa0IsQ0FBQyxDQUFDLEVBQzdXLElBQUEwRSxjQUFLLEVBQUM1RSxZQUFZLEVBQUU2RCxpQkFBaUIsQ0FBQztFQUFBLEVBQzdCLENBQUM7QUFDakIsQ0FBQztBQUFDLElBQUFnQixRQUFBLEdBQ2FDLGNBQUssQ0FBQ0MsSUFBSSxDQUFDN0csUUFBUSxDQUFDO0FBQUE4RyxPQUFBLENBQUEvSSxPQUFBLEdBQUE0SSxRQUFBIn0=