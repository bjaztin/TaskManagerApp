fd76f6921655d83073c537a36486827c
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useFrameCallback = useFrameCallback;
var _react = require("react");
var _FrameCallbackRegistryJS = _interopRequireDefault(require("../frameCallback/FrameCallbackRegistryJS"));
var frameCallbackRegistry = new _FrameCallbackRegistryJS.default();
function useFrameCallback(callback) {
  var autostart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
  var ref = (0, _react.useRef)({
    setActive: function setActive(isActive) {
      frameCallbackRegistry.manageStateFrameCallback(ref.current.callbackId, isActive);
      ref.current.isActive = isActive;
    },
    isActive: autostart,
    callbackId: -1
  });
  (0, _react.useEffect)(function () {
    ref.current.callbackId = frameCallbackRegistry.registerFrameCallback(callback);
    ref.current.setActive(ref.current.isActive);
    return function () {
      frameCallbackRegistry.unregisterFrameCallback(ref.current.callbackId);
      ref.current.callbackId = -1;
    };
  }, [callback, autostart]);
  return ref.current;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX0ZyYW1lQ2FsbGJhY2tSZWdpc3RyeUpTIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImZyYW1lQ2FsbGJhY2tSZWdpc3RyeSIsIkZyYW1lQ2FsbGJhY2tSZWdpc3RyeUpTIiwidXNlRnJhbWVDYWxsYmFjayIsImNhbGxiYWNrIiwiYXV0b3N0YXJ0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicmVmIiwidXNlUmVmIiwic2V0QWN0aXZlIiwiaXNBY3RpdmUiLCJtYW5hZ2VTdGF0ZUZyYW1lQ2FsbGJhY2siLCJjdXJyZW50IiwiY2FsbGJhY2tJZCIsInVzZUVmZmVjdCIsInJlZ2lzdGVyRnJhbWVDYWxsYmFjayIsInVucmVnaXN0ZXJGcmFtZUNhbGxiYWNrIl0sInNvdXJjZXMiOlsidXNlRnJhbWVDYWxsYmFjay50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBGcmFtZUNhbGxiYWNrUmVnaXN0cnlKUyBmcm9tICcuLi9mcmFtZUNhbGxiYWNrL0ZyYW1lQ2FsbGJhY2tSZWdpc3RyeUpTJztcbmltcG9ydCB7IEZyYW1lSW5mbyB9IGZyb20gJy4uL2ZyYW1lQ2FsbGJhY2svRnJhbWVDYWxsYmFja1JlZ2lzdHJ5VUknO1xuXG5leHBvcnQgdHlwZSBGcmFtZUNhbGxiYWNrID0ge1xuICBzZXRBY3RpdmU6IChpc0FjdGl2ZTogYm9vbGVhbikgPT4gdm9pZDtcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIGNhbGxiYWNrSWQ6IG51bWJlcjtcbn07XG5jb25zdCBmcmFtZUNhbGxiYWNrUmVnaXN0cnkgPSBuZXcgRnJhbWVDYWxsYmFja1JlZ2lzdHJ5SlMoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZyYW1lQ2FsbGJhY2soXG4gIGNhbGxiYWNrOiAoZnJhbWVJbmZvOiBGcmFtZUluZm8pID0+IHZvaWQsXG4gIGF1dG9zdGFydCA9IHRydWVcbik6IEZyYW1lQ2FsbGJhY2sge1xuICBjb25zdCByZWYgPSB1c2VSZWY8RnJhbWVDYWxsYmFjaz4oe1xuICAgIHNldEFjdGl2ZTogKGlzQWN0aXZlOiBib29sZWFuKSA9PiB7XG4gICAgICBmcmFtZUNhbGxiYWNrUmVnaXN0cnkubWFuYWdlU3RhdGVGcmFtZUNhbGxiYWNrKFxuICAgICAgICByZWYuY3VycmVudC5jYWxsYmFja0lkLFxuICAgICAgICBpc0FjdGl2ZVxuICAgICAgKTtcbiAgICAgIHJlZi5jdXJyZW50LmlzQWN0aXZlID0gaXNBY3RpdmU7XG4gICAgfSxcbiAgICBpc0FjdGl2ZTogYXV0b3N0YXJ0LFxuICAgIGNhbGxiYWNrSWQ6IC0xLFxuICB9KTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlZi5jdXJyZW50LmNhbGxiYWNrSWQgPVxuICAgICAgZnJhbWVDYWxsYmFja1JlZ2lzdHJ5LnJlZ2lzdGVyRnJhbWVDYWxsYmFjayhjYWxsYmFjayk7XG4gICAgcmVmLmN1cnJlbnQuc2V0QWN0aXZlKHJlZi5jdXJyZW50LmlzQWN0aXZlKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBmcmFtZUNhbGxiYWNrUmVnaXN0cnkudW5yZWdpc3RlckZyYW1lQ2FsbGJhY2socmVmLmN1cnJlbnQuY2FsbGJhY2tJZCk7XG4gICAgICByZWYuY3VycmVudC5jYWxsYmFja0lkID0gLTE7XG4gICAgfTtcbiAgfSwgW2NhbGxiYWNrLCBhdXRvc3RhcnRdKTtcblxuICByZXR1cm4gcmVmLmN1cnJlbnQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsd0JBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQVFBLElBQU1HLHFCQUFxQixHQUFHLElBQUlDLGdDQUF1QixFQUFFO0FBRXBELFNBQVNDLGdCQUFnQkEsQ0FDOUJDLFFBQXdDLEVBRXpCO0VBQUEsSUFEZkMsU0FBUyxHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBRyxJQUFJO0VBRWhCLElBQU1HLEdBQUcsR0FBRyxJQUFBQyxhQUFNLEVBQWdCO0lBQ2hDQyxTQUFTLEVBQUcsU0FBQUEsVUFBQUMsUUFBaUIsRUFBSztNQUNoQ1gscUJBQXFCLENBQUNZLHdCQUF3QixDQUM1Q0osR0FBRyxDQUFDSyxPQUFPLENBQUNDLFVBQVUsRUFDdEJILFFBQVEsQ0FDVDtNQUNESCxHQUFHLENBQUNLLE9BQU8sQ0FBQ0YsUUFBUSxHQUFHQSxRQUFRO0lBQ2pDLENBQUM7SUFDREEsUUFBUSxFQUFFUCxTQUFTO0lBQ25CVSxVQUFVLEVBQUUsQ0FBQztFQUNmLENBQUMsQ0FBQztFQUVGLElBQUFDLGdCQUFTLEVBQUMsWUFBTTtJQUNkUCxHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsVUFBVSxHQUNwQmQscUJBQXFCLENBQUNnQixxQkFBcUIsQ0FBQ2IsUUFBUSxDQUFDO0lBQ3ZESyxHQUFHLENBQUNLLE9BQU8sQ0FBQ0gsU0FBUyxDQUFDRixHQUFHLENBQUNLLE9BQU8sQ0FBQ0YsUUFBUSxDQUFDO0lBRTNDLE9BQU8sWUFBTTtNQUNYWCxxQkFBcUIsQ0FBQ2lCLHVCQUF1QixDQUFDVCxHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDO01BQ3JFTixHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsVUFBVSxHQUFHLENBQUMsQ0FBQztJQUM3QixDQUFDO0VBQ0gsQ0FBQyxFQUFFLENBQUNYLFFBQVEsRUFBRUMsU0FBUyxDQUFDLENBQUM7RUFFekIsT0FBT0ksR0FBRyxDQUFDSyxPQUFPO0FBQ3BCIn0=