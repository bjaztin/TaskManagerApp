4227010ca4452503ddbd691f54c530df
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _processColor = _interopRequireDefault(require("../../StyleSheet/processColor"));
var _Platform = _interopRequireDefault(require("../../Utilities/Platform"));
var _NativeStatusBarManagerAndroid = _interopRequireDefault(require("./NativeStatusBarManagerAndroid"));
var _NativeStatusBarManagerIOS = _interopRequireDefault(require("./NativeStatusBarManagerIOS"));
var _invariant = _interopRequireDefault(require("invariant"));
var React = _interopRequireWildcard(require("react"));
var _class, _NativeStatusBarManag;
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function mergePropsStack(propsStack, defaultValues) {
  return propsStack.reduce(function (prev, cur) {
    for (var prop in cur) {
      if (cur[prop] != null) {
        prev[prop] = cur[prop];
      }
    }
    return prev;
  }, _objectSpread({}, defaultValues));
}
function createStackEntry(props) {
  var _props$animated, _props$showHideTransi;
  var animated = (_props$animated = props.animated) != null ? _props$animated : false;
  var showHideTransition = (_props$showHideTransi = props.showHideTransition) != null ? _props$showHideTransi : 'fade';
  return {
    backgroundColor: props.backgroundColor != null ? {
      value: props.backgroundColor,
      animated: animated
    } : null,
    barStyle: props.barStyle != null ? {
      value: props.barStyle,
      animated: animated
    } : null,
    translucent: props.translucent,
    hidden: props.hidden != null ? {
      value: props.hidden,
      animated: animated,
      transition: showHideTransition
    } : null,
    networkActivityIndicatorVisible: props.networkActivityIndicatorVisible
  };
}
var StatusBar = function (_React$Component) {
  (0, _inherits2.default)(StatusBar, _React$Component);
  var _super = _createSuper(StatusBar);
  function StatusBar() {
    var _this;
    (0, _classCallCheck2.default)(this, StatusBar);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _this._stackEntry = null;
    return _this;
  }
  (0, _createClass2.default)(StatusBar, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this._stackEntry = StatusBar.pushStackEntry(this.props);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      StatusBar.popStackEntry(this._stackEntry);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      this._stackEntry = StatusBar.replaceStackEntry(this._stackEntry, this.props);
    }
  }, {
    key: "render",
    value: function render() {
      return null;
    }
  }], [{
    key: "setHidden",
    value: function setHidden(hidden, animation) {
      animation = animation || 'none';
      StatusBar._defaultProps.hidden.value = hidden;
      if (_Platform.default.OS === 'ios') {
        _NativeStatusBarManagerIOS.default.setHidden(hidden, animation);
      } else if (_Platform.default.OS === 'android') {
        _NativeStatusBarManagerAndroid.default.setHidden(hidden);
      }
    }
  }, {
    key: "setBarStyle",
    value: function setBarStyle(style, animated) {
      animated = animated || false;
      StatusBar._defaultProps.barStyle.value = style;
      if (_Platform.default.OS === 'ios') {
        _NativeStatusBarManagerIOS.default.setStyle(style, animated);
      } else if (_Platform.default.OS === 'android') {
        _NativeStatusBarManagerAndroid.default.setStyle(style);
      }
    }
  }, {
    key: "setNetworkActivityIndicatorVisible",
    value: function setNetworkActivityIndicatorVisible(visible) {
      if (_Platform.default.OS !== 'ios') {
        console.warn('`setNetworkActivityIndicatorVisible` is only available on iOS');
        return;
      }
      StatusBar._defaultProps.networkActivityIndicatorVisible = visible;
      _NativeStatusBarManagerIOS.default.setNetworkActivityIndicatorVisible(visible);
    }
  }, {
    key: "setBackgroundColor",
    value: function setBackgroundColor(color, animated) {
      if (_Platform.default.OS !== 'android') {
        console.warn('`setBackgroundColor` is only available on Android');
        return;
      }
      animated = animated || false;
      StatusBar._defaultProps.backgroundColor.value = color;
      var processedColor = (0, _processColor.default)(color);
      if (processedColor == null) {
        console.warn(`\`StatusBar.setBackgroundColor\`: Color ${color} parsed to null or undefined`);
        return;
      }
      (0, _invariant.default)(typeof processedColor === 'number', 'Unexpected color given for StatusBar.setBackgroundColor');
      _NativeStatusBarManagerAndroid.default.setColor(processedColor, animated);
    }
  }, {
    key: "setTranslucent",
    value: function setTranslucent(translucent) {
      if (_Platform.default.OS !== 'android') {
        console.warn('`setTranslucent` is only available on Android');
        return;
      }
      StatusBar._defaultProps.translucent = translucent;
      _NativeStatusBarManagerAndroid.default.setTranslucent(translucent);
    }
  }, {
    key: "pushStackEntry",
    value: function pushStackEntry(props) {
      var entry = createStackEntry(props);
      StatusBar._propsStack.push(entry);
      StatusBar._updatePropsStack();
      return entry;
    }
  }, {
    key: "popStackEntry",
    value: function popStackEntry(entry) {
      var index = StatusBar._propsStack.indexOf(entry);
      if (index !== -1) {
        StatusBar._propsStack.splice(index, 1);
      }
      StatusBar._updatePropsStack();
    }
  }, {
    key: "replaceStackEntry",
    value: function replaceStackEntry(entry, props) {
      var newEntry = createStackEntry(props);
      var index = StatusBar._propsStack.indexOf(entry);
      if (index !== -1) {
        StatusBar._propsStack[index] = newEntry;
      }
      StatusBar._updatePropsStack();
      return newEntry;
    }
  }]);
  return StatusBar;
}(React.Component);
_class = StatusBar;
StatusBar._propsStack = [];
StatusBar._defaultProps = createStackEntry({
  backgroundColor: _Platform.default.OS === 'android' ? (_NativeStatusBarManag = _NativeStatusBarManagerAndroid.default.getConstants().DEFAULT_BACKGROUND_COLOR) != null ? _NativeStatusBarManag : 'black' : 'black',
  barStyle: 'default',
  translucent: false,
  hidden: false,
  networkActivityIndicatorVisible: false
});
StatusBar._updateImmediate = null;
StatusBar._currentValues = null;
StatusBar.currentHeight = _Platform.default.OS === 'android' ? _NativeStatusBarManagerAndroid.default.getConstants().HEIGHT : null;
StatusBar._updatePropsStack = function () {
  clearImmediate(_class._updateImmediate);
  _class._updateImmediate = setImmediate(function () {
    var oldProps = _class._currentValues;
    var mergedProps = mergePropsStack(_class._propsStack, _class._defaultProps);
    if (_Platform.default.OS === 'ios') {
      if (!oldProps || oldProps.barStyle.value !== mergedProps.barStyle.value) {
        _NativeStatusBarManagerIOS.default.setStyle(mergedProps.barStyle.value, mergedProps.barStyle.animated || false);
      }
      if (!oldProps || oldProps.hidden.value !== mergedProps.hidden.value) {
        _NativeStatusBarManagerIOS.default.setHidden(mergedProps.hidden.value, mergedProps.hidden.animated ? mergedProps.hidden.transition : 'none');
      }
      if (!oldProps || oldProps.networkActivityIndicatorVisible !== mergedProps.networkActivityIndicatorVisible) {
        _NativeStatusBarManagerIOS.default.setNetworkActivityIndicatorVisible(mergedProps.networkActivityIndicatorVisible);
      }
    } else if (_Platform.default.OS === 'android') {
      _NativeStatusBarManagerAndroid.default.setStyle(mergedProps.barStyle.value);
      var processedColor = (0, _processColor.default)(mergedProps.backgroundColor.value);
      if (processedColor == null) {
        console.warn(`\`StatusBar._updatePropsStack\`: Color ${mergedProps.backgroundColor.value} parsed to null or undefined`);
      } else {
        (0, _invariant.default)(typeof processedColor === 'number', 'Unexpected color given in StatusBar._updatePropsStack');
        _NativeStatusBarManagerAndroid.default.setColor(processedColor, mergedProps.backgroundColor.animated);
      }
      if (!oldProps || oldProps.hidden.value !== mergedProps.hidden.value) {
        _NativeStatusBarManagerAndroid.default.setHidden(mergedProps.hidden.value);
      }
      if (!oldProps || oldProps.translucent !== mergedProps.translucent || mergedProps.translucent) {
        _NativeStatusBarManagerAndroid.default.setTranslucent(mergedProps.translucent);
      }
    }
    _class._currentValues = mergedProps;
  });
};
module.exports = StatusBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcHJvY2Vzc0NvbG9yIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfUGxhdGZvcm0iLCJfTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQiLCJfTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUyIsIl9pbnZhcmlhbnQiLCJSZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX2NsYXNzIiwiX05hdGl2ZVN0YXR1c0Jhck1hbmFnIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwibm9kZUludGVyb3AiLCJXZWFrTWFwIiwiY2FjaGVCYWJlbEludGVyb3AiLCJjYWNoZU5vZGVJbnRlcm9wIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjYWNoZSIsImhhcyIsImdldCIsIm5ld09iaiIsImhhc1Byb3BlcnR5RGVzY3JpcHRvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsInNldCIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCJoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIl9jcmVhdGVTdXBlckludGVybmFsIiwiU3VwZXIiLCJfZ2V0UHJvdG90eXBlT2YyIiwicmVzdWx0IiwiTmV3VGFyZ2V0IiwiY29uc3RydWN0b3IiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJzaGFtIiwiUHJveHkiLCJCb29sZWFuIiwidmFsdWVPZiIsImUiLCJvd25LZXlzIiwiciIsInQiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImVudW1lcmFibGUiLCJwdXNoIiwiX29iamVjdFNwcmVhZCIsImxlbmd0aCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJtZXJnZVByb3BzU3RhY2siLCJwcm9wc1N0YWNrIiwiZGVmYXVsdFZhbHVlcyIsInJlZHVjZSIsInByZXYiLCJjdXIiLCJwcm9wIiwiY3JlYXRlU3RhY2tFbnRyeSIsInByb3BzIiwiX3Byb3BzJGFuaW1hdGVkIiwiX3Byb3BzJHNob3dIaWRlVHJhbnNpIiwiYW5pbWF0ZWQiLCJzaG93SGlkZVRyYW5zaXRpb24iLCJiYWNrZ3JvdW5kQ29sb3IiLCJ2YWx1ZSIsImJhclN0eWxlIiwidHJhbnNsdWNlbnQiLCJoaWRkZW4iLCJ0cmFuc2l0aW9uIiwibmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSIsIlN0YXR1c0JhciIsIl9SZWFjdCRDb21wb25lbnQiLCJfaW5oZXJpdHMyIiwiX3N1cGVyIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2syIiwiX2xlbiIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJjb25jYXQiLCJfc3RhY2tFbnRyeSIsIl9jcmVhdGVDbGFzczIiLCJjb21wb25lbnREaWRNb3VudCIsInB1c2hTdGFja0VudHJ5IiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJwb3BTdGFja0VudHJ5IiwiY29tcG9uZW50RGlkVXBkYXRlIiwicmVwbGFjZVN0YWNrRW50cnkiLCJyZW5kZXIiLCJzZXRIaWRkZW4iLCJhbmltYXRpb24iLCJfZGVmYXVsdFByb3BzIiwiUGxhdGZvcm0iLCJPUyIsIk5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1MiLCJOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZCIsInNldEJhclN0eWxlIiwic3R5bGUiLCJzZXRTdHlsZSIsInNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUiLCJ2aXNpYmxlIiwiY29uc29sZSIsIndhcm4iLCJzZXRCYWNrZ3JvdW5kQ29sb3IiLCJjb2xvciIsInByb2Nlc3NlZENvbG9yIiwicHJvY2Vzc0NvbG9yIiwiaW52YXJpYW50Iiwic2V0Q29sb3IiLCJzZXRUcmFuc2x1Y2VudCIsImVudHJ5IiwiX3Byb3BzU3RhY2siLCJfdXBkYXRlUHJvcHNTdGFjayIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsIm5ld0VudHJ5IiwiQ29tcG9uZW50IiwiZ2V0Q29uc3RhbnRzIiwiREVGQVVMVF9CQUNLR1JPVU5EX0NPTE9SIiwiX3VwZGF0ZUltbWVkaWF0ZSIsIl9jdXJyZW50VmFsdWVzIiwiY3VycmVudEhlaWdodCIsIkhFSUdIVCIsImNsZWFySW1tZWRpYXRlIiwic2V0SW1tZWRpYXRlIiwib2xkUHJvcHMiLCJtZXJnZWRQcm9wcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJTdGF0dXNCYXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93XG4gKi9cblxuaW1wb3J0IHR5cGUge0NvbG9yVmFsdWV9IGZyb20gJy4uLy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCc7XG5cbmltcG9ydCBwcm9jZXNzQ29sb3IgZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9wcm9jZXNzQ29sb3InO1xuaW1wb3J0IFBsYXRmb3JtIGZyb20gJy4uLy4uL1V0aWxpdGllcy9QbGF0Zm9ybSc7XG5pbXBvcnQgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQgZnJvbSAnLi9OYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZCc7XG5pbXBvcnQgTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUyBmcm9tICcuL05hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1MnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG4vKipcbiAqIFN0YXR1cyBiYXIgc3R5bGVcbiAqL1xuZXhwb3J0IHR5cGUgU3RhdHVzQmFyU3R5bGUgPSAkS2V5czx7XG4gIC8qKlxuICAgKiBEZWZhdWx0IHN0YXR1cyBiYXIgc3R5bGUgKGRhcmsgZm9yIGlPUywgbGlnaHQgZm9yIEFuZHJvaWQpXG4gICAqL1xuICBkZWZhdWx0OiBzdHJpbmcsXG4gIC8qKlxuICAgKiBEYXJrIGJhY2tncm91bmQsIHdoaXRlIHRleHRzIGFuZCBpY29uc1xuICAgKi9cbiAgJ2xpZ2h0LWNvbnRlbnQnOiBzdHJpbmcsXG4gIC8qKlxuICAgKiBMaWdodCBiYWNrZ3JvdW5kLCBkYXJrIHRleHRzIGFuZCBpY29uc1xuICAgKi9cbiAgJ2RhcmstY29udGVudCc6IHN0cmluZyxcbiAgLi4uXG59PjtcblxuLyoqXG4gKiBTdGF0dXMgYmFyIGFuaW1hdGlvblxuICovXG5leHBvcnQgdHlwZSBTdGF0dXNCYXJBbmltYXRpb24gPSAkS2V5czx7XG4gIC8qKlxuICAgKiBObyBhbmltYXRpb25cbiAgICovXG4gIG5vbmU6IHN0cmluZyxcbiAgLyoqXG4gICAqIEZhZGUgYW5pbWF0aW9uXG4gICAqL1xuICBmYWRlOiBzdHJpbmcsXG4gIC8qKlxuICAgKiBTbGlkZSBhbmltYXRpb25cbiAgICovXG4gIHNsaWRlOiBzdHJpbmcsXG4gIC4uLlxufT47XG5cbnR5cGUgQW5kcm9pZFByb3BzID0gJFJlYWRPbmx5PHt8XG4gIC8qKlxuICAgKiBUaGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgc3RhdHVzIGJhci5cbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIGJhY2tncm91bmRDb2xvcj86ID9Db2xvclZhbHVlLFxuICAvKipcbiAgICogSWYgdGhlIHN0YXR1cyBiYXIgaXMgdHJhbnNsdWNlbnQuXG4gICAqIFdoZW4gdHJhbnNsdWNlbnQgaXMgc2V0IHRvIHRydWUsIHRoZSBhcHAgd2lsbCBkcmF3IHVuZGVyIHRoZSBzdGF0dXMgYmFyLlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHVzaW5nIGEgc2VtaSB0cmFuc3BhcmVudCBzdGF0dXMgYmFyIGNvbG9yLlxuICAgKlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgdHJhbnNsdWNlbnQ/OiA/Ym9vbGVhbixcbnx9PjtcblxudHlwZSBJT1NQcm9wcyA9ICRSZWFkT25seTx7fFxuICAvKipcbiAgICogSWYgdGhlIG5ldHdvcmsgYWN0aXZpdHkgaW5kaWNhdG9yIHNob3VsZCBiZSB2aXNpYmxlLlxuICAgKlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBuZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBUaGUgdHJhbnNpdGlvbiBlZmZlY3Qgd2hlbiBzaG93aW5nIGFuZCBoaWRpbmcgdGhlIHN0YXR1cyBiYXIgdXNpbmcgdGhlIGBoaWRkZW5gXG4gICAqIHByb3AuIERlZmF1bHRzIHRvICdmYWRlJy5cbiAgICpcbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAgc2hvd0hpZGVUcmFuc2l0aW9uPzogPygnZmFkZScgfCAnc2xpZGUnIHwgJ25vbmUnKSxcbnx9PjtcblxudHlwZSBQcm9wcyA9ICRSZWFkT25seTx7fFxuICAuLi5BbmRyb2lkUHJvcHMsXG4gIC4uLklPU1Byb3BzLFxuICAvKipcbiAgICogSWYgdGhlIHN0YXR1cyBiYXIgaXMgaGlkZGVuLlxuICAgKi9cbiAgaGlkZGVuPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBJZiB0aGUgdHJhbnNpdGlvbiBiZXR3ZWVuIHN0YXR1cyBiYXIgcHJvcGVydHkgY2hhbmdlcyBzaG91bGQgYmUgYW5pbWF0ZWQuXG4gICAqIFN1cHBvcnRlZCBmb3IgYmFja2dyb3VuZENvbG9yLCBiYXJTdHlsZSBhbmQgaGlkZGVuLlxuICAgKi9cbiAgYW5pbWF0ZWQ/OiA/Ym9vbGVhbixcbiAgLyoqXG4gICAqIFNldHMgdGhlIGNvbG9yIG9mIHRoZSBzdGF0dXMgYmFyIHRleHQuXG4gICAqL1xuICBiYXJTdHlsZT86ID8oJ2RlZmF1bHQnIHwgJ2xpZ2h0LWNvbnRlbnQnIHwgJ2RhcmstY29udGVudCcpLFxufH0+O1xuXG4vKipcbiAqIE1lcmdlcyB0aGUgcHJvcCBzdGFjayB3aXRoIHRoZSBkZWZhdWx0IHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VQcm9wc1N0YWNrKFxuICBwcm9wc1N0YWNrOiBBcnJheTxPYmplY3Q+LFxuICBkZWZhdWx0VmFsdWVzOiBPYmplY3QsXG4pOiBPYmplY3Qge1xuICByZXR1cm4gcHJvcHNTdGFjay5yZWR1Y2UoXG4gICAgKHByZXYsIGN1cikgPT4ge1xuICAgICAgZm9yIChjb25zdCBwcm9wIGluIGN1cikge1xuICAgICAgICBpZiAoY3VyW3Byb3BdICE9IG51bGwpIHtcbiAgICAgICAgICBwcmV2W3Byb3BdID0gY3VyW3Byb3BdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJldjtcbiAgICB9LFxuICAgIHsuLi5kZWZhdWx0VmFsdWVzfSxcbiAgKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0byBpbnNlcnQgaW4gdGhlIHByb3BzIHN0YWNrIGZyb20gdGhlIHByb3BzXG4gKiBhbmQgdGhlIHRyYW5zaXRpb24vYW5pbWF0aW9uIGluZm8uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVN0YWNrRW50cnkocHJvcHM6IGFueSk6IGFueSB7XG4gIGNvbnN0IGFuaW1hdGVkID0gcHJvcHMuYW5pbWF0ZWQgPz8gZmFsc2U7XG4gIGNvbnN0IHNob3dIaWRlVHJhbnNpdGlvbiA9IHByb3BzLnNob3dIaWRlVHJhbnNpdGlvbiA/PyAnZmFkZSc7XG4gIHJldHVybiB7XG4gICAgYmFja2dyb3VuZENvbG9yOlxuICAgICAgcHJvcHMuYmFja2dyb3VuZENvbG9yICE9IG51bGxcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMuYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgYW5pbWF0ZWQsXG4gICAgICAgICAgfVxuICAgICAgICA6IG51bGwsXG4gICAgYmFyU3R5bGU6XG4gICAgICBwcm9wcy5iYXJTdHlsZSAhPSBudWxsXG4gICAgICAgID8ge1xuICAgICAgICAgICAgdmFsdWU6IHByb3BzLmJhclN0eWxlLFxuICAgICAgICAgICAgYW5pbWF0ZWQsXG4gICAgICAgICAgfVxuICAgICAgICA6IG51bGwsXG4gICAgdHJhbnNsdWNlbnQ6IHByb3BzLnRyYW5zbHVjZW50LFxuICAgIGhpZGRlbjpcbiAgICAgIHByb3BzLmhpZGRlbiAhPSBudWxsXG4gICAgICAgID8ge1xuICAgICAgICAgICAgdmFsdWU6IHByb3BzLmhpZGRlbixcbiAgICAgICAgICAgIGFuaW1hdGVkLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogc2hvd0hpZGVUcmFuc2l0aW9uLFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsLFxuICAgIG5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGU6IHByb3BzLm5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUsXG4gIH07XG59XG5cbi8qKlxuICogQ29tcG9uZW50IHRvIGNvbnRyb2wgdGhlIGFwcCBzdGF0dXMgYmFyLlxuICpcbiAqICMjIyBVc2FnZSB3aXRoIE5hdmlnYXRvclxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGhhdmUgbXVsdGlwbGUgYFN0YXR1c0JhcmAgY29tcG9uZW50cyBtb3VudGVkIGF0IHRoZSBzYW1lXG4gKiB0aW1lLiBUaGUgcHJvcHMgd2lsbCBiZSBtZXJnZWQgaW4gdGhlIG9yZGVyIHRoZSBgU3RhdHVzQmFyYCBjb21wb25lbnRzIHdlcmVcbiAqIG1vdW50ZWQuIE9uZSB1c2UgY2FzZSBpcyB0byBzcGVjaWZ5IHN0YXR1cyBiYXIgc3R5bGVzIHBlciByb3V0ZSB1c2luZyBgTmF2aWdhdG9yYC5cbiAqXG4gKiBgYGBcbiAqICA8Vmlldz5cbiAqICAgIDxTdGF0dXNCYXJcbiAqICAgICAgYmFja2dyb3VuZENvbG9yPVwiYmx1ZVwiXG4gKiAgICAgIGJhclN0eWxlPVwibGlnaHQtY29udGVudFwiXG4gKiAgICAvPlxuICogICAgPE5hdmlnYXRvclxuICogICAgICBpbml0aWFsUm91dGU9e3tzdGF0dXNCYXJIaWRkZW46IHRydWV9fVxuICogICAgICByZW5kZXJTY2VuZT17KHJvdXRlLCBuYXZpZ2F0b3IpID0+XG4gKiAgICAgICAgPFZpZXc+XG4gKiAgICAgICAgICA8U3RhdHVzQmFyIGhpZGRlbj17cm91dGUuc3RhdHVzQmFySGlkZGVufSAvPlxuICogICAgICAgICAgLi4uXG4gKiAgICAgICAgPC9WaWV3PlxuICogICAgICB9XG4gKiAgICAvPlxuICogIDwvVmlldz5cbiAqIGBgYFxuICpcbiAqICMjIyBJbXBlcmF0aXZlIEFQSVxuICpcbiAqIEZvciBjYXNlcyB3aGVyZSB1c2luZyBhIGNvbXBvbmVudCBpcyBub3QgaWRlYWwsIHRoZXJlIGFyZSBzdGF0aWMgbWV0aG9kc1xuICogdG8gbWFuaXB1bGF0ZSB0aGUgYFN0YXR1c0JhcmAgZGlzcGxheSBzdGFjay4gVGhlc2UgbWV0aG9kcyBoYXZlIHRoZSBzYW1lXG4gKiBiZWhhdmlvciBhcyBtb3VudGluZyBhbmQgdW5tb3VudGluZyBhIGBTdGF0dXNCYXJgIGNvbXBvbmVudC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgeW91IGNhbiBjYWxsIGBTdGF0dXNCYXIucHVzaFN0YWNrRW50cnlgIHRvIHVwZGF0ZSB0aGUgc3RhdHVzIGJhclxuICogYmVmb3JlIGxhdW5jaGluZyBhIHRoaXJkLXBhcnR5IG5hdGl2ZSBVSSBjb21wb25lbnQsIGFuZCB0aGVuIGNhbGxcbiAqIGBTdGF0dXNCYXIucG9wU3RhY2tFbnRyeWAgd2hlbiBjb21wbGV0ZWQuXG4gKlxuICogYGBgXG4gKiBjb25zdCBvcGVuVGhpcmRQYXJ0eUJ1Z1JlcG9ydGVyID0gYXN5bmMgKCkgPT4ge1xuICogICAvLyBUaGUgYnVnIHJlcG9ydGVyIGhhcyBhIGRhcmsgYmFja2dyb3VuZCwgc28gd2UgcHVzaCBhIG5ldyBzdGF0dXMgYmFyIHN0eWxlLlxuICogICBjb25zdCBzdGFja0VudHJ5ID0gU3RhdHVzQmFyLnB1c2hTdGFja0VudHJ5KHtiYXJTdHlsZTogJ2xpZ2h0LWNvbnRlbnQnfSk7XG4gKlxuICogICAvLyBgb3BlbmAgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBVSSBpcyBkaXNtaXNzZWQuXG4gKiAgIGF3YWl0IEJ1Z1JlcG9ydGVyLm9wZW4oKTtcbiAqXG4gKiAgIC8vIERvbid0IGZvcmdldCB0byBjYWxsIGBwb3BTdGFja0VudHJ5YCB3aGVuIHlvdSdyZSBkb25lLlxuICogICBTdGF0dXNCYXIucG9wU3RhY2tFbnRyeShzdGFja0VudHJ5KTtcbiAqIH07XG4gKiBgYGBcbiAqXG4gKiBUaGVyZSBpcyBhIGxlZ2FjeSBpbXBlcmF0aXZlIEFQSSB0aGF0IGVuYWJsZXMgeW91IHRvIG1hbnVhbGx5IHVwZGF0ZSB0aGVcbiAqIHN0YXR1cyBiYXIgc3R5bGVzLiBIb3dldmVyLCB0aGUgbGVnYWN5IEFQSSBkb2VzIG5vdCB1cGRhdGUgdGhlIGludGVybmFsXG4gKiBgU3RhdHVzQmFyYCBkaXNwbGF5IHN0YWNrLCB3aGljaCBtZWFucyB0aGF0IGFueSBjaGFuZ2VzIHdpbGwgYmUgb3ZlcnJpZGRlblxuICogd2hlbmV2ZXIgYSBgU3RhdHVzQmFyYCBjb21wb25lbnQgaXMgbW91bnRlZCBvciB1bm1vdW50ZWQuXG4gKlxuICogSXQgaXMgc3Ryb25nbHkgYWR2aXNlZCB0aGF0IHlvdSB1c2UgYHB1c2hTdGFja0VudHJ5YCwgYHBvcFN0YWNrRW50cnlgLCBvclxuICogYHJlcGxhY2VTdGFja0VudHJ5YCBpbnN0ZWFkIG9mIHRoZSBzdGF0aWMgbWV0aG9kcyBiZWdpbm5pbmcgd2l0aCBgc2V0YC5cbiAqXG4gKiAjIyMgQ29uc3RhbnRzXG4gKlxuICogYGN1cnJlbnRIZWlnaHRgIChBbmRyb2lkIG9ubHkpIFRoZSBoZWlnaHQgb2YgdGhlIHN0YXR1cyBiYXIuXG4gKi9cbmNsYXNzIFN0YXR1c0JhciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xuICBzdGF0aWMgX3Byb3BzU3RhY2s6IEFycmF5PGFueT4gPSBbXTtcblxuICBzdGF0aWMgX2RlZmF1bHRQcm9wczogYW55ID0gY3JlYXRlU3RhY2tFbnRyeSh7XG4gICAgYmFja2dyb3VuZENvbG9yOlxuICAgICAgUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJ1xuICAgICAgICA/IE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLmdldENvbnN0YW50cygpXG4gICAgICAgICAgICAuREVGQVVMVF9CQUNLR1JPVU5EX0NPTE9SID8/ICdibGFjaydcbiAgICAgICAgOiAnYmxhY2snLFxuICAgIGJhclN0eWxlOiAnZGVmYXVsdCcsXG4gICAgdHJhbnNsdWNlbnQ6IGZhbHNlLFxuICAgIGhpZGRlbjogZmFsc2UsXG4gICAgbmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZTogZmFsc2UsXG4gIH0pO1xuXG4gIC8vIFRpbWVyIGZvciB1cGRhdGluZyB0aGUgbmF0aXZlIG1vZHVsZSB2YWx1ZXMgYXQgdGhlIGVuZCBvZiB0aGUgZnJhbWUuXG4gIC8vICRGbG93Rml4TWVbbWlzc2luZy1sb2NhbC1hbm5vdF1cbiAgc3RhdGljIF91cGRhdGVJbW1lZGlhdGUgPSBudWxsO1xuXG4gIC8vIFRoZSBjdXJyZW50IG1lcmdlZCB2YWx1ZXMgZnJvbSB0aGUgcHJvcHMgc3RhY2suXG4gIC8vICRGbG93Rml4TWVbbWlzc2luZy1sb2NhbC1hbm5vdF1cbiAgc3RhdGljIF9jdXJyZW50VmFsdWVzID0gbnVsbDtcblxuICAvLyBUT0RPKGphbmljKTogUHJvdmlkZSBhIHJlYWwgQVBJIHRvIGRlYWwgd2l0aCBzdGF0dXMgYmFyIGhlaWdodC4gU2VlIHRoZVxuICAvLyBkaXNjdXNzaW9uIGluICM2MTk1LlxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgaGVpZ2h0IG9mIHRoZSBzdGF0dXMgYmFyIG9uIHRoZSBkZXZpY2UuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICBzdGF0aWMgY3VycmVudEhlaWdodDogP251bWJlciA9XG4gICAgUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJ1xuICAgICAgPyBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5nZXRDb25zdGFudHMoKS5IRUlHSFRcbiAgICAgIDogbnVsbDtcblxuICAvLyBQcm92aWRlIGFuIGltcGVyYXRpdmUgQVBJIGFzIHN0YXRpYyBmdW5jdGlvbnMgb2YgdGhlIGNvbXBvbmVudC5cbiAgLy8gU2VlIHRoZSBjb3JyZXNwb25kaW5nIHByb3AgZm9yIG1vcmUgZGV0YWlsLlxuXG4gIC8qKlxuICAgKiBTaG93IG9yIGhpZGUgdGhlIHN0YXR1cyBiYXJcbiAgICogQHBhcmFtIGhpZGRlbiBIaWRlIHRoZSBzdGF0dXMgYmFyLlxuICAgKiBAcGFyYW0gYW5pbWF0aW9uIE9wdGlvbmFsIGFuaW1hdGlvbiB3aGVuXG4gICAqICAgIGNoYW5naW5nIHRoZSBzdGF0dXMgYmFyIGhpZGRlbiBwcm9wZXJ0eS5cbiAgICovXG4gIHN0YXRpYyBzZXRIaWRkZW4oaGlkZGVuOiBib29sZWFuLCBhbmltYXRpb24/OiBTdGF0dXNCYXJBbmltYXRpb24pIHtcbiAgICBhbmltYXRpb24gPSBhbmltYXRpb24gfHwgJ25vbmUnO1xuICAgIFN0YXR1c0Jhci5fZGVmYXVsdFByb3BzLmhpZGRlbi52YWx1ZSA9IGhpZGRlbjtcbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdpb3MnKSB7XG4gICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TLnNldEhpZGRlbihoaWRkZW4sIGFuaW1hdGlvbik7XG4gICAgfSBlbHNlIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5zZXRIaWRkZW4oaGlkZGVuKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzdGF0dXMgYmFyIHN0eWxlXG4gICAqIEBwYXJhbSBzdHlsZSBTdGF0dXMgYmFyIHN0eWxlIHRvIHNldFxuICAgKiBAcGFyYW0gYW5pbWF0ZWQgQW5pbWF0ZSB0aGUgc3R5bGUgY2hhbmdlLlxuICAgKi9cbiAgc3RhdGljIHNldEJhclN0eWxlKHN0eWxlOiBTdGF0dXNCYXJTdHlsZSwgYW5pbWF0ZWQ/OiBib29sZWFuKSB7XG4gICAgYW5pbWF0ZWQgPSBhbmltYXRlZCB8fCBmYWxzZTtcbiAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcy5iYXJTdHlsZS52YWx1ZSA9IHN0eWxlO1xuICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2lvcycpIHtcbiAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1Muc2V0U3R5bGUoc3R5bGUsIGFuaW1hdGVkKTtcbiAgICB9IGVsc2UgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldFN0eWxlKHN0eWxlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29udHJvbCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbmV0d29yayBhY3Rpdml0eSBpbmRpY2F0b3JcbiAgICogQHBhcmFtIHZpc2libGUgU2hvdyB0aGUgaW5kaWNhdG9yLlxuICAgKi9cbiAgc3RhdGljIHNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUodmlzaWJsZTogYm9vbGVhbikge1xuICAgIGlmIChQbGF0Zm9ybS5PUyAhPT0gJ2lvcycpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ2BzZXROZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlYCBpcyBvbmx5IGF2YWlsYWJsZSBvbiBpT1MnLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU3RhdHVzQmFyLl9kZWZhdWx0UHJvcHMubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSA9IHZpc2libGU7XG4gICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUy5zZXROZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlKHZpc2libGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIHN0YXR1cyBiYXJcbiAgICogQHBhcmFtIGNvbG9yIEJhY2tncm91bmQgY29sb3IuXG4gICAqIEBwYXJhbSBhbmltYXRlZCBBbmltYXRlIHRoZSBzdHlsZSBjaGFuZ2UuXG4gICAqL1xuICBzdGF0aWMgc2V0QmFja2dyb3VuZENvbG9yKGNvbG9yOiBzdHJpbmcsIGFuaW1hdGVkPzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChQbGF0Zm9ybS5PUyAhPT0gJ2FuZHJvaWQnKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2BzZXRCYWNrZ3JvdW5kQ29sb3JgIGlzIG9ubHkgYXZhaWxhYmxlIG9uIEFuZHJvaWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYW5pbWF0ZWQgPSBhbmltYXRlZCB8fCBmYWxzZTtcbiAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcy5iYWNrZ3JvdW5kQ29sb3IudmFsdWUgPSBjb2xvcjtcblxuICAgIGNvbnN0IHByb2Nlc3NlZENvbG9yID0gcHJvY2Vzc0NvbG9yKGNvbG9yKTtcbiAgICBpZiAocHJvY2Vzc2VkQ29sb3IgPT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgXFxgU3RhdHVzQmFyLnNldEJhY2tncm91bmRDb2xvclxcYDogQ29sb3IgJHtjb2xvcn0gcGFyc2VkIHRvIG51bGwgb3IgdW5kZWZpbmVkYCxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGludmFyaWFudChcbiAgICAgIHR5cGVvZiBwcm9jZXNzZWRDb2xvciA9PT0gJ251bWJlcicsXG4gICAgICAnVW5leHBlY3RlZCBjb2xvciBnaXZlbiBmb3IgU3RhdHVzQmFyLnNldEJhY2tncm91bmRDb2xvcicsXG4gICAgKTtcblxuICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldENvbG9yKHByb2Nlc3NlZENvbG9yLCBhbmltYXRlZCk7XG4gIH1cblxuICAvKipcbiAgICogQ29udHJvbCB0aGUgdHJhbnNsdWNlbmN5IG9mIHRoZSBzdGF0dXMgYmFyXG4gICAqIEBwYXJhbSB0cmFuc2x1Y2VudCBTZXQgYXMgdHJhbnNsdWNlbnQuXG4gICAqL1xuICBzdGF0aWMgc2V0VHJhbnNsdWNlbnQodHJhbnNsdWNlbnQ6IGJvb2xlYW4pIHtcbiAgICBpZiAoUGxhdGZvcm0uT1MgIT09ICdhbmRyb2lkJykge1xuICAgICAgY29uc29sZS53YXJuKCdgc2V0VHJhbnNsdWNlbnRgIGlzIG9ubHkgYXZhaWxhYmxlIG9uIEFuZHJvaWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU3RhdHVzQmFyLl9kZWZhdWx0UHJvcHMudHJhbnNsdWNlbnQgPSB0cmFuc2x1Y2VudDtcbiAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5zZXRUcmFuc2x1Y2VudCh0cmFuc2x1Y2VudCk7XG4gIH1cblxuICAvKipcbiAgICogUHVzaCBhIFN0YXR1c0JhciBlbnRyeSBvbnRvIHRoZSBzdGFjay5cbiAgICogVGhlIHJldHVybiB2YWx1ZSBzaG91bGQgYmUgcGFzc2VkIHRvIGBwb3BTdGFja0VudHJ5YCB3aGVuIGNvbXBsZXRlLlxuICAgKlxuICAgKiBAcGFyYW0gcHJvcHMgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIFN0YXR1c0JhciBwcm9wcyB0byB1c2UgaW4gdGhlIHN0YWNrIGVudHJ5LlxuICAgKi9cbiAgc3RhdGljIHB1c2hTdGFja0VudHJ5KHByb3BzOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IGVudHJ5ID0gY3JlYXRlU3RhY2tFbnRyeShwcm9wcyk7XG4gICAgU3RhdHVzQmFyLl9wcm9wc1N0YWNrLnB1c2goZW50cnkpO1xuICAgIFN0YXR1c0Jhci5fdXBkYXRlUHJvcHNTdGFjaygpO1xuICAgIHJldHVybiBlbnRyeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQb3AgYSBTdGF0dXNCYXIgZW50cnkgZnJvbSB0aGUgc3RhY2suXG4gICAqXG4gICAqIEBwYXJhbSBlbnRyeSBFbnRyeSByZXR1cm5lZCBmcm9tIGBwdXNoU3RhY2tFbnRyeWAuXG4gICAqL1xuICBzdGF0aWMgcG9wU3RhY2tFbnRyeShlbnRyeTogYW55KSB7XG4gICAgY29uc3QgaW5kZXggPSBTdGF0dXNCYXIuX3Byb3BzU3RhY2suaW5kZXhPZihlbnRyeSk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgU3RhdHVzQmFyLl9wcm9wc1N0YWNrLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIFN0YXR1c0Jhci5fdXBkYXRlUHJvcHNTdGFjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgYW4gZXhpc3RpbmcgU3RhdHVzQmFyIHN0YWNrIGVudHJ5IHdpdGggbmV3IHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0gZW50cnkgRW50cnkgcmV0dXJuZWQgZnJvbSBgcHVzaFN0YWNrRW50cnlgIHRvIHJlcGxhY2UuXG4gICAqIEBwYXJhbSBwcm9wcyBPYmplY3QgY29udGFpbmluZyB0aGUgU3RhdHVzQmFyIHByb3BzIHRvIHVzZSBpbiB0aGUgcmVwbGFjZW1lbnQgc3RhY2sgZW50cnkuXG4gICAqL1xuICBzdGF0aWMgcmVwbGFjZVN0YWNrRW50cnkoZW50cnk6IGFueSwgcHJvcHM6IGFueSk6IGFueSB7XG4gICAgY29uc3QgbmV3RW50cnkgPSBjcmVhdGVTdGFja0VudHJ5KHByb3BzKTtcbiAgICBjb25zdCBpbmRleCA9IFN0YXR1c0Jhci5fcHJvcHNTdGFjay5pbmRleE9mKGVudHJ5KTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBTdGF0dXNCYXIuX3Byb3BzU3RhY2tbaW5kZXhdID0gbmV3RW50cnk7XG4gICAgfVxuICAgIFN0YXR1c0Jhci5fdXBkYXRlUHJvcHNTdGFjaygpO1xuICAgIHJldHVybiBuZXdFbnRyeTtcbiAgfVxuXG4gIC8vICRGbG93Rml4TWVbbWlzc2luZy1sb2NhbC1hbm5vdF1cbiAgX3N0YWNrRW50cnkgPSBudWxsO1xuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIEV2ZXJ5IHRpbWUgYSBTdGF0dXNCYXIgY29tcG9uZW50IGlzIG1vdW50ZWQsIHdlIHB1c2ggaXQncyBwcm9wIHRvIGEgc3RhY2tcbiAgICAvLyBhbmQgYWx3YXlzIHVwZGF0ZSB0aGUgbmF0aXZlIHN0YXR1cyBiYXIgd2l0aCB0aGUgcHJvcHMgZnJvbSB0aGUgdG9wIG9mIHRoZW5cbiAgICAvLyBzdGFjay4gVGhpcyBhbGxvd3MgaGF2aW5nIG11bHRpcGxlIFN0YXR1c0JhciBjb21wb25lbnRzIGFuZCB0aGUgb25lIHRoYXQgaXNcbiAgICAvLyBhZGRlZCBsYXN0IG9yIGlzIGRlZXBlciBpbiB0aGUgdmlldyBoaWVyYXJjaHkgd2lsbCBoYXZlIHByaW9yaXR5LlxuICAgIHRoaXMuX3N0YWNrRW50cnkgPSBTdGF0dXNCYXIucHVzaFN0YWNrRW50cnkodGhpcy5wcm9wcyk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAvLyBXaGVuIGEgU3RhdHVzQmFyIGlzIHVubW91bnRlZCwgcmVtb3ZlIGl0c2VsZiBmcm9tIHRoZSBzdGFjayBhbmQgdXBkYXRlXG4gICAgLy8gdGhlIG5hdGl2ZSBiYXIgd2l0aCB0aGUgbmV4dCBwcm9wcy5cbiAgICBTdGF0dXNCYXIucG9wU3RhY2tFbnRyeSh0aGlzLl9zdGFja0VudHJ5KTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICB0aGlzLl9zdGFja0VudHJ5ID0gU3RhdHVzQmFyLnJlcGxhY2VTdGFja0VudHJ5KFxuICAgICAgdGhpcy5fc3RhY2tFbnRyeSxcbiAgICAgIHRoaXMucHJvcHMsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBuYXRpdmUgc3RhdHVzIGJhciB3aXRoIHRoZSBwcm9wcyBmcm9tIHRoZSBzdGFjay5cbiAgICovXG4gIHN0YXRpYyBfdXBkYXRlUHJvcHNTdGFjayA9ICgpID0+IHtcbiAgICAvLyBTZW5kIHRoZSB1cGRhdGUgdG8gdGhlIG5hdGl2ZSBtb2R1bGUgb25seSBvbmNlIGF0IHRoZSBlbmQgb2YgdGhlIGZyYW1lLlxuICAgIGNsZWFySW1tZWRpYXRlKFN0YXR1c0Jhci5fdXBkYXRlSW1tZWRpYXRlKTtcbiAgICBTdGF0dXNCYXIuX3VwZGF0ZUltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZSgoKSA9PiB7XG4gICAgICBjb25zdCBvbGRQcm9wcyA9IFN0YXR1c0Jhci5fY3VycmVudFZhbHVlcztcbiAgICAgIGNvbnN0IG1lcmdlZFByb3BzID0gbWVyZ2VQcm9wc1N0YWNrKFxuICAgICAgICBTdGF0dXNCYXIuX3Byb3BzU3RhY2ssXG4gICAgICAgIFN0YXR1c0Jhci5fZGVmYXVsdFByb3BzLFxuICAgICAgKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBwcm9wcyB0aGF0IGhhdmUgY2hhbmdlZCB1c2luZyB0aGUgbWVyZ2VkIHZhbHVlcyBmcm9tIHRoZSBwcm9wcyBzdGFjay5cbiAgICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2lvcycpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFvbGRQcm9wcyB8fFxuICAgICAgICAgIG9sZFByb3BzLmJhclN0eWxlLnZhbHVlICE9PSBtZXJnZWRQcm9wcy5iYXJTdHlsZS52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TLnNldFN0eWxlKFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuYmFyU3R5bGUudmFsdWUsXG4gICAgICAgICAgICBtZXJnZWRQcm9wcy5iYXJTdHlsZS5hbmltYXRlZCB8fCBmYWxzZSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb2xkUHJvcHMgfHwgb2xkUHJvcHMuaGlkZGVuLnZhbHVlICE9PSBtZXJnZWRQcm9wcy5oaWRkZW4udmFsdWUpIHtcbiAgICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TLnNldEhpZGRlbihcbiAgICAgICAgICAgIG1lcmdlZFByb3BzLmhpZGRlbi52YWx1ZSxcbiAgICAgICAgICAgIG1lcmdlZFByb3BzLmhpZGRlbi5hbmltYXRlZFxuICAgICAgICAgICAgICA/IG1lcmdlZFByb3BzLmhpZGRlbi50cmFuc2l0aW9uXG4gICAgICAgICAgICAgIDogJ25vbmUnLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgIW9sZFByb3BzIHx8XG4gICAgICAgICAgb2xkUHJvcHMubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSAhPT1cbiAgICAgICAgICAgIG1lcmdlZFByb3BzLm5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUy5zZXROZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlKFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgICAgLy90b2RvKFQ2MDY4NDc4Nyk6IEFkZCBiYWNrIG9wdGltaXphdGlvbiB0byBvbmx5IHVwZGF0ZSBiYXIgc3R5bGUgYW5kXG4gICAgICAgIC8vYmFja2dyb3VuZCBjb2xvciBpZiB0aGUgbmV3IHZhbHVlIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBvbGQgdmFsdWUuXG4gICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldFN0eWxlKG1lcmdlZFByb3BzLmJhclN0eWxlLnZhbHVlKTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkQ29sb3IgPSBwcm9jZXNzQ29sb3IobWVyZ2VkUHJvcHMuYmFja2dyb3VuZENvbG9yLnZhbHVlKTtcbiAgICAgICAgaWYgKHByb2Nlc3NlZENvbG9yID09IG51bGwpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBgXFxgU3RhdHVzQmFyLl91cGRhdGVQcm9wc1N0YWNrXFxgOiBDb2xvciAke21lcmdlZFByb3BzLmJhY2tncm91bmRDb2xvci52YWx1ZX0gcGFyc2VkIHRvIG51bGwgb3IgdW5kZWZpbmVkYCxcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGludmFyaWFudChcbiAgICAgICAgICAgIHR5cGVvZiBwcm9jZXNzZWRDb2xvciA9PT0gJ251bWJlcicsXG4gICAgICAgICAgICAnVW5leHBlY3RlZCBjb2xvciBnaXZlbiBpbiBTdGF0dXNCYXIuX3VwZGF0ZVByb3BzU3RhY2snLFxuICAgICAgICAgICk7XG4gICAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuc2V0Q29sb3IoXG4gICAgICAgICAgICBwcm9jZXNzZWRDb2xvcixcbiAgICAgICAgICAgIG1lcmdlZFByb3BzLmJhY2tncm91bmRDb2xvci5hbmltYXRlZCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb2xkUHJvcHMgfHwgb2xkUHJvcHMuaGlkZGVuLnZhbHVlICE9PSBtZXJnZWRQcm9wcy5oaWRkZW4udmFsdWUpIHtcbiAgICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5zZXRIaWRkZW4obWVyZ2VkUHJvcHMuaGlkZGVuLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBY3Rpdml0aWVzIGFyZSBub3QgdHJhbnNsdWNlbnQgYnkgZGVmYXVsdCwgc28gYWx3YXlzIHNldCBpZiB0cnVlLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgIW9sZFByb3BzIHx8XG4gICAgICAgICAgb2xkUHJvcHMudHJhbnNsdWNlbnQgIT09IG1lcmdlZFByb3BzLnRyYW5zbHVjZW50IHx8XG4gICAgICAgICAgbWVyZ2VkUHJvcHMudHJhbnNsdWNlbnRcbiAgICAgICAgKSB7XG4gICAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuc2V0VHJhbnNsdWNlbnQobWVyZ2VkUHJvcHMudHJhbnNsdWNlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgcHJvcCB2YWx1ZXMuXG4gICAgICBTdGF0dXNCYXIuX2N1cnJlbnRWYWx1ZXMgPSBtZXJnZWRQcm9wcztcbiAgICB9KTtcbiAgfTtcblxuICByZW5kZXIoKTogUmVhY3QuTm9kZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdGF0dXNCYXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFZQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSw4QkFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsMEJBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFVBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLEtBQUEsR0FBQUMsdUJBQUEsQ0FBQU4sT0FBQTtBQUErQixJQUFBTyxNQUFBLEVBQUFDLHFCQUFBO0FBQUEsU0FBQUMseUJBQUFDLFdBQUEsZUFBQUMsT0FBQSxrQ0FBQUMsaUJBQUEsT0FBQUQsT0FBQSxRQUFBRSxnQkFBQSxPQUFBRixPQUFBLFlBQUFGLHdCQUFBLFlBQUFBLHlCQUFBQyxXQUFBLFdBQUFBLFdBQUEsR0FBQUcsZ0JBQUEsR0FBQUQsaUJBQUEsS0FBQUYsV0FBQTtBQUFBLFNBQUFKLHdCQUFBUSxHQUFBLEVBQUFKLFdBQUEsU0FBQUEsV0FBQSxJQUFBSSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxXQUFBRCxHQUFBLFFBQUFBLEdBQUEsb0JBQUFBLEdBQUEsd0JBQUFBLEdBQUEsNEJBQUFFLE9BQUEsRUFBQUYsR0FBQSxVQUFB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