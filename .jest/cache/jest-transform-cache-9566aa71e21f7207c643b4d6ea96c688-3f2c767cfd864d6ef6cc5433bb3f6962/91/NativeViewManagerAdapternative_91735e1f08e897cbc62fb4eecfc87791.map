{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_requireNativeModule","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","result","NewTarget","constructor","Reflect","construct","_possibleConstructorReturn2","sham","Proxy","Boolean","prototype","valueOf","call","nativeComponentsCache","Map","requireCachedNativeComponent","viewName","cachedNativeComponent","get","nativeComponent","requireNativeComponent","set","requireNativeViewManager","viewManagersMetadata","NativeModules","NativeUnimoduleProxy","viewManagerConfig","__DEV__","exportedViewManagerNames","join","console","warn","reactNativeViewName","ReactNativeComponent","NativeComponent","_React$PureComponent","_inherits2","_super","_this","_classCallCheck2","_len","args","Array","_key","concat","nativeTag","_createClass2","key","value","componentDidMount","findNodeHandle","render","React","createElement","props","PureComponent","displayName","nativeModule","requireNativeModule","nativeViewPrototype","ViewPrototype","assign","_unused"],"sources":["../src/NativeViewManagerAdapter.native.tsx"],"sourcesContent":["import React from 'react';\nimport { findNodeHandle, NativeModules, requireNativeComponent, HostComponent } from 'react-native';\n\nimport { requireNativeModule } from './requireNativeModule';\n\n// To make the transition from React Native's `requireNativeComponent` to Expo's\n// `requireNativeViewManager` as easy as possible, `requireNativeViewManager` is a drop-in\n// replacement for `requireNativeComponent`.\n//\n// For each view manager, we create a wrapper component that accepts all of the props available to\n// the author of the universal module. This wrapper component splits the props into two sets: props\n// passed to React Native's View (ex: style, testID) and custom view props, which are passed to the\n// adapter view component in a prop called `proxiedProperties`.\n\n/**\n * A map that caches registered native components.\n */\nconst nativeComponentsCache = new Map<string, HostComponent<any>>();\n\n/**\n * Requires a React Native component from cache if possible. This prevents\n * \"Tried to register two views with the same name\" errors on fast refresh, but\n * also when there are multiple versions of the same package with native component.\n */\nfunction requireCachedNativeComponent<Props>(viewName: string): HostComponent<Props> {\n  const cachedNativeComponent = nativeComponentsCache.get(viewName);\n\n  if (!cachedNativeComponent) {\n    const nativeComponent = requireNativeComponent<Props>(viewName);\n    nativeComponentsCache.set(viewName, nativeComponent);\n    return nativeComponent;\n  }\n  return cachedNativeComponent;\n}\n\n/**\n * A drop-in replacement for `requireNativeComponent`.\n */\nexport function requireNativeViewManager<P>(viewName: string): React.ComponentType<P> {\n  const { viewManagersMetadata } = NativeModules.NativeUnimoduleProxy;\n  const viewManagerConfig = viewManagersMetadata?.[viewName];\n\n  if (__DEV__ && !viewManagerConfig) {\n    const exportedViewManagerNames = Object.keys(viewManagersMetadata).join(', ');\n    console.warn(\n      `The native view manager required by name (${viewName}) from NativeViewManagerAdapter isn't exported by expo-modules-core. Views of this type may not render correctly. Exported view managers: [${exportedViewManagerNames}].`\n    );\n  }\n\n  // Set up the React Native native component, which is an adapter to the universal module's view\n  // manager\n  const reactNativeViewName = `ViewManagerAdapter_${viewName}`;\n  const ReactNativeComponent = requireCachedNativeComponent(reactNativeViewName);\n\n  class NativeComponent extends React.PureComponent<P> {\n    static displayName = viewName;\n\n    // This will be accessed from native when the prototype functions are called,\n    // in order to find the associated native view.\n    nativeTag: number | null = null;\n\n    componentDidMount(): void {\n      this.nativeTag = findNodeHandle(this);\n    }\n\n    render(): React.ReactNode {\n      return <ReactNativeComponent {...this.props} />;\n    }\n  }\n\n  try {\n    const nativeModule = requireNativeModule(viewName);\n    const nativeViewPrototype = nativeModule.ViewPrototype;\n\n    if (nativeViewPrototype) {\n      // Assign native view functions to the component prototype so they can be accessed from the ref.\n      Object.assign(NativeComponent.prototype, nativeViewPrototype);\n    }\n  } catch {\n    // `requireNativeModule` may throw an error when the native module cannot be found.\n    // In some tests we don't mock the entire modules, but we do want to mock native views. For now,\n    // until we still have to support the legacy modules proxy and don't have better ways to mock,\n    // let's just gracefully skip assigning the prototype functions.\n    // See: https://github.com/expo/expo/blob/main/packages/expo-modules-core/src/__tests__/NativeViewManagerAdapter-test.native.tsx\n  }\n\n  return NativeComponent;\n}\n"],"mappings":"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"}