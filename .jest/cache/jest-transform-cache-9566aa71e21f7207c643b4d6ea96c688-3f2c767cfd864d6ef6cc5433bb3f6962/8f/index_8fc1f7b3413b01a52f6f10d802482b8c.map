{"version":3,"names":["_xdate","_interopRequireDefault","require","_react","_interopRequireWildcard","_reactNative","_dateutils","_interface","_style","_WeekDaysNames","_week","_commons","_constants","_componentUpdater","_Context","_hooks","_jsxRuntime","_excluded","_excluded2","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","e","r","t","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","NUMBER_OF_PAGES","exports","NUM_OF_ITEMS","APPLY_ANDROID_FIX","constants","isAndroid","isRTL","WeekCalendar","props","calendarWidth","hideDayNames","current","theme","testID","markedDates","context","useContext","CalendarContext","_props$allowShadow","allowShadow","calendarListProps","_objectWithoutProperties2","_extractCalendarProps","extractCalendarProps","propsStyle","style","onDayPress","_extractCalendarProps2","firstDay","others","date","numberOfDays","updateSource","setDate","timelineLeftInset","visibleWeek","useRef","styleConstructor","items","getDatesArray","_useState","useState","_useState2","_slicedToArray2","listData","setListData","changedItems","list","currentIndex","useDidUpdate","_list$current","scrollToIndex","index","animated","UpdateSources","WEEK_SCROLL","pageIndex","findIndex","item","isCustomNumberOfDays","onSameDateRange","secondDay","firstDateInRange","sameWeek","_list$current2","onEndReached","containerWidth","useMemo","screenWidth","_onDayPress","useCallback","value","dateString","DAY_PRESS","getCurrentWeekMarkings","markings","dates","getWeekDates","reduce","acc","toMarkingFormat","weekStyle","width","renderItem","_ref2","currentContext","undefined","jsx","keyExtractor","renderWeekDaysNames","dayHeader","weekCalendarStyle","containerShadow","containerWrapper","containerStyle","week","weekCalendar","getItemLayout","_","offset","_list$current3","onViewableItemsChanged","_ref3","_viewableItems$","viewableItems","currItems","newDate","newDateOffset","indexOf","adjustedNewDate","viewabilityConfigCallbackPairs","viewabilityConfig","itemVisiblePercentThreshold","jsxs","View","children","container","FlatList","ref","data","horizontal","showsHorizontalScrollIndicator","pagingEnabled","scrollEnabled","initialScrollIndex","onEndReachedThreshold","getDateForDayRange","weekIndex","d","XDate","addDays","getDate","dayOfTheWeek","getDay","addWeeks","today","offsetFromNow","diffDays","isSameWeek","_toConsumableArray2","Array","map","displayName","_default"],"sources":["index.js"],"sourcesContent":["import XDate from 'xdate';\nimport React, { useCallback, useContext, useMemo, useRef, useState } from 'react';\nimport { FlatList, View } from 'react-native';\nimport { sameWeek, onSameDateRange, getWeekDates } from '../../dateutils';\nimport { toMarkingFormat } from '../../interface';\nimport styleConstructor from '../style';\nimport WeekDaysNames from '../../commons/WeekDaysNames';\nimport Week from '../week';\nimport { UpdateSources } from '../commons';\nimport constants from '../../commons/constants';\nimport { extractCalendarProps } from '../../componentUpdater';\nimport CalendarContext from '../Context';\nimport { useDidUpdate } from '../../hooks';\nexport const NUMBER_OF_PAGES = 6;\nconst NUM_OF_ITEMS = NUMBER_OF_PAGES * 2 + 1; // NUMBER_OF_PAGES before + NUMBER_OF_PAGES after + current\nconst APPLY_ANDROID_FIX = constants.isAndroid && constants.isRTL;\n/**\n * @description: Week calendar component\n * @note: Should be wrapped with 'CalendarProvider'\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst WeekCalendar = (props) => {\n    const { calendarWidth, hideDayNames, current, theme, testID, markedDates, } = props;\n    const context = useContext(CalendarContext);\n    const { allowShadow = true, ...calendarListProps } = props;\n    const { style: propsStyle, onDayPress, firstDay = 0, ...others } = extractCalendarProps(calendarListProps);\n    const { date, numberOfDays, updateSource, setDate, timelineLeftInset } = context;\n    const visibleWeek = useRef(date);\n    const style = useRef(styleConstructor(theme));\n    const items = useRef(getDatesArray(current ?? date, firstDay, numberOfDays));\n    const [listData, setListData] = useState(items.current);\n    const changedItems = useRef(constants.isRTL);\n    const list = useRef(null);\n    const currentIndex = useRef(NUMBER_OF_PAGES);\n    useDidUpdate(() => {\n        items.current = getDatesArray(date, firstDay, numberOfDays);\n        setListData(items.current);\n        visibleWeek.current = date;\n        list?.current?.scrollToIndex({ index: NUMBER_OF_PAGES, animated: false });\n    }, [numberOfDays]);\n    useDidUpdate(() => {\n        if (updateSource !== UpdateSources.WEEK_SCROLL) {\n            const pageIndex = items.current.findIndex(item => isCustomNumberOfDays(numberOfDays) ?\n                onSameDateRange({\n                    firstDay: item,\n                    secondDay: date,\n                    numberOfDays: numberOfDays,\n                    firstDateInRange: item\n                }) :\n                sameWeek(item, date, firstDay));\n            if (pageIndex !== currentIndex.current) {\n                if (pageIndex >= 0) {\n                    visibleWeek.current = items.current[pageIndex];\n                    currentIndex.current = pageIndex;\n                }\n                else {\n                    visibleWeek.current = date;\n                    currentIndex.current = NUMBER_OF_PAGES;\n                }\n                pageIndex <= 0 ? onEndReached() : list?.current?.scrollToIndex({ index: pageIndex, animated: false });\n            }\n        }\n    }, [date, updateSource]);\n    const containerWidth = useMemo(() => {\n        return calendarWidth ?? constants.screenWidth;\n    }, [calendarWidth]);\n    const _onDayPress = useCallback((value) => {\n        if (onDayPress) {\n            onDayPress(value);\n        }\n        else {\n            setDate?.(value.dateString, UpdateSources.DAY_PRESS);\n        }\n    }, [onDayPress]);\n    const getCurrentWeekMarkings = useCallback((date, markings) => {\n        if (!markings) {\n            return;\n        }\n        const dates = getWeekDates(date, firstDay);\n        return dates?.reduce((acc, date) => {\n            const dateString = toMarkingFormat(date);\n            return {\n                ...acc,\n                ...(markings[dateString] && { [dateString]: markings[dateString] }),\n            };\n        }, {});\n    }, []);\n    const weekStyle = useMemo(() => {\n        return [{ width: containerWidth }, propsStyle];\n    }, [containerWidth, propsStyle]);\n    const renderItem = useCallback(({ item }) => {\n        const currentContext = sameWeek(date, item, firstDay) ? context : undefined;\n        const markings = getCurrentWeekMarkings(item, markedDates);\n        return (<Week {...others} markedDates={markings} current={item} firstDay={firstDay} style={weekStyle} context={currentContext} onDayPress={_onDayPress} numberOfDays={numberOfDays} timelineLeftInset={timelineLeftInset}/>);\n    }, [firstDay, _onDayPress, context, date, markedDates]);\n    const keyExtractor = useCallback((item) => item, []);\n    const renderWeekDaysNames = useMemo(() => {\n        return (<WeekDaysNames firstDay={firstDay} style={style.current.dayHeader}/>);\n    }, [firstDay]);\n    const weekCalendarStyle = useMemo(() => {\n        return [\n            allowShadow && style.current.containerShadow,\n            !hideDayNames && style.current.containerWrapper\n        ];\n    }, [allowShadow, hideDayNames]);\n    const containerStyle = useMemo(() => {\n        return [style.current.week, style.current.weekCalendar];\n    }, []);\n    const getItemLayout = useCallback((_, index) => {\n        return {\n            length: containerWidth,\n            offset: containerWidth * index,\n            index\n        };\n    }, [containerWidth]);\n    const onEndReached = useCallback(() => {\n        changedItems.current = true;\n        items.current = (getDatesArray(visibleWeek.current, firstDay, numberOfDays));\n        setListData(items.current);\n        currentIndex.current = NUMBER_OF_PAGES;\n        list?.current?.scrollToIndex({ index: NUMBER_OF_PAGES, animated: false });\n    }, [firstDay, numberOfDays]);\n    const onViewableItemsChanged = useCallback(({ viewableItems }) => {\n        if (changedItems.current || viewableItems.length === 0) {\n            changedItems.current = false;\n            return;\n        }\n        const currItems = items.current;\n        const newDate = viewableItems[0]?.item;\n        if (newDate !== visibleWeek.current) {\n            if (APPLY_ANDROID_FIX) {\n                //in android RTL the item we see is the one in the opposite direction\n                const newDateOffset = -1 * (NUMBER_OF_PAGES - currItems.indexOf(newDate));\n                const adjustedNewDate = currItems[NUMBER_OF_PAGES - newDateOffset];\n                visibleWeek.current = adjustedNewDate;\n                currentIndex.current = currItems.indexOf(adjustedNewDate);\n                setDate(adjustedNewDate, UpdateSources.WEEK_SCROLL);\n                if (visibleWeek.current === currItems[currItems.length - 1]) {\n                    onEndReached();\n                }\n            }\n            else {\n                currentIndex.current = currItems.indexOf(newDate);\n                visibleWeek.current = newDate;\n                setDate(newDate, UpdateSources.WEEK_SCROLL);\n                if (visibleWeek.current === currItems[0]) {\n                    onEndReached();\n                }\n            }\n        }\n    }, [onEndReached]);\n    const viewabilityConfigCallbackPairs = useRef([{\n            viewabilityConfig: {\n                itemVisiblePercentThreshold: 20,\n            },\n            onViewableItemsChanged,\n        }]);\n    return (<View testID={testID} style={weekCalendarStyle}>\n      {!hideDayNames && (<View style={containerStyle}>\n          {renderWeekDaysNames}\n        </View>)}\n      <View style={style.current.container}>\n          <FlatList testID={`${testID}.list`} ref={list} style={style.current.container} data={listData} horizontal showsHorizontalScrollIndicator={false} pagingEnabled scrollEnabled renderItem={renderItem} keyExtractor={keyExtractor} initialScrollIndex={NUMBER_OF_PAGES} getItemLayout={getItemLayout} viewabilityConfigCallbackPairs={viewabilityConfigCallbackPairs.current} onEndReached={onEndReached} onEndReachedThreshold={1 / NUM_OF_ITEMS}/>\n      </View>\n    </View>);\n};\nfunction getDateForDayRange(date, weekIndex, numberOfDays) {\n    const d = new XDate(date);\n    if (weekIndex !== 0) {\n        d.addDays(numberOfDays * weekIndex);\n    }\n    return toMarkingFormat(d);\n}\nfunction getDate(date, firstDay, weekIndex, numberOfDays) {\n    const d = new XDate(date);\n    // get the first day of the week as date (for the on scroll mark)\n    let dayOfTheWeek = d.getDay();\n    if (dayOfTheWeek < firstDay && firstDay > 0) {\n        dayOfTheWeek = 7 + dayOfTheWeek;\n    }\n    if (weekIndex !== 0) {\n        d.addDays(firstDay - dayOfTheWeek);\n    }\n    const newDate = numberOfDays && numberOfDays > 1 ? d.addDays(weekIndex * numberOfDays) : d.addWeeks(weekIndex);\n    const today = new XDate();\n    const offsetFromNow = newDate.diffDays(today);\n    const isSameWeek = offsetFromNow > 0 && offsetFromNow < (numberOfDays ?? 7);\n    return toMarkingFormat(isSameWeek ? today : newDate);\n}\nfunction getDatesArray(date, firstDay, numberOfDays) {\n    return [...Array(NUM_OF_ITEMS).keys()].map((index) => {\n        if (isCustomNumberOfDays(numberOfDays)) {\n            return getDateForDayRange(date, index - NUMBER_OF_PAGES, numberOfDays);\n        }\n        return getDate(date, firstDay, index - NUMBER_OF_PAGES);\n    });\n}\nfunction isCustomNumberOfDays(numberOfDays) {\n    return numberOfDays && numberOfDays > 1;\n}\nWeekCalendar.displayName = 'WeekCalendar';\nexport default WeekCalendar;\n"],"mappings":"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"}