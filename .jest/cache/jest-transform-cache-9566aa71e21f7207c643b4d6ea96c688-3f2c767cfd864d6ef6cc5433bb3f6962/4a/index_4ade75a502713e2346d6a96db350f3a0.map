{"version":3,"names":["_isFunction","_interopRequireDefault","require","_propTypes","_xdate","_react","_interopRequireWildcard","_reactNative","_componentUpdater","_dateutils","_interface","_style","_reservation","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","e","r","t","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","result","NewTarget","constructor","Reflect","construct","_possibleConstructorReturn2","sham","Proxy","Boolean","valueOf","ReservationList","_Component","_inherits2","_super","props","_this","_classCallCheck2","list","React","createRef","onScroll","event","yOffset","nativeEvent","contentOffset","y","topRowOffset","topRow","heights","row","state","reservations","day","date","sameDate","selectedDay","scrollOver","clone","onDayChange","onMoveShouldSetResponderCapture","onListTouch","renderRow","_ref","item","index","reservationProps","extractReservationProps","jsx","View","onLayout","onRowLayoutChange","bind","_assertThisInitialized2","children","reservation","keyExtractor","_item$reservation","reservationsKeyExtractor","style","styleConstructor","theme","_createClass2","value","componentDidMount","updateDataSource","getReservations","componentDidUpdate","prevProps","_this2","topDay","setState","updateReservations","showOnlySelectedDayItems","_this$list","_this$list$current","scrollPosition","i","current","scrollToOffset","offset","animated","getReservationsForDay","iterator","_props$items","res","items","toMarkingFormat","map","undefined","_this$state$reservati","getTime","concat","addDays","layout","height","render","_this$props","isFunction","renderEmptyData","_this$props$renderEmp","_this$props2","ActivityIndicator","indicator","color","indicatorColor","FlatList","ref","contentContainerStyle","content","data","renderItem","showsVerticalScrollIndicator","scrollEventThrottle","refreshControl","refreshing","onRefresh","onScrollBeginDrag","onScrollEndDrag","onMomentumScrollBegin","onMomentumScrollEnd","Component","displayName","propTypes","Reservation","PropTypes","object","instanceOf","XDate","func","bool","element","defaultProps","_default","exports"],"sources":["index.js"],"sourcesContent":["import isFunction from 'lodash/isFunction';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, { Component } from 'react';\nimport { ActivityIndicator, View, FlatList } from 'react-native';\nimport { extractReservationProps } from '../../componentUpdater';\nimport { sameDate } from '../../dateutils';\nimport { toMarkingFormat } from '../../interface';\nimport styleConstructor from './style';\nimport Reservation from './reservation';\nclass ReservationList extends Component {\n    static displayName = 'ReservationList';\n    static propTypes = {\n        ...Reservation.propTypes,\n        items: PropTypes.object,\n        selectedDay: PropTypes.instanceOf(XDate),\n        topDay: PropTypes.instanceOf(XDate),\n        onDayChange: PropTypes.func,\n        showOnlySelectedDayItems: PropTypes.bool,\n        renderEmptyData: PropTypes.func,\n        onScroll: PropTypes.func,\n        onScrollBeginDrag: PropTypes.func,\n        onScrollEndDrag: PropTypes.func,\n        onMomentumScrollBegin: PropTypes.func,\n        onMomentumScrollEnd: PropTypes.func,\n        refreshControl: PropTypes.element,\n        refreshing: PropTypes.bool,\n        onRefresh: PropTypes.func,\n        reservationsKeyExtractor: PropTypes.func\n    };\n    static defaultProps = {\n        refreshing: false,\n        selectedDay: new XDate(true)\n    };\n    style;\n    heights;\n    selectedDay;\n    scrollOver;\n    list = React.createRef();\n    constructor(props) {\n        super(props);\n        this.style = styleConstructor(props.theme);\n        this.state = {\n            reservations: []\n        };\n        this.heights = [];\n        this.selectedDay = props.selectedDay;\n        this.scrollOver = true;\n    }\n    componentDidMount() {\n        this.updateDataSource(this.getReservations(this.props).reservations);\n    }\n    componentDidUpdate(prevProps) {\n        if (this.props.topDay && prevProps.topDay && prevProps !== this.props) {\n            if (!sameDate(prevProps.topDay, this.props.topDay)) {\n                this.setState({ reservations: [] }, () => this.updateReservations(this.props));\n            }\n            else {\n                this.updateReservations(this.props);\n            }\n        }\n    }\n    updateDataSource(reservations) {\n        this.setState({ reservations });\n    }\n    updateReservations(props) {\n        const { selectedDay, showOnlySelectedDayItems } = props;\n        const reservations = this.getReservations(props);\n        if (!showOnlySelectedDayItems && this.list && !sameDate(selectedDay, this.selectedDay)) {\n            let scrollPosition = 0;\n            for (let i = 0; i < reservations.scrollPosition; i++) {\n                scrollPosition += this.heights[i] || 0;\n            }\n            this.scrollOver = false;\n            this.list?.current?.scrollToOffset({ offset: scrollPosition, animated: true });\n        }\n        this.selectedDay = selectedDay;\n        this.updateDataSource(reservations.reservations);\n    }\n    getReservationsForDay(iterator, props) {\n        const day = iterator.clone();\n        const res = props.items?.[toMarkingFormat(day)];\n        if (res && res.length) {\n            return res.map((reservation, i) => {\n                return {\n                    reservation,\n                    date: i ? undefined : day\n                };\n            });\n        }\n        else if (res) {\n            return [\n                {\n                    date: iterator.clone()\n                }\n            ];\n        }\n        else {\n            return false;\n        }\n    }\n    getReservations(props) {\n        const { selectedDay, showOnlySelectedDayItems } = props;\n        if (!props.items || !selectedDay) {\n            return { reservations: [], scrollPosition: 0 };\n        }\n        let reservations = [];\n        if (this.state.reservations && this.state.reservations.length) {\n            const iterator = this.state.reservations[0].date?.clone();\n            if (iterator) {\n                while (iterator.getTime() < selectedDay.getTime()) {\n                    const res = this.getReservationsForDay(iterator, props);\n                    if (!res) {\n                        reservations = [];\n                        break;\n                    }\n                    else {\n                        reservations = reservations.concat(res);\n                    }\n                    iterator.addDays(1);\n                }\n            }\n        }\n        const scrollPosition = reservations.length;\n        const iterator = selectedDay.clone();\n        if (showOnlySelectedDayItems) {\n            const res = this.getReservationsForDay(iterator, props);\n            if (res) {\n                reservations = res;\n            }\n            iterator.addDays(1);\n        }\n        else {\n            for (let i = 0; i < 31; i++) {\n                const res = this.getReservationsForDay(iterator, props);\n                if (res) {\n                    reservations = reservations.concat(res);\n                }\n                iterator.addDays(1);\n            }\n        }\n        return { reservations, scrollPosition };\n    }\n    onScroll = (event) => {\n        const yOffset = event.nativeEvent.contentOffset.y;\n        this.props.onScroll?.(yOffset);\n        let topRowOffset = 0;\n        let topRow;\n        for (topRow = 0; topRow < this.heights.length; topRow++) {\n            if (topRowOffset + this.heights[topRow] / 2 >= yOffset) {\n                break;\n            }\n            topRowOffset += this.heights[topRow];\n        }\n        const row = this.state.reservations[topRow];\n        if (!row)\n            return;\n        const day = row.date;\n        if (day) {\n            if (!sameDate(day, this.selectedDay) && this.scrollOver) {\n                this.selectedDay = day.clone();\n                this.props.onDayChange?.(day.clone());\n            }\n        }\n    };\n    onListTouch() {\n        this.scrollOver = true;\n    }\n    onRowLayoutChange(index, event) {\n        this.heights[index] = event.nativeEvent.layout.height;\n    }\n    onMoveShouldSetResponderCapture = () => {\n        this.onListTouch();\n        return false;\n    };\n    renderRow = ({ item, index }) => {\n        const reservationProps = extractReservationProps(this.props);\n        return (<View onLayout={this.onRowLayoutChange.bind(this, index)}>\n        <Reservation {...reservationProps} item={item.reservation} date={item.date}/>\n      </View>);\n    };\n    keyExtractor = (item, index) => {\n        return this.props.reservationsKeyExtractor?.(item, index) || `${item?.reservation?.day}${index}`;\n    };\n    render() {\n        const { items, selectedDay, theme, style } = this.props;\n        if (!items || selectedDay && !items[toMarkingFormat(selectedDay)]) {\n            if (isFunction(this.props.renderEmptyData)) {\n                return this.props.renderEmptyData?.();\n            }\n            return <ActivityIndicator style={this.style.indicator} color={theme?.indicatorColor}/>;\n        }\n        return (<FlatList ref={this.list} style={style} contentContainerStyle={this.style.content} data={this.state.reservations} renderItem={this.renderRow} keyExtractor={this.keyExtractor} showsVerticalScrollIndicator={false} scrollEventThrottle={200} onMoveShouldSetResponderCapture={this.onMoveShouldSetResponderCapture} onScroll={this.onScroll} refreshControl={this.props.refreshControl} refreshing={this.props.refreshing} onRefresh={this.props.onRefresh} onScrollBeginDrag={this.props.onScrollBeginDrag} onScrollEndDrag={this.props.onScrollEndDrag} onMomentumScrollBegin={this.props.onMomentumScrollBegin} onMomentumScrollEnd={this.props.onMomentumScrollEnd}/>);\n    }\n}\nexport default ReservationList;\n"],"mappings":"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"}