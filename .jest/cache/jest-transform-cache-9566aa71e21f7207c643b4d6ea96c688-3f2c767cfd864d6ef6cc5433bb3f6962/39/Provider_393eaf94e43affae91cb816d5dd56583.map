{"version":3,"names":["_xdate","_interopRequireDefault","require","_react","_interopRequireWildcard","_reactNative","_dateutils","_interface","_hooks","_commons","_style","_index","_todayButton","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","CalendarProvider","props","theme","date","onDateChanged","onMonthChange","_props$showTodayButto","showTodayButton","disabledOpacity","todayBottomMargin","todayButtonStyle","propsStyle","style","numberOfDays","_props$timelineLeftIn","timelineLeftInset","children","useRef","styleConstructor","todayButton","prevDate","currDate","_useState","useState","_useState2","_slicedToArray2","currentDate","setCurrentDate","_useState3","UpdateSources","CALENDAR_INIT","_useState4","updateSource","setUpdateSource","wrapperStyle","useMemo","current","contextWrapper","useDidUpdate","_setDate","PROP_UPDATE","useCallback","sameMonth","XDate","xdateToData","_setDisabled","disabled","_todayButton$current","disable","contextValue","setDate","setDisabled","renderTodayButton","jsx","ref","margin","jsxs","Provider","value","View","_default","exports","displayName"],"sources":["Provider.js"],"sourcesContent":["import XDate from 'xdate';\nimport React, { useRef, useState, useCallback, useMemo } from 'react';\nimport { View } from 'react-native';\nimport { sameMonth } from '../../dateutils';\nimport { xdateToData } from '../../interface';\nimport { useDidUpdate } from '../../hooks';\nimport { UpdateSources } from '../commons';\nimport styleConstructor from '../style';\nimport CalendarContext from './index';\nimport TodayButton from './todayButton';\n/**\n * @description: Calendar context provider component\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst CalendarProvider = (props) => {\n    const { theme, date, onDateChanged, onMonthChange, showTodayButton = false, disabledOpacity, todayBottomMargin, todayButtonStyle, style: propsStyle, numberOfDays, timelineLeftInset = 72, children } = props;\n    const style = useRef(styleConstructor(theme));\n    const todayButton = useRef();\n    const prevDate = useRef(date);\n    const currDate = useRef(date); // for setDate only to keep prevDate up to date\n    const [currentDate, setCurrentDate] = useState(date);\n    const [updateSource, setUpdateSource] = useState(UpdateSources.CALENDAR_INIT);\n    const wrapperStyle = useMemo(() => {\n        return [style.current.contextWrapper, propsStyle];\n    }, [style, propsStyle]);\n    useDidUpdate(() => {\n        if (date && date !== currentDate) {\n            _setDate(date, UpdateSources.PROP_UPDATE);\n        }\n    }, [date]);\n    const _setDate = useCallback((date, updateSource) => {\n        prevDate.current = currDate.current;\n        currDate.current = date;\n        setCurrentDate(date);\n        setUpdateSource(updateSource);\n        onDateChanged?.(date, updateSource);\n        if (!sameMonth(new XDate(date), new XDate(prevDate.current))) {\n            onMonthChange?.(xdateToData(new XDate(date)), updateSource);\n        }\n    }, [onDateChanged, onMonthChange]);\n    const _setDisabled = useCallback((disabled) => {\n        if (showTodayButton) {\n            todayButton.current?.disable(disabled);\n        }\n    }, [showTodayButton]);\n    const contextValue = useMemo(() => {\n        return {\n            date: currentDate,\n            prevDate: prevDate.current,\n            updateSource: updateSource,\n            setDate: _setDate,\n            setDisabled: _setDisabled,\n            numberOfDays,\n            timelineLeftInset\n        };\n    }, [currentDate, updateSource, numberOfDays, _setDisabled]);\n    const renderTodayButton = () => {\n        return (<TodayButton ref={todayButton} disabledOpacity={disabledOpacity} margin={todayBottomMargin} style={todayButtonStyle} theme={theme}/>);\n    };\n    return (<CalendarContext.Provider value={contextValue}>\n      <View style={wrapperStyle} key={numberOfDays}>{children}</View>\n      {showTodayButton && renderTodayButton()}\n    </CalendarContext.Provider>);\n};\nexport default CalendarProvider;\nCalendarProvider.displayName = 'CalendarProvider';\n"],"mappings":"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"}