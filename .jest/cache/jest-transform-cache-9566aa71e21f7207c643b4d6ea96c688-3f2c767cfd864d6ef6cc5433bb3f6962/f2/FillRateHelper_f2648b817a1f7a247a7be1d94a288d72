79cac0d6656e5434618153fca35ec98c
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var Info = (0, _createClass2.default)(function Info() {
  (0, _classCallCheck2.default)(this, Info);
  this.any_blank_count = 0;
  this.any_blank_ms = 0;
  this.any_blank_speed_sum = 0;
  this.mostly_blank_count = 0;
  this.mostly_blank_ms = 0;
  this.pixels_blank = 0;
  this.pixels_sampled = 0;
  this.pixels_scrolled = 0;
  this.total_time_spent = 0;
  this.sample_count = 0;
});
var DEBUG = false;
var _listeners = [];
var _minSampleCount = 10;
var _sampleRate = DEBUG ? 1 : null;
var FillRateHelper = function () {
  function FillRateHelper(getFrameMetrics) {
    (0, _classCallCheck2.default)(this, FillRateHelper);
    this._anyBlankStartTime = null;
    this._enabled = false;
    this._info = new Info();
    this._mostlyBlankStartTime = null;
    this._samplesStartTime = null;
    this._getFrameMetrics = getFrameMetrics;
    this._enabled = (_sampleRate || 0) > Math.random();
    this._resetData();
  }
  (0, _createClass2.default)(FillRateHelper, [{
    key: "activate",
    value: function activate() {
      if (this._enabled && this._samplesStartTime == null) {
        DEBUG && console.debug('FillRateHelper: activate');
        this._samplesStartTime = global.performance.now();
      }
    }
  }, {
    key: "deactivateAndFlush",
    value: function deactivateAndFlush() {
      if (!this._enabled) {
        return;
      }
      var start = this._samplesStartTime;
      if (start == null) {
        DEBUG && console.debug('FillRateHelper: bail on deactivate with no start time');
        return;
      }
      if (this._info.sample_count < _minSampleCount) {
        this._resetData();
        return;
      }
      var total_time_spent = global.performance.now() - start;
      var info = _objectSpread(_objectSpread({}, this._info), {}, {
        total_time_spent: total_time_spent
      });
      if (DEBUG) {
        var derived = {
          avg_blankness: this._info.pixels_blank / this._info.pixels_sampled,
          avg_speed: this._info.pixels_scrolled / (total_time_spent / 1000),
          avg_speed_when_any_blank: this._info.any_blank_speed_sum / this._info.any_blank_count,
          any_blank_per_min: this._info.any_blank_count / (total_time_spent / 1000 / 60),
          any_blank_time_frac: this._info.any_blank_ms / total_time_spent,
          mostly_blank_per_min: this._info.mostly_blank_count / (total_time_spent / 1000 / 60),
          mostly_blank_time_frac: this._info.mostly_blank_ms / total_time_spent
        };
        for (var key in derived) {
          derived[key] = Math.round(1000 * derived[key]) / 1000;
        }
        console.debug('FillRateHelper deactivateAndFlush: ', {
          derived: derived,
          info: info
        });
      }
      _listeners.forEach(function (listener) {
        return listener(info);
      });
      this._resetData();
    }
  }, {
    key: "computeBlankness",
    value: function computeBlankness(props, cellsAroundViewport, scrollMetrics) {
      if (!this._enabled || props.getItemCount(props.data) === 0 || cellsAroundViewport.last < cellsAroundViewport.first || this._samplesStartTime == null) {
        return 0;
      }
      var dOffset = scrollMetrics.dOffset,
        offset = scrollMetrics.offset,
        velocity = scrollMetrics.velocity,
        visibleLength = scrollMetrics.visibleLength;
      this._info.sample_count++;
      this._info.pixels_sampled += Math.round(visibleLength);
      this._info.pixels_scrolled += Math.round(Math.abs(dOffset));
      var scrollSpeed = Math.round(Math.abs(velocity) * 1000);
      var now = global.performance.now();
      if (this._anyBlankStartTime != null) {
        this._info.any_blank_ms += now - this._anyBlankStartTime;
      }
      this._anyBlankStartTime = null;
      if (this._mostlyBlankStartTime != null) {
        this._info.mostly_blank_ms += now - this._mostlyBlankStartTime;
      }
      this._mostlyBlankStartTime = null;
      var blankTop = 0;
      var first = cellsAroundViewport.first;
      var firstFrame = this._getFrameMetrics(first, props);
      while (first <= cellsAroundViewport.last && (!firstFrame || !firstFrame.inLayout)) {
        firstFrame = this._getFrameMetrics(first, props);
        first++;
      }
      if (firstFrame && first > 0) {
        blankTop = Math.min(visibleLength, Math.max(0, firstFrame.offset - offset));
      }
      var blankBottom = 0;
      var last = cellsAroundViewport.last;
      var lastFrame = this._getFrameMetrics(last, props);
      while (last >= cellsAroundViewport.first && (!lastFrame || !lastFrame.inLayout)) {
        lastFrame = this._getFrameMetrics(last, props);
        last--;
      }
      if (lastFrame && last < props.getItemCount(props.data) - 1) {
        var bottomEdge = lastFrame.offset + lastFrame.length;
        blankBottom = Math.min(visibleLength, Math.max(0, offset + visibleLength - bottomEdge));
      }
      var pixels_blank = Math.round(blankTop + blankBottom);
      var blankness = pixels_blank / visibleLength;
      if (blankness > 0) {
        this._anyBlankStartTime = now;
        this._info.any_blank_speed_sum += scrollSpeed;
        this._info.any_blank_count++;
        this._info.pixels_blank += pixels_blank;
        if (blankness > 0.5) {
          this._mostlyBlankStartTime = now;
          this._info.mostly_blank_count++;
        }
      } else if (scrollSpeed < 0.01 || Math.abs(dOffset) < 1) {
        this.deactivateAndFlush();
      }
      return blankness;
    }
  }, {
    key: "enabled",
    value: function enabled() {
      return this._enabled;
    }
  }, {
    key: "_resetData",
    value: function _resetData() {
      this._anyBlankStartTime = null;
      this._info = new Info();
      this._mostlyBlankStartTime = null;
      this._samplesStartTime = null;
    }
  }], [{
    key: "addListener",
    value: function addListener(callback) {
      if (_sampleRate === null) {
        console.warn('Call `FillRateHelper.setSampleRate` before `addListener`.');
      }
      _listeners.push(callback);
      return {
        remove: function remove() {
          _listeners = _listeners.filter(function (listener) {
            return callback !== listener;
          });
        }
      };
    }
  }, {
    key: "setSampleRate",
    value: function setSampleRate(sampleRate) {
      _sampleRate = sampleRate;
    }
  }, {
    key: "setMinSampleCount",
    value: function setMinSampleCount(minSampleCount) {
      _minSampleCount = minSampleCount;
    }
  }]);
  return FillRateHelper;
}();
module.exports = FillRateHelper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJfY3JlYXRlQ2xhc3MyIiwiX2NsYXNzQ2FsbENoZWNrMiIsIm93bktleXMiLCJlIiwiciIsInQiLCJPYmplY3QiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsImRlZmF1bHQiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlZmluZVByb3BlcnR5IiwiSW5mbyIsImFueV9ibGFua19jb3VudCIsImFueV9ibGFua19tcyIsImFueV9ibGFua19zcGVlZF9zdW0iLCJtb3N0bHlfYmxhbmtfY291bnQiLCJtb3N0bHlfYmxhbmtfbXMiLCJwaXhlbHNfYmxhbmsiLCJwaXhlbHNfc2FtcGxlZCIsInBpeGVsc19zY3JvbGxlZCIsInRvdGFsX3RpbWVfc3BlbnQiLCJzYW1wbGVfY291bnQiLCJERUJVRyIsIl9saXN0ZW5lcnMiLCJfbWluU2FtcGxlQ291bnQiLCJfc2FtcGxlUmF0ZSIsIkZpbGxSYXRlSGVscGVyIiwiZ2V0RnJhbWVNZXRyaWNzIiwiX2FueUJsYW5rU3RhcnRUaW1lIiwiX2VuYWJsZWQiLCJfaW5mbyIsIl9tb3N0bHlCbGFua1N0YXJ0VGltZSIsIl9zYW1wbGVzU3RhcnRUaW1lIiwiX2dldEZyYW1lTWV0cmljcyIsIk1hdGgiLCJyYW5kb20iLCJfcmVzZXREYXRhIiwia2V5IiwidmFsdWUiLCJhY3RpdmF0ZSIsImNvbnNvbGUiLCJkZWJ1ZyIsImdsb2JhbCIsInBlcmZvcm1hbmNlIiwibm93IiwiZGVhY3RpdmF0ZUFuZEZsdXNoIiwic3RhcnQiLCJpbmZvIiwiZGVyaXZlZCIsImF2Z19ibGFua25lc3MiLCJhdmdfc3BlZWQiLCJhdmdfc3BlZWRfd2hlbl9hbnlfYmxhbmsiLCJhbnlfYmxhbmtfcGVyX21pbiIsImFueV9ibGFua190aW1lX2ZyYWMiLCJtb3N0bHlfYmxhbmtfcGVyX21pbiIsIm1vc3RseV9ibGFua190aW1lX2ZyYWMiLCJyb3VuZCIsImxpc3RlbmVyIiwiY29tcHV0ZUJsYW5rbmVzcyIsInByb3BzIiwiY2VsbHNBcm91bmRWaWV3cG9ydCIsInNjcm9sbE1ldHJpY3MiLCJnZXRJdGVtQ291bnQiLCJkYXRhIiwibGFzdCIsImZpcnN0IiwiZE9mZnNldCIsIm9mZnNldCIsInZlbG9jaXR5IiwidmlzaWJsZUxlbmd0aCIsImFicyIsInNjcm9sbFNwZWVkIiwiYmxhbmtUb3AiLCJmaXJzdEZyYW1lIiwiaW5MYXlvdXQiLCJtaW4iLCJtYXgiLCJibGFua0JvdHRvbSIsImxhc3RGcmFtZSIsImJvdHRvbUVkZ2UiLCJibGFua25lc3MiLCJlbmFibGVkIiwiYWRkTGlzdGVuZXIiLCJjYWxsYmFjayIsIndhcm4iLCJyZW1vdmUiLCJzZXRTYW1wbGVSYXRlIiwic2FtcGxlUmF0ZSIsInNldE1pblNhbXBsZUNvdW50IiwibWluU2FtcGxlQ291bnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiRmlsbFJhdGVIZWxwZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7RnJhbWVNZXRyaWNQcm9wc30gZnJvbSAnLi9WaXJ0dWFsaXplZExpc3RQcm9wcyc7XG5cbmV4cG9ydCB0eXBlIEZpbGxSYXRlSW5mbyA9IEluZm87XG5cbmNsYXNzIEluZm8ge1xuICBhbnlfYmxhbmtfY291bnQ6IG51bWJlciA9IDA7XG4gIGFueV9ibGFua19tczogbnVtYmVyID0gMDtcbiAgYW55X2JsYW5rX3NwZWVkX3N1bTogbnVtYmVyID0gMDtcbiAgbW9zdGx5X2JsYW5rX2NvdW50OiBudW1iZXIgPSAwO1xuICBtb3N0bHlfYmxhbmtfbXM6IG51bWJlciA9IDA7XG4gIHBpeGVsc19ibGFuazogbnVtYmVyID0gMDtcbiAgcGl4ZWxzX3NhbXBsZWQ6IG51bWJlciA9IDA7XG4gIHBpeGVsc19zY3JvbGxlZDogbnVtYmVyID0gMDtcbiAgdG90YWxfdGltZV9zcGVudDogbnVtYmVyID0gMDtcbiAgc2FtcGxlX2NvdW50OiBudW1iZXIgPSAwO1xufVxuXG50eXBlIEZyYW1lTWV0cmljcyA9IHtcbiAgaW5MYXlvdXQ/OiBib29sZWFuLFxuICBsZW5ndGg6IG51bWJlcixcbiAgb2Zmc2V0OiBudW1iZXIsXG4gIC4uLlxufTtcblxuY29uc3QgREVCVUcgPSBmYWxzZTtcblxubGV0IF9saXN0ZW5lcnM6IEFycmF5PChJbmZvKSA9PiB2b2lkPiA9IFtdO1xubGV0IF9taW5TYW1wbGVDb3VudCA9IDEwO1xubGV0IF9zYW1wbGVSYXRlID0gREVCVUcgPyAxIDogbnVsbDtcblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyBmb3IgZGV0ZWN0aW5nIHdoZW4gdGhlIG1heGltZW0gZmlsbCByYXRlIG9mIGBWaXJ0dWFsaXplZExpc3RgIGlzIGV4Y2VlZGVkLlxuICogQnkgZGVmYXVsdCB0aGUgc2FtcGxpbmcgcmF0ZSBpcyBzZXQgdG8gemVybyBhbmQgdGhpcyB3aWxsIGRvIG5vdGhpbmcuIElmIHlvdSB3YW50IHRvIGNvbGxlY3RcbiAqIHNhbXBsZXMgKGUuZy4gdG8gbG9nIHRoZW0pLCBtYWtlIHN1cmUgdG8gY2FsbCBgRmlsbFJhdGVIZWxwZXIuc2V0U2FtcGxlUmF0ZSgwLjAtMS4wKWAuXG4gKlxuICogTGlzdGVuZXJzIGFuZCBzYW1wbGUgcmF0ZSBhcmUgZ2xvYmFsIGZvciBhbGwgYFZpcnR1YWxpemVkTGlzdGBzIC0gdHlwaWNhbCB1c2FnZSB3aWxsIGNvbWJpbmUgd2l0aFxuICogYFNjZW5lVHJhY2tlci5nZXRBY3RpdmVTY2VuZWAgdG8gZGV0ZXJtaW5lIHRoZSBjb250ZXh0IG9mIHRoZSBldmVudHMuXG4gKi9cbmNsYXNzIEZpbGxSYXRlSGVscGVyIHtcbiAgX2FueUJsYW5rU3RhcnRUaW1lOiA/bnVtYmVyID0gbnVsbDtcbiAgX2VuYWJsZWQgPSBmYWxzZTtcbiAgX2dldEZyYW1lTWV0cmljczogKGluZGV4OiBudW1iZXIsIHByb3BzOiBGcmFtZU1ldHJpY1Byb3BzKSA9PiA/RnJhbWVNZXRyaWNzO1xuICBfaW5mbzogSW5mbyA9IG5ldyBJbmZvKCk7XG4gIF9tb3N0bHlCbGFua1N0YXJ0VGltZTogP251bWJlciA9IG51bGw7XG4gIF9zYW1wbGVzU3RhcnRUaW1lOiA/bnVtYmVyID0gbnVsbDtcblxuICBzdGF0aWMgYWRkTGlzdGVuZXIoY2FsbGJhY2s6IEZpbGxSYXRlSW5mbyA9PiB2b2lkKToge1xuICAgIHJlbW92ZTogKCkgPT4gdm9pZCxcbiAgICAuLi5cbiAgfSB7XG4gICAgaWYgKF9zYW1wbGVSYXRlID09PSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NhbGwgYEZpbGxSYXRlSGVscGVyLnNldFNhbXBsZVJhdGVgIGJlZm9yZSBgYWRkTGlzdGVuZXJgLicpO1xuICAgIH1cbiAgICBfbGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICAgIHJldHVybiB7XG4gICAgICByZW1vdmU6ICgpID0+IHtcbiAgICAgICAgX2xpc3RlbmVycyA9IF9saXN0ZW5lcnMuZmlsdGVyKGxpc3RlbmVyID0+IGNhbGxiYWNrICE9PSBsaXN0ZW5lcik7XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgc2V0U2FtcGxlUmF0ZShzYW1wbGVSYXRlOiBudW1iZXIpIHtcbiAgICBfc2FtcGxlUmF0ZSA9IHNhbXBsZVJhdGU7XG4gIH1cblxuICBzdGF0aWMgc2V0TWluU2FtcGxlQ291bnQobWluU2FtcGxlQ291bnQ6IG51bWJlcikge1xuICAgIF9taW5TYW1wbGVDb3VudCA9IG1pblNhbXBsZUNvdW50O1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgZ2V0RnJhbWVNZXRyaWNzOiAoaW5kZXg6IG51bWJlciwgcHJvcHM6IEZyYW1lTWV0cmljUHJvcHMpID0+ID9GcmFtZU1ldHJpY3MsXG4gICkge1xuICAgIHRoaXMuX2dldEZyYW1lTWV0cmljcyA9IGdldEZyYW1lTWV0cmljcztcbiAgICB0aGlzLl9lbmFibGVkID0gKF9zYW1wbGVSYXRlIHx8IDApID4gTWF0aC5yYW5kb20oKTtcbiAgICB0aGlzLl9yZXNldERhdGEoKTtcbiAgfVxuXG4gIGFjdGl2YXRlKCkge1xuICAgIGlmICh0aGlzLl9lbmFibGVkICYmIHRoaXMuX3NhbXBsZXNTdGFydFRpbWUgPT0gbnVsbCkge1xuICAgICAgREVCVUcgJiYgY29uc29sZS5kZWJ1ZygnRmlsbFJhdGVIZWxwZXI6IGFjdGl2YXRlJyk7XG4gICAgICB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lID0gZ2xvYmFsLnBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH1cbiAgfVxuXG4gIGRlYWN0aXZhdGVBbmRGbHVzaCgpIHtcbiAgICBpZiAoIXRoaXMuX2VuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lOyAvLyBjb25zdCBmb3IgZmxvd1xuICAgIGlmIChzdGFydCA9PSBudWxsKSB7XG4gICAgICBERUJVRyAmJlxuICAgICAgICBjb25zb2xlLmRlYnVnKCdGaWxsUmF0ZUhlbHBlcjogYmFpbCBvbiBkZWFjdGl2YXRlIHdpdGggbm8gc3RhcnQgdGltZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5faW5mby5zYW1wbGVfY291bnQgPCBfbWluU2FtcGxlQ291bnQpIHtcbiAgICAgIC8vIERvbid0IGJvdGhlciB3aXRoIHVuZGVyLXNhbXBsZWQgZXZlbnRzLlxuICAgICAgdGhpcy5fcmVzZXREYXRhKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvdGFsX3RpbWVfc3BlbnQgPSBnbG9iYWwucGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydDtcbiAgICBjb25zdCBpbmZvOiBhbnkgPSB7XG4gICAgICAuLi50aGlzLl9pbmZvLFxuICAgICAgdG90YWxfdGltZV9zcGVudCxcbiAgICB9O1xuICAgIGlmIChERUJVRykge1xuICAgICAgY29uc3QgZGVyaXZlZCA9IHtcbiAgICAgICAgYXZnX2JsYW5rbmVzczogdGhpcy5faW5mby5waXhlbHNfYmxhbmsgLyB0aGlzLl9pbmZvLnBpeGVsc19zYW1wbGVkLFxuICAgICAgICBhdmdfc3BlZWQ6IHRoaXMuX2luZm8ucGl4ZWxzX3Njcm9sbGVkIC8gKHRvdGFsX3RpbWVfc3BlbnQgLyAxMDAwKSxcbiAgICAgICAgYXZnX3NwZWVkX3doZW5fYW55X2JsYW5rOlxuICAgICAgICAgIHRoaXMuX2luZm8uYW55X2JsYW5rX3NwZWVkX3N1bSAvIHRoaXMuX2luZm8uYW55X2JsYW5rX2NvdW50LFxuICAgICAgICBhbnlfYmxhbmtfcGVyX21pbjpcbiAgICAgICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19jb3VudCAvICh0b3RhbF90aW1lX3NwZW50IC8gMTAwMCAvIDYwKSxcbiAgICAgICAgYW55X2JsYW5rX3RpbWVfZnJhYzogdGhpcy5faW5mby5hbnlfYmxhbmtfbXMgLyB0b3RhbF90aW1lX3NwZW50LFxuICAgICAgICBtb3N0bHlfYmxhbmtfcGVyX21pbjpcbiAgICAgICAgICB0aGlzLl9pbmZvLm1vc3RseV9ibGFua19jb3VudCAvICh0b3RhbF90aW1lX3NwZW50IC8gMTAwMCAvIDYwKSxcbiAgICAgICAgbW9zdGx5X2JsYW5rX3RpbWVfZnJhYzogdGhpcy5faW5mby5tb3N0bHlfYmxhbmtfbXMgLyB0b3RhbF90aW1lX3NwZW50LFxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGRlcml2ZWQpIHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgICAgIGRlcml2ZWRba2V5XSA9IE1hdGgucm91bmQoMTAwMCAqIGRlcml2ZWRba2V5XSkgLyAxMDAwO1xuICAgICAgfVxuICAgICAgY29uc29sZS5kZWJ1ZygnRmlsbFJhdGVIZWxwZXIgZGVhY3RpdmF0ZUFuZEZsdXNoOiAnLCB7ZGVyaXZlZCwgaW5mb30pO1xuICAgIH1cbiAgICBfbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoaW5mbykpO1xuICAgIHRoaXMuX3Jlc2V0RGF0YSgpO1xuICB9XG5cbiAgY29tcHV0ZUJsYW5rbmVzcyhcbiAgICBwcm9wczoge1xuICAgICAgLi4uRnJhbWVNZXRyaWNQcm9wcyxcbiAgICAgIGluaXRpYWxOdW1Ub1JlbmRlcj86ID9udW1iZXIsXG4gICAgICAuLi5cbiAgICB9LFxuICAgIGNlbGxzQXJvdW5kVmlld3BvcnQ6IHtcbiAgICAgIGZpcnN0OiBudW1iZXIsXG4gICAgICBsYXN0OiBudW1iZXIsXG4gICAgICAuLi5cbiAgICB9LFxuICAgIHNjcm9sbE1ldHJpY3M6IHtcbiAgICAgIGRPZmZzZXQ6IG51bWJlcixcbiAgICAgIG9mZnNldDogbnVtYmVyLFxuICAgICAgdmVsb2NpdHk6IG51bWJlcixcbiAgICAgIHZpc2libGVMZW5ndGg6IG51bWJlcixcbiAgICAgIC4uLlxuICAgIH0sXG4gICk6IG51bWJlciB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMuX2VuYWJsZWQgfHxcbiAgICAgIHByb3BzLmdldEl0ZW1Db3VudChwcm9wcy5kYXRhKSA9PT0gMCB8fFxuICAgICAgY2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0IDwgY2VsbHNBcm91bmRWaWV3cG9ydC5maXJzdCB8fFxuICAgICAgdGhpcy5fc2FtcGxlc1N0YXJ0VGltZSA9PSBudWxsXG4gICAgKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgY29uc3Qge2RPZmZzZXQsIG9mZnNldCwgdmVsb2NpdHksIHZpc2libGVMZW5ndGh9ID0gc2Nyb2xsTWV0cmljcztcblxuICAgIC8vIERlbm9taW5hdG9yIG1ldHJpY3MgdGhhdCB3ZSB0cmFjayBmb3IgYWxsIGV2ZW50cyAtIG1vc3Qgb2YgdGhlIHRpbWUgdGhlcmUgaXMgbm8gYmxhbmtuZXNzIGFuZFxuICAgIC8vIHdlIHdhbnQgdG8gY2FwdHVyZSB0aGF0LlxuICAgIHRoaXMuX2luZm8uc2FtcGxlX2NvdW50Kys7XG4gICAgdGhpcy5faW5mby5waXhlbHNfc2FtcGxlZCArPSBNYXRoLnJvdW5kKHZpc2libGVMZW5ndGgpO1xuICAgIHRoaXMuX2luZm8ucGl4ZWxzX3Njcm9sbGVkICs9IE1hdGgucm91bmQoTWF0aC5hYnMoZE9mZnNldCkpO1xuICAgIGNvbnN0IHNjcm9sbFNwZWVkID0gTWF0aC5yb3VuZChNYXRoLmFicyh2ZWxvY2l0eSkgKiAxMDAwKTsgLy8gcHggLyBzZWNcblxuICAgIC8vIFdoZXRoZXIgYmxhbmsgbm93IG9yIG5vdCwgcmVjb3JkIHRoZSBlbGFwc2VkIHRpbWUgYmxhbmsgaWYgd2Ugd2VyZSBibGFuayBsYXN0IHRpbWUuXG4gICAgY29uc3Qgbm93ID0gZ2xvYmFsLnBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGlmICh0aGlzLl9hbnlCbGFua1N0YXJ0VGltZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19tcyArPSBub3cgLSB0aGlzLl9hbnlCbGFua1N0YXJ0VGltZTtcbiAgICB9XG4gICAgdGhpcy5fYW55QmxhbmtTdGFydFRpbWUgPSBudWxsO1xuICAgIGlmICh0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9pbmZvLm1vc3RseV9ibGFua19tcyArPSBub3cgLSB0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZTtcbiAgICB9XG4gICAgdGhpcy5fbW9zdGx5QmxhbmtTdGFydFRpbWUgPSBudWxsO1xuXG4gICAgbGV0IGJsYW5rVG9wID0gMDtcbiAgICBsZXQgZmlyc3QgPSBjZWxsc0Fyb3VuZFZpZXdwb3J0LmZpcnN0O1xuICAgIGxldCBmaXJzdEZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzKGZpcnN0LCBwcm9wcyk7XG4gICAgd2hpbGUgKFxuICAgICAgZmlyc3QgPD0gY2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0ICYmXG4gICAgICAoIWZpcnN0RnJhbWUgfHwgIWZpcnN0RnJhbWUuaW5MYXlvdXQpXG4gICAgKSB7XG4gICAgICBmaXJzdEZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzKGZpcnN0LCBwcm9wcyk7XG4gICAgICBmaXJzdCsrO1xuICAgIH1cbiAgICAvLyBPbmx5IGNvdW50IGJsYW5rVG9wIGlmIHdlIGFyZW4ndCByZW5kZXJpbmcgdGhlIGZpcnN0IGl0ZW0sIG90aGVyd2lzZSB3ZSB3aWxsIGNvdW50IHRoZSBoZWFkZXJcbiAgICAvLyBhcyBibGFuay5cbiAgICBpZiAoZmlyc3RGcmFtZSAmJiBmaXJzdCA+IDApIHtcbiAgICAgIGJsYW5rVG9wID0gTWF0aC5taW4oXG4gICAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgICAgIE1hdGgubWF4KDAsIGZpcnN0RnJhbWUub2Zmc2V0IC0gb2Zmc2V0KSxcbiAgICAgICk7XG4gICAgfVxuICAgIGxldCBibGFua0JvdHRvbSA9IDA7XG4gICAgbGV0IGxhc3QgPSBjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3Q7XG4gICAgbGV0IGxhc3RGcmFtZSA9IHRoaXMuX2dldEZyYW1lTWV0cmljcyhsYXN0LCBwcm9wcyk7XG4gICAgd2hpbGUgKFxuICAgICAgbGFzdCA+PSBjZWxsc0Fyb3VuZFZpZXdwb3J0LmZpcnN0ICYmXG4gICAgICAoIWxhc3RGcmFtZSB8fCAhbGFzdEZyYW1lLmluTGF5b3V0KVxuICAgICkge1xuICAgICAgbGFzdEZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzKGxhc3QsIHByb3BzKTtcbiAgICAgIGxhc3QtLTtcbiAgICB9XG4gICAgLy8gT25seSBjb3VudCBibGFua0JvdHRvbSBpZiB3ZSBhcmVuJ3QgcmVuZGVyaW5nIHRoZSBsYXN0IGl0ZW0sIG90aGVyd2lzZSB3ZSB3aWxsIGNvdW50IHRoZVxuICAgIC8vIGZvb3RlciBhcyBibGFuay5cbiAgICBpZiAobGFzdEZyYW1lICYmIGxhc3QgPCBwcm9wcy5nZXRJdGVtQ291bnQocHJvcHMuZGF0YSkgLSAxKSB7XG4gICAgICBjb25zdCBib3R0b21FZGdlID0gbGFzdEZyYW1lLm9mZnNldCArIGxhc3RGcmFtZS5sZW5ndGg7XG4gICAgICBibGFua0JvdHRvbSA9IE1hdGgubWluKFxuICAgICAgICB2aXNpYmxlTGVuZ3RoLFxuICAgICAgICBNYXRoLm1heCgwLCBvZmZzZXQgKyB2aXNpYmxlTGVuZ3RoIC0gYm90dG9tRWRnZSksXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBwaXhlbHNfYmxhbmsgPSBNYXRoLnJvdW5kKGJsYW5rVG9wICsgYmxhbmtCb3R0b20pO1xuICAgIGNvbnN0IGJsYW5rbmVzcyA9IHBpeGVsc19ibGFuayAvIHZpc2libGVMZW5ndGg7XG4gICAgaWYgKGJsYW5rbmVzcyA+IDApIHtcbiAgICAgIHRoaXMuX2FueUJsYW5rU3RhcnRUaW1lID0gbm93O1xuICAgICAgdGhpcy5faW5mby5hbnlfYmxhbmtfc3BlZWRfc3VtICs9IHNjcm9sbFNwZWVkO1xuICAgICAgdGhpcy5faW5mby5hbnlfYmxhbmtfY291bnQrKztcbiAgICAgIHRoaXMuX2luZm8ucGl4ZWxzX2JsYW5rICs9IHBpeGVsc19ibGFuaztcbiAgICAgIGlmIChibGFua25lc3MgPiAwLjUpIHtcbiAgICAgICAgdGhpcy5fbW9zdGx5QmxhbmtTdGFydFRpbWUgPSBub3c7XG4gICAgICAgIHRoaXMuX2luZm8ubW9zdGx5X2JsYW5rX2NvdW50Kys7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzY3JvbGxTcGVlZCA8IDAuMDEgfHwgTWF0aC5hYnMoZE9mZnNldCkgPCAxKSB7XG4gICAgICB0aGlzLmRlYWN0aXZhdGVBbmRGbHVzaCgpO1xuICAgIH1cbiAgICByZXR1cm4gYmxhbmtuZXNzO1xuICB9XG5cbiAgZW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcbiAgfVxuXG4gIF9yZXNldERhdGEoKSB7XG4gICAgdGhpcy5fYW55QmxhbmtTdGFydFRpbWUgPSBudWxsO1xuICAgIHRoaXMuX2luZm8gPSBuZXcgSW5mbygpO1xuICAgIHRoaXMuX21vc3RseUJsYW5rU3RhcnRUaW1lID0gbnVsbDtcbiAgICB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lID0gbnVsbDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZpbGxSYXRlSGVscGVyO1xuIl0sIm1hcHBpbmdzIjoiQUFVQSxZQUFZOztBQUFDLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQSxJQUFBQyxnQkFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQUUsYUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQUcsZ0JBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLFNBQUFJLFFBQUFDLENBQUEsRUFBQUMsQ0FBQSxRQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsSUFBQSxDQUFBSixDQUFBLE9BQUFHLE1BQUEsQ0FBQUUscUJBQUEsUUFBQUMsQ0FBQSxHQUFBSCxNQUFBLENBQUFFLHFCQUFBLENBQUFMLENBQUEsR0FBQUMsQ0FBQSxLQUFBSyxDQUFBLEdBQUFBLENBQUEsQ0FBQUMsTUFBQSxXQUFBTixDQUFBLFdBQUFFLE1BQUEsQ0FBQUssd0JBQUEsQ0FBQVIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFRLFVBQUEsT0FBQVAsQ0FBQSxDQUFBUSxJQUFBLENBQUFDLEtBQUEsQ0FBQVQsQ0FBQSxFQUFBSSxDQUFBLFlBQUFKLENBQUE7QUFBQSxTQUFBVSxjQUFBWixDQUFBLGFBQUFDLENBQUEsTUFBQUEsQ0FBQSxHQUFBWSxT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